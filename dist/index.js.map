{"version":3,"file":"index.js","sources":["../src/context/ChatContext.js","../src/context/ChannelContext.js","../src/context/TranslationContext.js","../src/utils.js","../src/i18n/Streami18n.js","../src/components/Attachment/AttachmentActions.js","../src/components/Attachment/Audio.js","../src/assets/Poweredby_100px-White_VertText.png","../src/components/SafeAnchor/SafeAnchor.js","../src/components/Attachment/Card.js","../src/components/Attachment/FileAttachment.js","../src/components/Gallery/ModalImage.js","../src/components/Gallery/ModalWrapper.js","../src/components/Gallery/Gallery.js","../src/components/Gallery/Image.js","../src/components/Attachment/Attachment.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../src/components/Avatar/Avatar.js","../src/components/ChannelPreview/ChannelPreviewCountOnly.js","../src/components/ChannelPreview/utils.js","../src/components/ChannelPreview/ChannelPreview.js","../src/components/ChannelPreview/ChannelPreviewCompact.js","../src/components/ChannelPreview/ChannelPreviewLastMessage.js","../src/components/ChannelPreview/ChannelPreviewMessenger.js","../src/components/Channel/emojiData.js","../src/components/Message/icons.js","../src/components/Message/MessageRepliesCountButton.js","../src/components/MML/MML.js","../src/components/Modal/Modal.js","../src/components/CommandItem/CommandItem.js","../src/components/EmoticonItem/EmoticonItem.js","../src/components/Loading/LoadingChannels.js","../src/components/Loading/LoadingErrorIndicator.js","../src/components/Loading/LoadingIndicator.js","../src/components/UserItem/UserItem.js","../src/components/ChatAutoComplete/ChatAutoComplete.js","../src/components/Tooltip/Tooltip.js","../src/components/MessageInput/hooks/messageInput.js","../src/components/MessageInput/EmojiPicker.js","../src/components/MessageInput/UploadsPreview.js","../src/components/MessageInput/icons.js","../src/components/MessageInput/MessageInputLarge.js","../src/components/MessageInput/MessageInput.js","../src/components/MessageInput/MessageInputFlat.js","../src/components/MessageInput/MessageInputSmall.js","../src/components/MessageInput/MessageInputSimple.js","../src/components/MessageInput/EditMessageForm.js","../src/components/Reactions/ReactionSelector.js","../src/components/Reactions/ReactionsList.js","../src/components/Reactions/SimpleReactionsList.js","../src/components/Message/hooks/useActionHandler.js","../src/components/Message/hooks/useBreakpoint.js","../src/components/Message/hooks/useDeleteHandler.js","../src/components/Message/hooks/useEditHandler.js","../src/components/Message/utils.js","../src/components/Message/hooks/useFlagHandler.js","../src/components/Message/hooks/useMentionsHandler.js","../src/components/Message/hooks/useMobilePress.js","../src/components/Message/hooks/useMuteHandler.js","../src/components/Message/hooks/useOpenThreadHandler.js","../src/components/Message/hooks/usePinHandler.js","../src/components/Message/hooks/useReactionHandler.js","../src/components/Message/hooks/useRetryHandler.js","../src/components/Message/hooks/useUserHandler.js","../src/components/Message/hooks/useUserRole.js","../src/components/MessageActions/MessageActionsBox.js","../src/components/MessageActions/MessageActions.js","../src/components/Message/MessageOptions.js","../src/components/Message/MessageText.js","../src/components/Message/MessageDeleted.js","../src/components/Message/MessageTimestamp.js","../src/components/Message/MessageSimple.js","../src/components/Message/Message.js","../src/components/Message/MessageCommerce.js","../src/components/Message/MessageLivestream.js","../src/components/Message/MessageTeam.js","../src/components/Message/FixedHeightMessage.js","../src/components/Channel/channelState.js","../src/components/Channel/hooks/useMentionsHandlers.js","../src/components/Channel/hooks/useEditMessageHandler.js","../src/components/Channel/hooks/useIsMounted.js","../src/components/Channel/Channel.js","../src/components/ChannelHeader/ChannelHeader.js","../src/assets/str-chat__connection-error.svg","../src/components/ChatDown/ChatDown.js","../src/assets/str-chat__icon-chevron-down.svg","../src/components/ChannelList/ChannelListTeam.js","../src/components/LoadMore/LoadMoreButton.js","../src/components/LoadMore/LoadMorePaginator.js","../src/components/EmptyStateIndicator/EmptyStateIndicator.js","../src/components/ChannelList/utils.js","../src/components/ChannelList/hooks/useMessageNewListener.js","../src/components/ChannelList/hooks/useNotificationMessageNewListener.js","../src/components/ChannelList/hooks/useNotificationAddedToChannelListener.js","../src/components/ChannelList/hooks/useNotificationRemovedFromChannelListener.js","../src/components/ChannelList/hooks/useChannelDeletedListener.js","../src/components/ChannelList/hooks/useChannelTruncatedListener.js","../src/components/ChannelList/hooks/useChannelUpdatedListener.js","../src/components/ChannelList/hooks/useChannelHiddenListener.js","../src/components/ChannelList/hooks/useChannelVisibleListener.js","../src/components/ChannelList/hooks/useConnectionRecoveredListener.js","../src/components/ChannelList/hooks/useUserPresenceChangedListener.js","../src/components/ChannelList/hooks/usePaginatedChannels.js","../src/components/ChannelList/hooks/useMobileNavigation.js","../src/components/ChannelList/ChannelList.js","../src/components/ChannelList/ChannelListMessenger.js","../src/components/ChannelSearch/ChannelSearch.js","../src/components/Chat/hooks/useChat.js","../src/components/Chat/Chat.js","../src/components/DateSeparator/DateSeparator.js","../src/components/EventComponent/EventComponent.js","../src/components/InfiniteScrollPaginator/InfiniteScroll.js","../src/components/InfiniteScrollPaginator/InfiniteScrollPaginator.js","../src/components/InfiniteScrollPaginator/ReverseInfiniteScroll.js","../src/components/MessageList/Center.js","../src/components/MessageList/MessageNotification.js","../src/components/MessageList/CustomNotification.js","../src/components/MessageList/ConnectionStatus.js","../src/components/MessageList/MessageListInner.js","../src/components/TypingIndicator/TypingIndicator.js","../src/components/MessageList/MessageList.js","../src/components/MessageList/hooks/useNewMessageNotification.js","../src/components/MessageList/hooks/usePrependMessagesCount.js","../src/components/MessageList/hooks/useShouldForceScrollToBottom.js","../src/components/MessageList/VirtualizedMessageList.js","../src/components/Thread/Thread.js","../src/components/Window/Window.js"],"sourcesContent":["// @ts-check\nimport React from 'react';\nimport { StreamChat } from 'stream-chat';\n\n/**\n * @typedef {import('types').ChatContextValue} ChatContextProps\n */\n\nexport const ChatContext = React.createContext(\n  /** @type {ChatContextProps} */ ({\n    client: new StreamChat(''),\n    setActiveChannel: () => null,\n  }),\n);\n\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChatContextProps>>}\n */\nexport function withChatContext(OriginalComponent) {\n  /** @param {Exclude<P, ChatContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChatContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </ChatContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","// @ts-check\n\nimport React from 'react';\n\n/**\n * @typedef {import('types').ChannelContextValue} ChannelContextProps\n */\n\nexport const ChannelContext = React.createContext(\n  /** @type {ChannelContextProps} */ ({}),\n);\n\n/**\n * @function\n * @template P\n * @param { React.ComponentType<P> } OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChannelContextProps>>}\n */\nexport function withChannelContext(OriginalComponent) {\n  /** @param {Exclude<P, ChannelContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChannelContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </ChannelContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","// @ts-check\n\nimport React from 'react';\nimport Dayjs from 'dayjs';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\n\nDayjs.extend(LocalizedFormat);\n\n/**\n * @typedef {Required<import('types').TranslationContextValue>} TranslationContextProps\n */\n\nexport const TranslationContext = React.createContext(\n  /** @type {TranslationContextProps} */ ({\n    t: /** @param {string} key */ (key) => key,\n    tDateTimeParser: (input) => Dayjs(input),\n  }),\n);\n\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, TranslationContextProps>>}\n */\nexport function withTranslationContext(OriginalComponent) {\n  /** @param {Exclude<P, TranslationContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <TranslationContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </TranslationContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","// @ts-check\n/* eslint-disable */\nimport emojiRegex from 'emoji-regex';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport React from 'react';\nimport * as linkify from 'linkifyjs';\nimport { Channel, StreamChat } from 'stream-chat';\n\n/** @type {(text: string | undefined) => boolean} */\nexport const isOnlyEmojis = (text) => {\n  if (!text) return false;\n\n  const noEmojis = text.replace(emojiRegex(), '');\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\n/** @type {(thing: any) => boolean} */\nexport const isPromise = (thing) => typeof thing?.then === 'function';\n\n/**\n * @typedef {{created_at: number}} Datelike\n * @type {(a: Datelike, b: Datelike) => number}\n **/\nexport const byDate = (a, b) => a.created_at - b.created_at;\n\n/** @type {import('react-markdown').NodeType[]} */\nconst allowedMarkups = [\n  'html',\n  // @ts-expect-error\n  'root',\n  'text',\n  'break',\n  'paragraph',\n  'emphasis',\n  'strong',\n  'link',\n  'list',\n  'listItem',\n  'code',\n  'inlineCode',\n  'blockquote',\n  'delete',\n];\n\n/** @type {(message: string) => (string|null)[]} */\nconst matchMarkdownLinks = (message) => {\n  const regexMdLinks = /\\[([^\\[]+)\\](\\(.*\\))/gm;\n  const matches = message.match(regexMdLinks);\n  const singleMatch = /\\[([^\\[]+)\\]\\((.*)\\)/;\n\n  const links = matches\n    ? matches.map((match) => {\n        const i = singleMatch.exec(match);\n        return i && i[2];\n      })\n    : [];\n  return links;\n};\n\n/** @type {(message: string) => (string|null)[]} */\nconst messageCodeBlocks = (message) => {\n  const codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  const matches = message.match(codeRegex);\n  return matches || [];\n};\n\n/** @type {(input: string, length: number) => string} */\nexport const truncate = (input, length, end = '...') => {\n  if (input.length > length) {\n    return `${input.substring(0, length - end.length)}${end}`;\n  }\n  return input;\n};\n\nconst markDownRenderers = {\n  /** @param {{ href: string | undefined; children: React.ReactElement; }} props   */\n  link: (props) => {\n    if (\n      !props.href ||\n      (!props.href.startsWith('http') && !props.href.startsWith('mailto:'))\n    ) {\n      return props.children;\n    }\n\n    return (\n      <a href={props.href} target=\"_blank\" rel=\"nofollow noreferrer noopener\">\n        {props.children}\n      </a>\n    );\n  },\n};\n\n/** @type {(input: string | undefined, mentioned_users: import('stream-chat').UserResponse[] | undefined) => React.ReactNode} */\nexport const renderText = (text, mentioned_users) => {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n\n  let newText = text;\n  let markdownLinks = matchMarkdownLinks(newText);\n  let codeBlocks = messageCodeBlocks(newText);\n  const detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\n\n  // extract all valid links/emails within text and replace it with proper markup\n  linkify.find(newText).forEach(({ type, href, value }) => {\n    const linkIsInBlock = codeBlocks.some((block) => block?.includes(value));\n\n    // check if message is already  markdown\n    const noParsingNeeded =\n      markdownLinks &&\n      markdownLinks.filter((text) => {\n        const strippedHref = href?.replace(detectHttp, '');\n        const strippedText = text?.replace(detectHttp, '');\n\n        if (!strippedHref || !strippedText) return false;\n\n        return (\n          strippedHref.includes(strippedText) ||\n          strippedText.includes(strippedHref)\n        );\n      });\n\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n\n    const displayLink =\n      type === 'email' ? value : truncate(value.replace(detectHttp, ''), 20);\n    newText = newText.replace(value, `[${displayLink}](${encodeURI(href)})`);\n  });\n\n  if (mentioned_users && mentioned_users.length) {\n    for (let i = 0; i < mentioned_users.length; i++) {\n      let username = mentioned_users[i].name || mentioned_users[i].id;\n      if (username) {\n        username = escapeRegExp(username);\n      }\n      const mkdown = `**@${username}**`;\n      const re = new RegExp(`@${username}`, 'g');\n      newText = newText.replace(re, mkdown);\n    }\n  }\n\n  return (\n    <ReactMarkdown\n      allowedTypes={allowedMarkups}\n      source={newText}\n      renderers={markDownRenderers}\n      escapeHtml={true}\n      unwrapDisallowed={true}\n      transformLinkUri={(uri) =>\n        uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri)\n      }\n    />\n  );\n};\n\n/** @param { string } text */\nfunction escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\n// @ts-expect-error\nexport const smartRender = (ElementOrComponentOrLiteral, props, fallback) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ElementOrComponentOrLiteral; // eslint-disable-line\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  /** @type {React.Component} */\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  // @ts-expect-error\n  return <ComponentOrLiteral {...props} />;\n};\n\n/**\n * @type { import('prop-types').Validator<any> }\n **/\nexport const checkChannelPropType = (propValue, _, componentName) => {\n  if (propValue?.constructor?.name !== Channel.name) {\n    return Error(\n      `Failed prop type: Invalid prop \\`channel\\` of type \\`${propValue.constructor.name}\\` supplied to \\`${componentName}\\`, expected instance of \\`${Channel.name}\\`.`,\n    );\n  }\n  return null;\n};\n\n/**\n * @type { import('prop-types').Validator<any> }\n **/\nexport const checkClientPropType = (propValue, _, componentName) => {\n  if (propValue?.constructor?.name !== StreamChat.name) {\n    return Error(\n      `Failed prop type: Invalid prop \\`client\\` of type \\`${propValue.constructor.name}\\` supplied to \\`${componentName}\\`, expected instance of \\`${StreamChat.name}\\`.`,\n    );\n  }\n  return null;\n};\n","/* eslint-disable */\nimport i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport {\n  enTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n} from './translations';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[आज] LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /रात|सुबह|दोपहर|शाम/,\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n  },\n  meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourd’hui à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugün saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[Сегодня, в] LT',\n    nextDay: '[Завтра, в] LT',\n    lastDay: '[Вчера, в] LT',\n  },\n});\n\nconst en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(\n    '_',\n  ),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n    '_',\n  ),\n};\n\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\nconst defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: (msg) => console.warn(msg),\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs,\n};\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback = () => null;\n  initialized = false;\n\n  t = null;\n  tDateTimeParser = null;\n  translations = {\n    en: { [defaultNS]: enTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n  };\n  /**\n   * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales = {};\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins ${error}`,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: { escapeValue: false },\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage(this.currentLanguage);\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        resources: this.translations,\n        lng: this.currentLanguage,\n      });\n      this.initialized = true;\n\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    } catch (e) {\n      this.logger(`Something went wrong with init:`, e);\n    }\n  }\n\n  localeExists = (language) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  /**\n   * Register translation\n   *\n   * @param {*} language\n   * @param {*} translation\n   * @param {*} customDayjsLocale\n   */\n  registerTranslation(language, translation, customDayjsLocale) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...{ ...en_locale, ...config } }, null, true);\n    }\n  }\n\n  /**\n   * Changes the language.\n   * @param {*} language\n   */\n  async setLanguage(language) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (e) {\n      this.logger(`Failed to set language:`, e);\n    }\n  }\n\n  /**\n   * @param {(t: import('i18next').TFunction) => void} callback\n   */\n  registerSetLanguageCallback(callback) {\n    this.setLanguageCallback = callback;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * AttachmentActions - The actions you can take on an attachment\n *\n * @example ../../docs/AttachmentActions.md\n * @type {React.FC<import('type').AttachmentActionsProps>}\n */\nconst AttachmentActions = ({ text, id, actions, actionHandler }) => (\n  <div className=\"str-chat__message-attachment-actions\">\n    <div className=\"str-chat__message-attachment-actions-form\">\n      <span key={0}>{text}</span>\n      {actions.map((action) => (\n        <button\n          className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\n          data-testid={`${action.name}`}\n          key={`${id}-${action.value}`}\n          data-value={action.value}\n          onClick={(e) => actionHandler(action.name, action.value, e)}\n        >\n          {action.text}\n        </button>\n      ))}\n    </div>\n  </div>\n);\n\nAttachmentActions.propTypes = {\n  /** Unique id for action button key. Key is generated by concatenating this id with action value - {`${id}-${action.value}`} */\n  id: PropTypes.string.isRequired,\n  /** The text for the form input */\n  text: PropTypes.string,\n  /** A list of actions */\n  actions: PropTypes.array.isRequired,\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func.isRequired,\n};\n\nexport default React.memo(AttachmentActions);\n","// @ts-check\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\n\nconst progressUpdateInterval = 500;\n/**\n * Audio attachment with play/pause button and progress bar\n * @param {import(\"types\").AudioProps} props\n */\nconst Audio = ({ og }) => {\n  const audioRef = useRef(/** @type {HTMLAudioElement | null} */ (null));\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const updateProgress = useCallback(() => {\n    if (audioRef.current !== null) {\n      const position = audioRef.current.currentTime;\n      const { duration } = audioRef.current;\n      const currentProgress = (100 / duration) * position;\n      setProgress(currentProgress);\n      if (position === duration) {\n        setIsPlaying(false);\n      }\n    }\n  }, [audioRef]);\n\n  useEffect(() => {\n    if (audioRef.current !== null) {\n      if (isPlaying) {\n        audioRef.current.play();\n        const interval = setInterval(updateProgress, progressUpdateInterval);\n        return () => clearInterval(interval);\n      }\n      audioRef.current.pause();\n    }\n    return () => {};\n  }, [isPlaying, updateProgress]);\n\n  const { asset_url, image_url, title, description, text } = og;\n\n  return (\n    <div className=\"str-chat__audio\">\n      <div className=\"str-chat__audio__wrapper\">\n        <audio ref={audioRef}>\n          <source src={asset_url} type=\"audio/mp3\" data-testid=\"audio-source\" />\n        </audio>\n        <div className=\"str-chat__audio__image\">\n          <div className=\"str-chat__audio__image--overlay\">\n            {!isPlaying ? (\n              <div\n                onClick={() => setIsPlaying(true)}\n                className=\"str-chat__audio__image--button\"\n                data-testid=\"play-audio\"\n              >\n                <svg\n                  width=\"40\"\n                  height=\"40\"\n                  viewBox=\"0 0 64 64\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </div>\n            ) : (\n              <div\n                onClick={() => setIsPlaying(false)}\n                className=\"str-chat__audio__image--button\"\n                data-testid=\"pause-audio\"\n              >\n                <svg\n                  width=\"40\"\n                  height=\"40\"\n                  viewBox=\"0 0 64 64\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </div>\n            )}\n          </div>\n          {image_url && <img src={image_url} alt={`${description}`} />}\n        </div>\n        <div className=\"str-chat__audio__content\">\n          <span className=\"str-chat__audio__content--title\">\n            <strong>{title}</strong>\n          </span>\n          <span className=\"str-chat__audio__content--subtitle\">{text}</span>\n          <div className=\"str-chat__audio__content--progress\">\n            <div\n              style={{ width: `${progress}%` }}\n              data-testid=\"audio-progress\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(Audio);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","// @ts-check\nimport React from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n * @type {React.FC<React.AnchorHTMLAttributes<HTMLAnchorElement>>}\n */\nconst SafeAnchor = ({ href, children, target, className }) => {\n  if (!href) return null;\n  const sanitized = sanitizeUrl(href);\n  return (\n    <a href={sanitized} target={target} className={className}>\n      {children}\n    </a>\n  );\n};\n\nexport default React.memo(SafeAnchor);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport giphyLogo from '../../assets/Poweredby_100px-White_VertText.png';\nimport { TranslationContext } from '../../context';\nimport { SafeAnchor } from '../SafeAnchor';\n\n/**\n * Card - Simple Card Layout\n *\n * @example ../../docs/Card.md\n * @typedef {import('types').CardProps} Props\n * @type React.FC<Props>\n */\nconst Card = ({\n  title,\n  title_link,\n  og_scrape_url,\n  image_url,\n  thumb_url,\n  text,\n  type,\n}) => {\n  const { t } = useContext(TranslationContext);\n  const image = thumb_url || image_url;\n\n  /** @type {(url?: string) => string | null} Typescript syntax */\n  const trimUrl = (url) => {\n    if (url !== undefined && url !== null) {\n      const [trimmedUrl] = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/');\n\n      return trimmedUrl;\n    }\n    return null;\n  };\n\n  if (!title && !title_link && !image) {\n    return (\n      <div\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n      >\n        <div className=\"str-chat__message-attachment-card--content\">\n          <div className=\"str-chat__message-attachment-card--text\">\n            {t('this content could not be displayed')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!title_link && !og_scrape_url) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n    >\n      {image && (\n        <div className=\"str-chat__message-attachment-card--header\">\n          <img src={image} alt={image} />\n        </div>\n      )}\n      <div className=\"str-chat__message-attachment-card--content\">\n        <div className=\"str-chat__message-attachment-card--flex\">\n          {title && (\n            <div className=\"str-chat__message-attachment-card--title\">\n              {title}\n            </div>\n          )}\n          {text && (\n            <div className=\"str-chat__message-attachment-card--text\">\n              {text}\n            </div>\n          )}\n          {(title_link || og_scrape_url) && (\n            <SafeAnchor\n              href={title_link || og_scrape_url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"str-chat__message-attachment-card--url\"\n            >\n              {trimUrl(title_link || og_scrape_url)}\n            </SafeAnchor>\n          )}\n        </div>\n        {type === 'giphy' && (\n          <img\n            className=\"str-chat__message-attachment-card__giphy-logo\"\n            data-testid=\"card-giphy\"\n            src={giphyLogo}\n            alt=\"giphy logo\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nCard.propTypes = {\n  /** Title returned by the OG scraper */\n  title: PropTypes.string,\n  /** Link returned by the OG scraper */\n  title_link: PropTypes.string,\n  /** The scraped url, used as a fallback if the OG-data doesn't include a link */\n  og_scrape_url: PropTypes.string,\n  /** The url of the full sized image */\n  image_url: PropTypes.string,\n  /** The url for thumbnail sized image */\n  thumb_url: PropTypes.string,\n  /** Description returned by the OG scraper */\n  text: PropTypes.string,\n};\n\nexport default React.memo(Card);\n","import React from 'react';\nimport { FileIcon } from 'react-file-utils';\nimport prettybytes from 'pretty-bytes';\nimport { SafeAnchor } from '../SafeAnchor';\n\n/** @type React.FC<import('types').FileAttachmentProps> */\nconst FileAttachment = ({ attachment }) => {\n  return (\n    <div\n      data-testid=\"attachment-file\"\n      className=\"str-chat__message-attachment-file--item\"\n    >\n      <FileIcon\n        mimeType={attachment.mime_type}\n        filename={attachment.title}\n        big={true}\n        size={30}\n      />\n      <div className=\"str-chat__message-attachment-file--item-text\">\n        <SafeAnchor href={attachment.asset_url} target=\"_blank\" download>\n          {attachment.title}\n        </SafeAnchor>\n        {attachment.file_size &&\n          Number.isFinite(Number(attachment.file_size)) && (\n            <span>{prettybytes(attachment.file_size)}</span>\n          )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(FileAttachment);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Modal - Custom Image component used in modal\n * @type {React.FC<import('types').ModalImageProps>}\n */\nconst ModalImage = ({ data }) => (\n  <div className=\"str-chat__modal-image__wrapper\" data-testid=\"modal-image\">\n    <img src={data.src} className=\"str-chat__modal-image__image\" />\n  </div>\n);\n\nModalImage.propTypes = {\n  data: PropTypes.shape({\n    src: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default ModalImage;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel, { Modal, ModalGateway } from 'react-images';\nimport ModalImage from './ModalImage';\n\n/**\n * ImageModal - Small modal component\n * @type { React.FC<import('types').ModalWrapperProps>}\n */\nconst ModalComponent = ({ images, toggleModal, index, modalIsOpen }) => (\n  <ModalGateway>\n    {modalIsOpen ? (\n      // @ts-expect-error\n      <Modal onClose={toggleModal}>\n        <Carousel\n          views={images}\n          currentIndex={index}\n          components={{\n            // @ts-expect-error\n            View: ModalImage,\n          }}\n        />\n      </Modal>\n    ) : null}\n  </ModalGateway>\n);\n\nModalComponent.propTypes = {\n  images: PropTypes.array.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  index: PropTypes.number,\n  modalIsOpen: PropTypes.bool.isRequired,\n};\n\nexport default ModalComponent;\n","// @ts-check\nimport React, { useState, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport ModalWrapper from './ModalWrapper';\n\n/**\n * Gallery - displays up to 4 images in a simple responsive grid with a lightbox to view the images.\n * @example ../../docs/Gallery.md\n * @typedef {import('types').GalleryProps} Props\n * @type React.FC<Props>\n */\nconst Gallery = ({ images }) => {\n  const [index, setIndex] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const { t } = useContext(TranslationContext);\n\n  /**\n   * @param {number} selectedIndex Index of image clicked\n   */\n  const toggleModal = (selectedIndex) => {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n\n  const formattedArray = useMemo(\n    () =>\n      images.map((image) => ({\n        src: image.image_url || image.thumb_url || '',\n        source: image.image_url || image.thumb_url || '',\n      })),\n    [images],\n  );\n\n  const renderImages = images.slice(0, 3).map((image, i) => (\n    <div\n      data-testid=\"gallery-image\"\n      className=\"str-chat__gallery-image\"\n      key={`gallery-image-${i}`}\n      onClick={() => toggleModal(i)}\n    >\n      <img src={image.image_url || image.thumb_url} />\n    </div>\n  ));\n\n  return (\n    <div\n      className={`str-chat__gallery ${\n        images.length > 3 ? 'str-chat__gallery--square' : ''\n      }`}\n    >\n      {renderImages}\n      {images.length > 3 && (\n        <div\n          className=\"str-chat__gallery-placeholder\"\n          style={{\n            backgroundImage: `url(${images[3].image_url})`,\n          }}\n          onClick={() => toggleModal(3)}\n        >\n          <p>\n            {t('{{ imageCount }} more', {\n              imageCount: images.length - 3,\n            })}\n          </p>\n        </div>\n      )}\n      <ModalWrapper\n        images={formattedArray}\n        index={index}\n        // @ts-expect-error\n        toggleModal={toggleModal}\n        modalIsOpen={modalOpen}\n      />\n    </div>\n  );\n};\n\nGallery.propTypes = {\n  images: /** @type { PropTypes.Validator<import('types').GalleryProps['images']> } */ (PropTypes.arrayOf(\n    PropTypes.object.isRequired,\n  ).isRequired),\n};\n\nexport default React.memo(Gallery);\n","/* eslint-disable */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ModalWrapper from './ModalWrapper';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * Image - Small wrapper around an image tag, supports thumbnails\n *\n * @example ../../docs/Image.md\n * @extends {React.PureComponent<import('type').ImageProps>}\n */\nclass ImageComponent extends React.PureComponent {\n  static propTypes = {\n    /** The full size image url */\n    image_url: PropTypes.string,\n    /** The thumb url */\n    thumb_url: PropTypes.string,\n    /** The text fallback for the image */\n    fallback: PropTypes.string,\n  };\n  state = {\n    modalIsOpen: false,\n    currentIndex: 0,\n  };\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      modalIsOpen: !state.modalIsOpen,\n    }));\n  };\n\n  render() {\n    const { image_url, thumb_url, fallback } = this.props;\n    const imageSrc = sanitizeUrl(image_url || thumb_url);\n    const formattedArray = [{ src: imageSrc }];\n    return (\n      <React.Fragment>\n        <img\n          className=\"str-chat__message-attachment--img\"\n          onClick={this.toggleModal}\n          src={imageSrc}\n          alt={fallback}\n          data-testid=\"image-test\"\n        />\n\n        <ModalWrapper\n          images={formattedArray}\n          toggleModal={this.toggleModal}\n          index={this.state.currentIndex}\n          modalIsOpen={this.state.modalIsOpen}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ImageComponent;\n","// @ts-check\n\nimport React from 'react';\nimport DefaultMedia from 'react-player';\nimport PropTypes from 'prop-types';\n\nimport DefaultAttachmentActions from './AttachmentActions';\n\nimport DefaultAudio from './Audio';\nimport DefaultCard from './Card';\nimport DefaultFile from './FileAttachment';\n\nimport {\n  ImageComponent as DefaultImage,\n  Gallery as DefaultGallery,\n} from '../Gallery';\n\nexport const SUPPORTED_VIDEO_FORMATS = [\n  'video/mp4',\n  'video/ogg',\n  'video/webm',\n  'video/quicktime',\n];\n\n/**\n * @typedef {import('types').ExtendedAttachment} ExtendedAttachment\n * @typedef {Required<Pick<import('types').InnerAttachmentUIComponentProps, 'Card' | 'File' | 'Gallery' |'Image' | 'Audio' | 'Media' | 'AttachmentActions'>>} DefaultProps\n * @typedef {Omit<import('types').InnerAttachmentUIComponentProps, 'Card' | 'File' | 'Image'| 'Gallery' | 'Audio' | 'Media' | 'AttachmentActions'> & DefaultProps} AttachmentProps\n */\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isGalleryAttachment = (a) => {\n  return a.type === 'gallery';\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isImageAttachment = (a) => {\n  return a.type === 'image' && !a.title_link && !a.og_scrape_url;\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isMediaAttachment = (a) => {\n  return (\n    (a.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) !== -1) ||\n    a.type === 'video'\n  );\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isAudioAttachment = (a) => {\n  return a.type === 'audio';\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isFileAttachment = (a) => {\n  return (\n    a.type === 'file' ||\n    (a.mime_type &&\n      SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) === -1 &&\n      a.type !== 'video')\n  );\n};\n\n/**\n * @param {React.ReactNode} children\n * @param {ExtendedAttachment} attachment\n * @param {string} componentType\n */\nexport const renderAttachmentWithinContainer = (\n  children,\n  attachment,\n  componentType,\n) => {\n  let extra =\n    attachment && attachment.actions && attachment.actions.length\n      ? 'actions'\n      : '';\n  if (\n    componentType === 'card' &&\n    !attachment.image_url &&\n    !attachment.thumb_url\n  ) {\n    extra = 'no-image';\n  }\n\n  return (\n    <div\n      className={`str-chat__message-attachment str-chat__message-attachment--${componentType} str-chat__message-attachment--${attachment.type} str-chat__message-attachment--${componentType}--${extra}`}\n      key={`${attachment?.id}-${attachment.type || 'none'} `}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderAttachmentActions = (props) => {\n  const { attachment: a, AttachmentActions, actionHandler } = props;\n  if (!a.actions || !a.actions.length) {\n    return null;\n  }\n\n  return (\n    <AttachmentActions\n      {...a}\n      id={a.id || ''}\n      actions={a.actions || []}\n      text={a.text || ''}\n      key={`key-actions-${a.id}`}\n      actionHandler={actionHandler}\n    />\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderGallery = (props) => {\n  const { attachment: a, Gallery } = props;\n  return renderAttachmentWithinContainer(\n    <Gallery images={a.images || []} key=\"gallery\" />,\n    a,\n    'gallery',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderImage = (props) => {\n  const { attachment: a, Image } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n        <Image {...a} />\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'image',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <Image {...a} key={`key-image-${a.id}`} />,\n    a,\n    'image',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderCard = (props) => {\n  const { attachment: a, Card } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n        <Card {...a} key={`key-card-${a.id}`} />\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'card',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <Card {...a} key={`key-card-${a.id}`} />,\n    a,\n    'card',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderFile = (props) => {\n  const { attachment: a, File } = props;\n  if (!a.asset_url) return null;\n\n  return renderAttachmentWithinContainer(\n    <File attachment={a} key={`key-file-${a.id}`} />,\n    a,\n    'file',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderAudio = (props) => {\n  const { attachment: a, Audio } = props;\n  return renderAttachmentWithinContainer(\n    <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\n      <Audio og={a} />\n    </div>,\n    a,\n    'audio',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderMedia = (props) => {\n  const { attachment: a, Media } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div\n        className=\"str-chat__attachment str-chat__attachment-media\"\n        key={`key-video-${a.id}`}\n      >\n        <div className=\"str-chat__player-wrapper\">\n          <Media\n            className=\"react-player\"\n            url={a.asset_url}\n            width=\"100%\"\n            height=\"100%\"\n            controls\n          />\n        </div>\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'media',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <div className=\"str-chat__player-wrapper\" key={`key-video-${a.id}`}>\n      <Media\n        className=\"react-player\"\n        url={a.asset_url}\n        width=\"100%\"\n        height=\"100%\"\n        controls\n      />\n    </div>,\n    a,\n    'media',\n  );\n};\n\n/**\n * Attachment - The message attachment\n *\n * @example ../../docs/Attachment.md\n * @type { React.FC<import('types').WrapperAttachmentUIComponentProps> }\n */\nconst Attachment = ({\n  attachments,\n  Card = DefaultCard,\n  Image = DefaultImage,\n  Gallery = DefaultGallery,\n  Audio = DefaultAudio,\n  File = DefaultFile,\n  Media = DefaultMedia,\n  AttachmentActions = DefaultAttachmentActions,\n  ...rest\n}) => {\n  const gallery = {\n    type: 'gallery',\n    images: attachments.filter(\n      /** @param {import('types').ExtendedAttachment} a */ (a) =>\n        a.type === 'image' && !(a.og_scrape_url || a.title_link),\n    ),\n  };\n  let newAttachments;\n  if (gallery.images?.length >= 2) {\n    newAttachments = [\n      ...attachments.filter(\n        /** @param {import('types').ExtendedAttachment} a */ (a) =>\n          !(a.type === 'image' && !(a.og_scrape_url || a.title_link)),\n      ),\n      gallery,\n    ];\n  } else {\n    newAttachments = attachments;\n  }\n\n  const propsWithDefault = {\n    Card,\n    Image,\n    Audio,\n    File,\n    Media,\n    Gallery,\n    AttachmentActions,\n    attachments: newAttachments,\n    ...rest,\n  };\n\n  return (\n    <>\n      {newAttachments?.map(\n        /** @param {any} attachment */ (attachment) => {\n          if (isGalleryAttachment(attachment)) {\n            return renderGallery({ ...propsWithDefault, attachment });\n          }\n\n          if (isImageAttachment(attachment)) {\n            return renderImage({ ...propsWithDefault, attachment });\n          }\n\n          if (isFileAttachment(attachment)) {\n            return renderFile({ ...propsWithDefault, attachment });\n          }\n\n          if (isAudioAttachment(attachment)) {\n            return renderAudio({ ...propsWithDefault, attachment });\n          }\n\n          if (isMediaAttachment(attachment)) {\n            return renderMedia({ ...propsWithDefault, attachment });\n          }\n\n          return renderCard({ ...propsWithDefault, attachment });\n        },\n      )}\n    </>\n  );\n};\n\nAttachment.propTypes = {\n  /**\n   * The attachment to render\n   * @see See [Attachment structure](https://getstream.io/chat/docs/#message_format)\n   *\n   *  */\n  attachments: /** @type {PropTypes.Validator<ExtendedAttachment[]>} */ (PropTypes\n    .array.isRequired),\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func,\n  /**\n   * Custom UI component for card type attachment\n   * Defaults to [Card](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Card.js)\n   */\n  Card: /** @type {PropTypes.Validator<React.ComponentType<import('types').CardProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file type attachment\n   * Defaults to [File](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/File.js)\n   */\n  File: /** @type {PropTypes.Validator<React.ComponentType<import('types').FileAttachmentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for attachment actions\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/AttachmentActions.js)\n   */\n  Gallery: /** @type {PropTypes.Validator<React.ComponentType<import('types').GalleryProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for image type attachment\n   * Defaults to [Image](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Gallery/Image.js)\n   */\n  Image: /** @type {PropTypes.Validator<React.ComponentType<import('types').ImageProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for audio type attachment\n   * Defaults to [Audio](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Audio.js)\n   */\n  Audio: /** @type {PropTypes.Validator<React.ComponentType<import('types').AudioProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for media type attachment\n   * Defaults to [ReactPlayer](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/ReactPlayer.js)\n   */\n  Media: /** @type {PropTypes.Validator<React.ComponentType<import('react-player').ReactPlayerProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for attachment actions\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/AttachmentActions.js)\n   */\n  AttachmentActions: /** @type {PropTypes.Validator<React.ComponentType<import('types').AttachmentActionsProps>>} */ (PropTypes.elementType),\n};\n\nexport default Attachment;\n","/* eslint-disable */\nexport const KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32,\n};\n\n// This is self-made key shortcuts manager, used for caching key strokes\nclass Listener {\n  constructor() {\n    this.index = 0;\n    this.listeners = {};\n    this.refCount = 0;\n\n    this.f = (e) => {\n      const code = e.keyCode || e.which;\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\n        if (keyCode.includes(code)) fn(e);\n      });\n    };\n  }\n\n  startListen = () => {\n    if (!this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', this.f);\n    }\n    this.refCount++;\n  };\n\n  stopListen = () => {\n    this.refCount--;\n    if (!this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', this.f);\n    }\n  };\n\n  add = (keyCodes, fn) => {\n    let keyCode = keyCodes;\n\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n\n    this.listeners[this.index] = {\n      keyCode,\n      fn,\n    };\n\n    this.index += 1;\n\n    return this.index;\n  };\n\n  remove = (id) => {\n    delete this.listeners[id];\n  };\n\n  removeAll = () => {\n    this.listeners = {};\n    this.index = 0;\n  };\n}\n\nexport default new Listener();\n","import React from 'react';\n\n// eslint-disable-next-line react/display-name\nconst Item = React.forwardRef((props, innerRef) => {\n  const {\n    className,\n    component: Component,\n    item,\n    onClickHandler,\n    onSelectHandler,\n    selected,\n    style,\n  } = props;\n\n  const selectItem = () => onSelectHandler(item);\n\n  return (\n    <li className={`rta__item ${className || ''}`} style={style}>\n      <div\n        className={`rta__entity ${selected ? 'rta__entity--selected' : ''}`}\n        onClick={onClickHandler}\n        onFocus={selectItem}\n        onMouseEnter={selectItem}\n        ref={innerRef}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <Component selected={selected} entity={item} />\n      </div>\n    </li>\n  );\n});\n\nexport default Item;\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { TranslationContext } from '../../context/TranslationContext';\n\nimport Item from './Item';\nimport { KEY_CODES } from './listener';\n\nconst List = (props) => {\n  const {\n    className,\n    component,\n    dropdownScroll,\n    getSelectedItem,\n    getTextToReplace,\n    itemClassName,\n    itemStyle,\n    onSelect,\n    style,\n    value: propValue,\n    values,\n  } = props;\n\n  const { t } = useContext(TranslationContext);\n\n  const [selectedItem, setSelectedItem] = useState(undefined);\n\n  const itemsRef = {};\n\n  const isSelected = (item) => selectedItem === values.indexOf(item);\n\n  const getId = (item) => {\n    const textToReplace = getTextToReplace(item);\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  const modifyText = (value) => {\n    if (!value) return;\n\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) getSelectedItem(value);\n  };\n\n  const handleClick = (e) => {\n    if (e) e.preventDefault?.();\n    modifyText(values[selectedItem]);\n  };\n\n  const selectItem = (item, keyboard = false) => {\n    setSelectedItem(values.indexOf(item));\n    if (keyboard) dropdownScroll(itemsRef[getId(item)]);\n  };\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (event.which === KEY_CODES.UP) {\n        setSelectedItem((prevSelected) => {\n          if (prevSelected === undefined) return 0;\n          return prevSelected === 0 ? values.length - 1 : prevSelected - 1;\n        });\n      }\n\n      if (event.which === KEY_CODES.DOWN) {\n        setSelectedItem((prevSelected) => {\n          if (prevSelected === undefined) return 0;\n          return prevSelected === values.length - 1 ? 0 : prevSelected + 1;\n        });\n      }\n\n      if (\n        (event.which === KEY_CODES.ENTER || event.which === KEY_CODES.TAB) &&\n        selectedItem !== undefined\n      ) {\n        handleClick(event);\n        return setSelectedItem(undefined);\n      }\n\n      return null;\n    },\n    [selectedItem, values], // eslint-disable-line\n  );\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n\n  useEffect(() => {\n    if (values?.length) selectItem(values[0]);\n  }, [values]); // eslint-disable-line\n\n  const renderHeader = (value) => {\n    if (value[0] === '/') {\n      const html = `<strong>${value.replace('/', '')}</strong>`;\n      return `${t('Commands matching')} ${html}`;\n    }\n\n    if (value[0] === ':') {\n      const html = `<strong>${value.replace(':', '')}</strong>`;\n      return `${t('Emoji matching')} ${html}`;\n    }\n\n    if (value[0] === '@') {\n      const html = `<strong>${value.replace('@', '')}</strong>`;\n      return `${t('People matching')} ${html}`;\n    }\n\n    return null;\n  };\n\n  return (\n    <ul className={`rta__list ${className || ''}`} style={style}>\n      <li\n        className=\"rta__list-header\"\n        dangerouslySetInnerHTML={{\n          __html: renderHeader(propValue),\n        }}\n      />\n      {values.map((item) => (\n        <Item\n          className={itemClassName}\n          component={component}\n          item={item}\n          key={getId(item)}\n          onClickHandler={handleClick}\n          onSelectHandler={selectItem}\n          ref={(ref) => {\n            itemsRef[getId(item)] = ref;\n          }}\n          selected={isSelected(item)}\n          style={itemStyle}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default List;\n","import { isValidElementType } from 'react-is';\n\nexport const DEFAULT_CARET_POSITION = 'next';\n\nexport function defaultScrollToItem(container, item) {\n  if (!item) return;\n\n  const itemHeight = parseInt(\n    getComputedStyle(item).getPropertyValue('height'),\n    10,\n  );\n\n  const containerHight =\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\n    itemHeight;\n\n  const actualScrollTop = container.scrollTop;\n  const itemOffsetTop = item.offsetTop;\n\n  if (\n    itemOffsetTop < actualScrollTop + containerHight &&\n    actualScrollTop < itemOffsetTop\n  ) {\n    return;\n  }\n\n  // eslint-disable-next-line\n  container.scrollTop = itemOffsetTop;\n}\n\nexport const errorMessage = (message) =>\n  console.error(\n    `RTA: dataProvider fails: ${message}\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\n  );\n\nexport const triggerPropsCheck = ({ trigger }) => {\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n\n  const triggers = Object.entries(trigger);\n\n  for (let i = 0; i < triggers.length; i += 1) {\n    const [triggerChar, settings] = triggers[i];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error(\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\n      );\n    }\n\n    // $FlowFixMe\n    const triggerSetting = settings;\n\n    const { component, dataProvider, output, callback } = triggerSetting;\n\n    if (!isValidElementType(component)) {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n  }\n\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport DefaultSuggestionList from './List';\nimport {\n  DEFAULT_CARET_POSITION,\n  defaultScrollToItem,\n  errorMessage,\n  triggerPropsCheck,\n} from './utils';\n\nclass ReactTextareaAutocomplete extends React.Component {\n  static defaultProps = {\n    closeOnClickOutside: true,\n    maxRows: 10,\n    minChar: 1,\n    movePopupAsYouType: false,\n    scrollToItem: true,\n    value: '',\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { loadingComponent, trigger, value } = this.props;\n\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    this.state = {\n      actualToken: '',\n      component: null,\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      listenerIndex: 0,\n      selectionEnd: 0,\n      selectionStart: 0,\n      value: value || '',\n      top: null,\n    };\n  }\n\n  componentDidMount() {\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\n\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\n      this._onEnter(e),\n    );\n\n    this.setState({\n      listenerIndex,\n    });\n\n    Listeners.startListen();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this._update(nextProps);\n  }\n\n  componentWillUnmount() {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  }\n\n  getSelectionPosition = () => {\n    if (!this.textareaRef) return null;\n\n    return {\n      selectionStart: this.textareaRef.selectionStart,\n      selectionEnd: this.textareaRef.selectionEnd,\n    };\n  };\n\n  getSelectedText = () => {\n    if (!this.textareaRef) return null;\n    const { selectionStart, selectionEnd } = this.textareaRef;\n\n    if (selectionStart === selectionEnd) return null;\n\n    return this.state.value.substr(\n      selectionStart,\n      selectionEnd - selectionStart,\n    );\n  };\n\n  setCaretPosition = (position = 0) => {\n    if (!this.textareaRef) return;\n\n    this.textareaRef.focus();\n    this.textareaRef.setSelectionRange(position, position);\n  };\n\n  getCaretPosition = () => {\n    if (!this.textareaRef) return 0;\n\n    return this.textareaRef.selectionEnd;\n  };\n\n  _onEnter = (event) => {\n    if (!this.textareaRef) return;\n\n    const trigger = this.state.currentTrigger;\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't submit if the element has focus or the shift key is pressed\n    if (!hasFocus || event.shiftKey === true) return;\n\n    if (!trigger || !this.state.data) {\n      // trigger a submit\n      this._replaceWord();\n      if (this.textareaRef) {\n        this.textareaRef.selectionEnd = 0;\n      }\n      this.props.handleSubmit(event);\n    }\n  };\n\n  _onSpace = () => {\n    if (!this.props.replaceWord || !this.textareaRef) return;\n\n    // don't change characters if the element doesn't have focus\n    const hasFocus = this.textareaRef.matches(':focus');\n    if (!hasFocus) return;\n\n    this._replaceWord();\n  };\n\n  _replaceWord = () => {\n    const { value } = this.state;\n\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\n    const lastWord = match && match[1];\n\n    if (!lastWord) return;\n\n    const spaces = match[2];\n\n    const newWord = this.props.replaceWord(lastWord);\n    if (newWord == null) return;\n\n    const textBeforeWord = value.slice(\n      0,\n      this.getCaretPosition() - match[0].length,\n    );\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\n\n    this.setState(\n      {\n        value: newText,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (this.props.onChange) this.props.onChange(e);\n      },\n    );\n  };\n\n  _onSelect = (newToken) => {\n    const { onChange } = this.props;\n    const { currentTrigger, selectionEnd, value: textareaValue } = this.state;\n\n    if (!currentTrigger) return;\n\n    const computeCaretPosition = (position, token, startToken) => {\n      switch (position) {\n        case 'start':\n          return startToken;\n        case 'next':\n        case 'end':\n          return startToken + token.length;\n        default:\n          if (!Number.isInteger(position)) {\n            throw new Error(\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\n            );\n          }\n\n          return position;\n      }\n    };\n\n    const textToModify = textareaValue.slice(0, selectionEnd);\n\n    const startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(`\\\\${currentTrigger}${`[^\\\\${currentTrigger}${'\\\\s'}]`}*$`),\n    );\n\n    // we add space after emoji is selected if a caret position is next\n    const newTokenString =\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\n\n    const newCaretPosition = computeCaretPosition(\n      newToken.caretPosition,\n      newTokenString,\n      startOfTokenPosition,\n    );\n\n    const modifiedText =\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\n\n    // set the new textarea value and after that set the caret back to its position\n    this.setState(\n      {\n        value: textareaValue.replace(textToModify, modifiedText),\n        dataLoading: false,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n\n        this.setCaretPosition(newCaretPosition);\n      },\n    );\n    this._closeAutocomplete();\n  };\n\n  _getItemOnSelect = () => {\n    const { currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { callback } = triggerSettings;\n\n    if (!callback) return null;\n\n    return (item) => {\n      if (typeof callback !== 'function') {\n        throw new Error(\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n      if (callback) {\n        return callback(item, currentTrigger);\n      }\n      return null;\n    };\n  };\n\n  _getTextToReplace = () => {\n    const { actualToken, currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { output } = triggerSettings;\n\n    return (item) => {\n      if (\n        typeof item === 'object' &&\n        (!output || typeof output !== 'function')\n      ) {\n        throw new Error(\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n\n      if (output) {\n        const textToReplace = output(item, currentTrigger);\n\n        if (!textToReplace || typeof textToReplace === 'number') {\n          throw new Error(\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\n              textToReplace,\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\n          );\n        }\n\n        if (typeof textToReplace === 'string') {\n          return {\n            text: textToReplace,\n            caretPosition: DEFAULT_CARET_POSITION,\n          };\n        }\n\n        if (!textToReplace.text) {\n          throw new Error(\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        if (!textToReplace.caretPosition) {\n          throw new Error(\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        return textToReplace;\n      }\n\n      if (typeof item !== 'string') {\n        throw new Error('Output item should be string\\n');\n      }\n\n      return {\n        caretPosition: DEFAULT_CARET_POSITION,\n        text: `${currentTrigger}${item}${currentTrigger}`,\n      };\n    };\n  };\n\n  _getCurrentTriggerSettings = () => {\n    const { currentTrigger } = this.state;\n\n    if (!currentTrigger) return null;\n\n    return this.props.trigger[currentTrigger];\n  };\n\n  _getValuesFromProvider = () => {\n    const { actualToken, currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return;\n\n    const { dataProvider, component } = triggerSettings;\n\n    if (typeof dataProvider !== 'function') {\n      throw new Error('Trigger provider has to be a function!');\n    }\n\n    this.setState({ dataLoading: true });\n\n    // Modified: send the full text to support / style commands\n    dataProvider(actualToken, this.state.value, (data, token) => {\n      // Make sure that the result is still relevant for current query\n      if (token !== this.state.actualToken) return;\n\n      if (!Array.isArray(data)) {\n        throw new Error('Trigger provider has to provide an array!');\n      }\n\n      if (!isValidElementType(component)) {\n        throw new Error('Component should be defined!');\n      }\n\n      // throw away if we resolved old trigger\n      if (currentTrigger !== this.state.currentTrigger) return;\n\n      // if we haven't resolved any data let's close the autocomplete\n      if (!data.length) {\n        this._closeAutocomplete();\n        return;\n      }\n\n      this.setState({\n        component,\n        data,\n        dataLoading: false,\n      });\n    });\n  };\n\n  _getSuggestions = () => {\n    const { currentTrigger, data } = this.state;\n\n    if (!currentTrigger || !data || (data && !data.length)) return null;\n\n    return data;\n  };\n\n  _createRegExp = () => {\n    const { trigger } = this.props;\n\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n    // https://stackoverflow.com/a/8057827/2719917\n    this.tokenRegExp = new RegExp(\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\n    );\n  };\n\n  // TODO: This is an anti pattern in react, should come up with a better way\n  _update({ value, trigger }) {\n    const { value: oldValue } = this.state;\n    const { trigger: oldTrigger } = this.props;\n\n    if (value !== oldValue || !oldValue) this.setState({ value });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  }\n\n  /**\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\n   */\n  _closeAutocomplete = () => {\n    this.setState({\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      top: null,\n    });\n  };\n\n  _cleanUpProps = () => {\n    const props = { ...this.props };\n    const notSafe = [\n      'additionalTextareaProps',\n      'className',\n      'closeOnClickOutside',\n      'containerClassName',\n      'containerStyle',\n      'disableMentions',\n      'dropdownClassName',\n      'dropdownStyle',\n      'grow',\n      'handleSubmit',\n      'innerRef',\n      'itemClassName',\n      'itemStyle',\n      'listClassName',\n      'listStyle',\n      'loaderClassName',\n      'loaderStyle',\n      'loadingComponent',\n      'minChar',\n      'movePopupAsYouType',\n      'onCaretPositionChange',\n      'onChange',\n      'ref',\n      'replaceWord',\n      'scrollToItem',\n      'SuggestionList',\n      'trigger',\n      'value',\n    ];\n\n    // eslint-disable-next-line\n    for (const prop in props) {\n      if (notSafe.includes(prop)) delete props[prop];\n    }\n\n    return props;\n  };\n\n  _isCommand = (text) => {\n    if (text[0] !== '/') return false;\n\n    const tokens = text.split(' ');\n\n    if (tokens.length > 1) return false;\n\n    return true;\n  };\n\n  _changeHandler = (e) => {\n    const {\n      minChar,\n      movePopupAsYouType,\n      onCaretPositionChange,\n      onChange,\n      trigger,\n    } = this.props;\n    const { left, top } = this.state;\n\n    const textarea = e.target;\n    const { selectionEnd, selectionStart, value } = textarea;\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (onCaretPositionChange) onCaretPositionChange(this.getCaretPosition());\n\n    this.setState({ value });\n\n    let currentTrigger;\n    let lastToken;\n\n    if (this._isCommand(value)) {\n      currentTrigger = '/';\n      lastToken = value;\n    } else {\n      const tokenMatch = value\n        .slice(0, selectionEnd)\n        .match(/(?!^|\\W)?[:@][^\\s]*\\s?[^\\s]*$/g);\n\n      lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n\n      currentTrigger =\n        (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\n        null;\n    }\n\n    /*\n     if we lost the trigger token or there is no following character we want to close\n     the autocomplete\n    */\n    if (!lastToken || lastToken.length <= minChar) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    const actualToken = lastToken.slice(1);\n\n    // if trigger is not configured step out from the function, otherwise proceed\n    if (!currentTrigger) return;\n\n    if (\n      movePopupAsYouType ||\n      (top === null && left === null) ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1\n    ) {\n      const { top: newTop, left: newLeft } = getCaretCoordinates(\n        textarea,\n        selectionEnd,\n      );\n\n      this.setState({\n        // make position relative to textarea\n        left: newLeft,\n        top: newTop - this.textareaRef.scrollTop || 0,\n      });\n    }\n\n    this.setState(\n      {\n        actualToken,\n        currentTrigger,\n        selectionEnd,\n        selectionStart,\n      },\n      () => {\n        try {\n          this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      },\n    );\n  };\n\n  _selectHandler = (e) => {\n    const { onCaretPositionChange, onSelect } = this.props;\n\n    if (onCaretPositionChange) onCaretPositionChange(this.getCaretPosition());\n\n    if (onSelect) {\n      e.persist();\n      onSelect(e);\n    }\n  };\n\n  // The textarea itself is outside the auto-select dropdown.\n  _onClickAndBlurHandler = (e) => {\n    const { closeOnClickOutside, onBlur } = this.props;\n\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n    // that was actually clicked. If we clicked inside the auto-select dropdown, then\n    // that's not a blur, from the auto-select point of view, so then do nothing.\n    const el = e.relatedTarget;\n    if (\n      this.dropdownRef &&\n      el instanceof Node &&\n      this.dropdownRef.contains(el)\n    ) {\n      return;\n    }\n\n    if (closeOnClickOutside) this._closeAutocomplete();\n\n    if (onBlur) {\n      e.persist();\n      onBlur(e);\n    }\n  };\n\n  _onScrollHandler = () => this._closeAutocomplete();\n\n  _dropdownScroll = (item) => {\n    const { scrollToItem } = this.props;\n\n    if (!scrollToItem) return;\n\n    if (scrollToItem === true) {\n      defaultScrollToItem(this.dropdownRef, item);\n      return;\n    }\n\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n      throw new Error(\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\n      );\n    }\n\n    scrollToItem(this.dropdownRef, item);\n  };\n\n  render() {\n    const {\n      className,\n      containerClassName,\n      containerStyle,\n      disableMentions,\n      dropdownClassName,\n      dropdownStyle,\n      itemClassName,\n      itemStyle,\n      listClassName,\n      style,\n      SuggestionList = DefaultSuggestionList,\n    } = this.props;\n\n    let { maxRows } = this.props;\n\n    const { component, currentTrigger, dataLoading, value } = this.state;\n\n    const selectedItem = this._getItemOnSelect();\n    const suggestionData = this._getSuggestions();\n    const textToReplace = this._getTextToReplace();\n\n    const SuggestionListContainer = () => {\n      if (\n        (dataLoading || suggestionData) &&\n        currentTrigger &&\n        !(disableMentions && currentTrigger === '@')\n      ) {\n        return (\n          <div\n            className={`rta__autocomplete ${dropdownClassName || ''}`}\n            ref={(ref) => {\n              this.dropdownRef = ref;\n            }}\n            style={dropdownStyle}\n          >\n            {component && suggestionData && textToReplace && (\n              <SuggestionList\n                className={listClassName}\n                component={component}\n                dropdownScroll={this._dropdownScroll}\n                getSelectedItem={selectedItem}\n                getTextToReplace={textToReplace}\n                itemClassName={itemClassName}\n                itemStyle={itemStyle}\n                onSelect={this._onSelect}\n                value={value}\n                values={suggestionData}\n              />\n            )}\n          </div>\n        );\n      }\n      return null;\n    };\n\n    if (!this.props.grow) maxRows = 1;\n\n    return (\n      <div\n        className={`rta ${dataLoading === true ? 'rta--loading' : ''} ${\n          containerClassName || ''\n        }`}\n        style={containerStyle}\n      >\n        <SuggestionListContainer />\n        <Textarea\n          {...this._cleanUpProps()}\n          className={`rta__textarea ${className || ''}`}\n          maxRows={maxRows}\n          onBlur={this._onClickAndBlurHandler}\n          onChange={this._changeHandler}\n          onClick={this._onClickAndBlurHandler}\n          onFocus={this.props.onFocus}\n          onScroll={this._onScrollHandler}\n          onSelect={this._selectHandler}\n          ref={(ref) => {\n            if (this.props.innerRef) this.props.innerRef(ref);\n            this.textareaRef = ref;\n          }}\n          style={style}\n          value={value}\n          {...this.props.additionalTextareaProps}\n        />\n      </div>\n    );\n  }\n}\n\nReactTextareaAutocomplete.propTypes = {\n  className: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  containerClassName: PropTypes.string,\n  containerStyle: PropTypes.object,\n  disableMentions: PropTypes.bool,\n  dropdownClassName: PropTypes.string,\n  dropdownStyle: PropTypes.object,\n  itemClassName: PropTypes.string,\n  itemStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  listStyle: PropTypes.object,\n  loaderClassName: PropTypes.string,\n  loaderStyle: PropTypes.object,\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  style: PropTypes.object,\n  SuggestionList: PropTypes.elementType,\n  trigger: triggerPropsCheck,\n  value: PropTypes.string,\n};\n\nexport default ReactTextareaAutocomplete;\n","// @ts-check\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Avatar - A round avatar image with fallback to username's first letter\n *\n * @example ../../docs/Avatar.md\n * @typedef {import('types').AvatarProps} Props\n * @type { React.FC<Props>}\n */\nconst Avatar = ({\n  size = 32,\n  name,\n  shape = 'circle',\n  image,\n  onClick = () => {},\n  onMouseOver = () => {},\n}) => {\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    setLoaded(false);\n    setError(false);\n  }, [image]);\n\n  const initials = (name || '').charAt(0);\n\n  const clickableClass = onClick ? 'str-chat__avatar--clickable' : '';\n\n  return (\n    <div\n      data-testid=\"avatar\"\n      className={`str-chat__avatar str-chat__avatar--${shape} ${clickableClass}`}\n      title={name}\n      style={{\n        width: `${size}px`,\n        height: `${size}px`,\n        flexBasis: `${size}px`,\n        lineHeight: `${size}px`,\n        fontSize: `${size / 2}px`,\n      }}\n      onClick={onClick}\n      onMouseOver={onMouseOver}\n    >\n      {image && !error ? (\n        <img\n          data-testid=\"avatar-img\"\n          src={image}\n          alt={initials}\n          className={`str-chat__avatar-image${\n            loaded ? ' str-chat__avatar-image--loaded' : ''\n          }`}\n          style={{\n            width: `${size}px`,\n            height: `${size}px`,\n            flexBasis: `${size}px`,\n            objectFit: 'cover',\n          }}\n          onLoad={() => setLoaded(true)}\n          onError={() => setError(true)}\n        />\n      ) : (\n        <div\n          data-testid=\"avatar-fallback\"\n          className=\"str-chat__avatar-fallback\"\n        >\n          {initials}\n        </div>\n      )}\n    </div>\n  );\n};\n\nAvatar.propTypes = {\n  /** image url */\n  image: PropTypes.string,\n  /** name of the picture, used for title tag fallback */\n  name: PropTypes.string,\n  /** shape of the avatar, circle, rounded or square */\n  shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\n  /** size in pixels */\n  size: PropTypes.number,\n  /** click event handler */\n  onClick: PropTypes.func,\n  /** mouseOver event handler */\n  onMouseOver: PropTypes.func,\n};\n\nexport default Avatar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import('types').ChannelPreviewUIComponentProps>} */\nconst ChannelPreviewCountOnly = ({\n  channel,\n  setActiveChannel,\n  watchers,\n  unread,\n  displayTitle,\n}) => {\n  return (\n    <div className={unread >= 1 ? 'unread' : ''}>\n      <button onClick={() => setActiveChannel(channel, watchers)}>\n        {' '}\n        {displayTitle} <span>{unread}</span>\n      </button>\n    </div>\n  );\n};\n\nChannelPreviewCountOnly.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n};\n\nexport default React.memo(ChannelPreviewCountOnly);\n","export const getLatestMessagePreview = (channel, t) => {\n  const latestMessage =\n    channel.state.messages[channel.state.messages.length - 1];\n\n  if (!latestMessage) {\n    return t('Nothing yet...');\n  }\n  if (latestMessage.deleted_at) {\n    return t('Message deleted');\n  }\n  if (latestMessage.text) {\n    return latestMessage.text;\n  }\n  if (latestMessage.command) {\n    return `/${latestMessage.command}`;\n  }\n  if (latestMessage.attachments.length) {\n    return t('🏙 Attachment...');\n  }\n\n  return t('Empty message...');\n};\n\nexport const getDisplayTitle = (channel, currentUser) => {\n  let title = channel.data.name;\n  const members = Object.values(channel.state.members);\n\n  if (!title && members.length === 2) {\n    const otherMember = members.find((m) => m.user.id !== currentUser.id);\n    title = otherMember.user.name;\n  }\n\n  return title;\n};\n\nexport const getDisplayImage = (channel, currentUser) => {\n  let { image } = channel.data;\n  const members = Object.values(channel.state.members);\n\n  if (!image && members.length === 2) {\n    const otherMember = members.find((m) => m.user.id !== currentUser.id);\n    image = otherMember.user.image;\n  }\n\n  return image;\n};\n","// @ts-check\nimport React, { useState, useEffect, useContext } from 'react';\n\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport ChannelPreviewCountOnly from './ChannelPreviewCountOnly';\nimport { TranslationContext, ChatContext } from '../../context';\nimport {\n  getLatestMessagePreview,\n  getDisplayTitle,\n  getDisplayImage,\n} from './utils';\n\n/**\n * @type {React.FC<import('types').ChannelPreviewProps>}\n */\nconst ChannelPreview = (props) => {\n  const { channel, Preview = ChannelPreviewCountOnly } = props;\n\n  const { client, channel: activeChannel, setActiveChannel } = useContext(\n    ChatContext,\n  );\n  const { t } = useContext(TranslationContext);\n\n  const [lastMessage, setLastMessage] = useState(\n    /** @type {import('stream-chat').MessageResponse | undefined} */ (undefined),\n  );\n  const [unread, setUnread] = useState(0);\n\n  const isActive = activeChannel?.cid === channel.cid;\n  const { muted } = channel.muteStatus();\n\n  useEffect(() => {\n    if (isActive || muted) {\n      setUnread(0);\n    } else {\n      setUnread(channel.countUnread());\n    }\n  }, [channel, isActive, muted]);\n\n  useEffect(() => {\n    /** @type {(event: import('stream-chat').Event) => void} */\n    const handleEvent = (event) => {\n      setLastMessage(event.message);\n\n      if (!isActive && !muted) {\n        setUnread(channel.countUnread());\n      } else {\n        setUnread(0);\n      }\n    };\n\n    channel.on('message.new', handleEvent);\n    channel.on('message.updated', handleEvent);\n    channel.on('message.deleted', handleEvent);\n\n    return () => {\n      channel.off('message.new', handleEvent);\n      channel.off('message.updated', handleEvent);\n      channel.off('message.deleted', handleEvent);\n    };\n  }, [channel, isActive, muted]);\n\n  if (!Preview) return null;\n\n  return (\n    <Preview\n      {...props}\n      setActiveChannel={setActiveChannel}\n      lastMessage={lastMessage}\n      unread={unread}\n      latestMessage={getLatestMessagePreview(channel, t)}\n      displayTitle={getDisplayTitle(channel, client.user)}\n      displayImage={getDisplayImage(channel, client.user)}\n      active={isActive}\n    />\n  );\n};\n\nChannelPreview.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: /** @type {PropTypes.Validator<import('stream-chat').Channel>} */ (PropTypes\n    .object.isRequired),\n  /** Current selected channel object */\n  activeChannel: /** @type {PropTypes.Validator<import('stream-chat').Channel | null | undefined>} */ (PropTypes.object),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview: /** @type {PropTypes.Validator<React.ComponentType<import('types').ChannelPreviewUIComponentProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelPreview;\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { Channel } from 'stream-chat';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\n/**\n *\n * @example ../../docs/ChannelPreviewCompact.md\n * @type {import('types').ChannelPreviewCompact}\n */\nconst ChannelPreviewCompact = (props) => {\n  const { Avatar = DefaultAvatar } = props;\n  /**\n   * @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax\n   */\n  const channelPreviewButton = useRef(null);\n  const unreadClass =\n    props.unread_count >= 1 ? 'str-chat__channel-preview-compact--unread' : '';\n  const activeClass = props.active\n    ? 'str-chat__channel-preview-compact--active'\n    : '';\n\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return (\n    <button\n      data-testid=\"channel-preview-button\"\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n      className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\n    >\n      <div className=\"str-chat__channel-preview-compact--left\">\n        <Avatar\n          image={props.displayImage}\n          name={props.displayTitle}\n          size={20}\n        />\n      </div>\n      <div className=\"str-chat__channel-preview-compact--right\">\n        {props.displayTitle}\n      </div>\n    </button>\n  );\n};\n\nChannelPreviewCompact.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.instanceOf(Channel).isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.instanceOf(Channel),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nexport default React.memo(ChannelPreviewCompact);\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { truncate } from '../../utils';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n *\n * @example ../../docs/ChannelPreviewLastMessage.md\n * @type {import('types').ChannelPreviewLastMessage}\n */\nconst ChannelPreviewLastMessage = (props) => {\n  const { Avatar = DefaultAvatar } = props;\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  const channelPreviewButton = useRef(null);\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  const unreadClass =\n    props.unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n  const activeClass = props.active ? 'str-chat__channel-preview--active' : '';\n\n  return (\n    <div className={`str-chat__channel-preview ${unreadClass} ${activeClass}`}>\n      <button\n        onClick={onSelectChannel}\n        ref={channelPreviewButton}\n        data-testid=\"channel-preview-button\"\n      >\n        {props.unread >= 1 && (\n          <div className=\"str-chat__channel-preview--dot\" />\n        )}\n        <Avatar image={props.displayImage} name={props.displayTitle} />\n        <div className=\"str-chat__channel-preview-info\">\n          <span className=\"str-chat__channel-preview-title\">\n            {props.displayTitle}\n          </span>\n          <span className=\"str-chat__channel-preview-last-message\">\n            {truncate(props.latestMessage, props.latestMessageLength)}\n          </span>\n          {props.unread >= 1 && (\n            <span className=\"str-chat__channel-preview-unread-count\">\n              {props.unread}\n            </span>\n          )}\n        </div>\n      </button>\n    </div>\n  );\n};\n\nChannelPreviewLastMessage.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nChannelPreviewLastMessage.defaultProps = {\n  latestMessageLength: 20,\n};\n\nexport default React.memo(ChannelPreviewLastMessage);\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { truncate } from '../../utils';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n *\n * @example ../../docs/ChannelPreviewMessenger.md\n * @type {import('types').ChannelPreviewMessenger}\n */\nconst ChannelPreviewMessenger = (props) => {\n  const { Avatar = DefaultAvatar } = props;\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  const channelPreviewButton = useRef(null);\n  const unreadClass =\n    props.unread >= 1 ? 'str-chat__channel-preview-messenger--unread' : '';\n  const activeClass = props.active\n    ? 'str-chat__channel-preview-messenger--active'\n    : '';\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    if (channelPreviewButton?.current) {\n      channelPreviewButton.current.blur();\n    }\n  };\n\n  return (\n    <button\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n      className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\n      data-testid=\"channel-preview-button\"\n    >\n      <div className=\"str-chat__channel-preview-messenger--left\">\n        {\n          <Avatar\n            image={props.displayImage}\n            name={props.displayTitle}\n            size={40}\n          />\n        }\n      </div>\n      <div className=\"str-chat__channel-preview-messenger--right\">\n        <div className=\"str-chat__channel-preview-messenger--name\">\n          <span>{props.displayTitle}</span>\n        </div>\n        <div className=\"str-chat__channel-preview-messenger--last-message\">\n          {truncate(props.latestMessage, props.latestMessageLength)}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nChannelPreviewMessenger.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nChannelPreviewMessenger.defaultProps = {\n  latestMessageLength: 14,\n};\n\nexport default React.memo(ChannelPreviewMessenger);\n","export const emojiSetDef = {\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n  size: 20,\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n};\n\n/** @type {import(\"types\").commonEmojiInterface} */\nexport const commonEmoji = {\n  emoticons: [],\n  short_names: [],\n  custom: true,\n};\n\n/** @type {import(\"types\").MinimalEmojiInterface[]} */\nexport const defaultMinimalEmojis = [\n  {\n    id: 'like',\n    name: 'like',\n    colons: ':+1:',\n    sheet_x: 0,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'love',\n    name: 'love',\n    colons: ':heart:',\n    sheet_x: 1,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'haha',\n    name: 'haha',\n    colons: ':joy:',\n    sheet_x: 1,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'wow',\n    name: 'wow',\n    colons: ':astonished:',\n    sheet_x: 0,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'sad',\n    name: 'sad',\n    colons: ':pensive:',\n    sheet_x: 0,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'angry',\n    name: 'angry',\n    colons: ':angry:',\n    sheet_x: 1,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n];\n\n// use this only for small lists like in ReactionSelector\n/** @typedef {import('emoji-mart').Data} EmojiData\n * @type {(data: EmojiData) => EmojiData}\n */\nexport const getStrippedEmojiData = (data) => ({\n  ...data,\n  emojis: {},\n});\n","// @ts-check\nimport React from 'react';\n\nexport const ReplyIcon = () => (\n  <svg width=\"18\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\"\n      fillRule=\"nonzero\"\n    />\n  </svg>\n);\n\nexport const DeliveredCheckIcon = () => (\n  <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n      fill=\"#006CFF\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const ReactionIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"12\"\n    height=\"12\"\n    viewBox=\"0 0 12 12\"\n  >\n    <g fillRule=\"evenodd\" clipRule=\"evenodd\">\n      <path d=\"M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z\"></path>\n      <path d=\"M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z\"></path>\n    </g>\n  </svg>\n);\n\nexport const ThreadIcon = () => (\n  <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const ErrorIcon = () => (\n  <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n      fill=\"#EA152F\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const PinIcon = () => (\n  <svg\n    width=\"14\"\n    height=\"13\"\n    viewBox=\"0 0 14 13\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M13.3518 6.686L6.75251 0.0866699L5.80984 1.02867L6.75318 1.972V1.97334L3.45318 5.272L3.45251 5.27334L2.50984 4.32934L1.56718 5.27267L4.39584 8.10067L0.624512 11.8713L1.56718 12.814L5.33851 9.04334L8.16718 11.8713L9.10984 10.9293L8.16718 9.986L11.4672 6.686L12.4098 7.62867L13.3518 6.686ZM7.22451 9.04267L7.22385 9.04334L4.39584 6.21467L7.69518 2.91467L10.5232 5.74267L7.22451 9.04267Z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\n/** @type {React.FC<import(\"types\").PinIndicatorProps>} */\nexport const PinIndicator = ({ message, t }) => {\n  if (!message || !t) return null;\n\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n      <PinIcon />\n      <div\n        style={{\n          marginBottom: '0',\n          marginTop: '0',\n          marginLeft: '8px',\n          fontSize: '14px',\n        }}\n      >\n        {message.pinned_by\n          ? `${t('Pinned by')} ${\n              message.pinned_by?.name || message.pinned_by?.id\n            }`\n          : t('Message pinned')}\n      </div>\n    </div>\n  );\n};\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport { ReplyIcon } from './icons';\n\n/** @type {React.FC<import(\"types\").MessageRepliesCountButtonProps>} */\nconst MessageRepliesCountButton = ({\n  reply_count,\n  labelSingle,\n  labelPlural,\n  onClick,\n}) => {\n  const { t } = useContext(TranslationContext);\n  let singleReplyText;\n  let pluralReplyText;\n\n  if (reply_count === 1) {\n    if (labelSingle) {\n      singleReplyText = `1 ${labelSingle}`;\n    } else {\n      singleReplyText = t('1 reply');\n    }\n  }\n\n  if (reply_count && reply_count > 1) {\n    if (labelPlural) {\n      pluralReplyText = `${reply_count} ${labelPlural}`;\n    } else {\n      pluralReplyText = t('{{ replyCount }} replies', {\n        replyCount: reply_count,\n      });\n    }\n  }\n\n  if (reply_count && reply_count !== 0) {\n    return (\n      <button\n        data-testid=\"replies-count-button\"\n        className=\"str-chat__message-replies-count-button\"\n        onClick={onClick}\n      >\n        <ReplyIcon />\n        {reply_count === 1 ? singleReplyText : pluralReplyText}\n      </button>\n    );\n  }\n  return null;\n};\n\nMessageRepliesCountButton.defaultProps = {\n  reply_count: 0,\n};\n\nMessageRepliesCountButton.propTypes = {\n  /** Label for number of replies, when count is 1 */\n  labelSingle: PropTypes.string,\n  /** Label for number of replies, when count is more than 1 */\n  labelPlural: PropTypes.string,\n  /** Number of replies */\n  reply_count: PropTypes.number,\n  /**\n   * click handler for button\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  onClick: PropTypes.func,\n};\n\nexport default React.memo(MessageRepliesCountButton);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { MML as MMLReact } from 'mml-react';\n\nimport { ChatContext } from '../../context';\n\n/**\n * MML - A wrapper component around MML-React library\n *\n * @example ../../docs/MML.md\n * @typedef {import('types').MMLProps} Props\n * @type { React.FC<Props>}\n */\nconst MML = ({ source, actionHandler, align = 'right' }) => {\n  const { theme } = useContext(ChatContext);\n\n  if (!source) return null;\n\n  return (\n    <MMLReact\n      source={source}\n      className={`mml-align-${align}`}\n      onSubmit={actionHandler}\n      Loading={null}\n      Success={null}\n      theme={(theme || '').replace(' ', '-')}\n    />\n  );\n};\n\nMML.propTypes = {\n  /** mml source string */\n  source: PropTypes.string.isRequired,\n  /** submit handler for mml actions */\n  actionHandler: PropTypes.func,\n  /** align mml components to left/right */\n  align: PropTypes.oneOf(['left', 'right']),\n};\n\nexport default MML;\n","// @ts-check\nimport React, { useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").ModalProps>} */\nconst Modal = ({ children, onClose, open }) => {\n  /** @type {React.RefObject<HTMLDivElement>} */\n  const innerRef = useRef(null);\n  const { t } = useContext(TranslationContext);\n\n  /** @param {React.MouseEvent} e */\n  const handleClick = (e) => {\n    if (\n      e.target instanceof Node &&\n      !innerRef.current?.contains(e.target) &&\n      onClose\n    ) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    if (!open) return () => {};\n    /** @type {EventListener} */\n    const handleEscKey = (e) => {\n      if (e instanceof KeyboardEvent && e.keyCode === 27 && onClose) {\n        onClose();\n      }\n    };\n    document.addEventListener('keyPress', handleEscKey, false);\n    return () => document.removeEventListener('keyPress', handleEscKey, false);\n  }, [onClose, open]);\n\n  const openClasses = open\n    ? 'str-chat__modal--open'\n    : 'str-chat__modal--closed';\n\n  return (\n    <div className={`str-chat__modal ${openClasses}`} onClick={handleClick}>\n      <div className=\"str-chat__modal__close-button\">\n        {t('Close')}\n        <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n      <div className=\"str-chat__modal__inner\" ref={innerRef}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nModal.propTypes = {\n  /** Callback handler for closing of modal. */\n  onClose: PropTypes.func.isRequired,\n  /** If true, modal is opened or visible. */\n  open: PropTypes.bool.isRequired,\n};\n\nexport default Modal;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * @type {React.FC<import('types').CommandItemProps>}\n */\nconst CommandItem = ({ entity }) => (\n  <div className=\"str-chat__slash-command\">\n    <span className=\"str-chat__slash-command-header\">\n      <strong>{entity.name}</strong> {entity.args}\n    </span>\n    <br />\n    <span className=\"str-chat__slash-command-description\">\n      {entity.description}\n    </span>\n  </div>\n);\n\nCommandItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the command */\n    name: PropTypes.string,\n    /** Arguments of command */\n    args: PropTypes.string,\n    /** Description of command */\n    description: PropTypes.string,\n  }).isRequired,\n};\n\nexport default React.memo(CommandItem);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import(\"types\").EmoticonItemProps>} */\nconst EmoticonItem = ({ entity }) => (\n  <div className=\"str-chat__emoji-item\">\n    <span className=\"str-chat__emoji-item--entity\">{entity.native}</span>\n    <span className=\"str-chat__emoji-item--name\">{entity.name}</span>\n  </div>\n);\n\nEmoticonItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name for emoticon */\n    name: PropTypes.string.isRequired,\n    /** Native value or actual emoticon */\n    native: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default React.memo(EmoticonItem);\n","// @ts-check\nimport React from 'react';\n\nconst LoadingItems = () => (\n  <div className=\"str-chat__loading-channels-item\">\n    <div className=\"str-chat__loading-channels-avatar\" />\n    <div className=\"str-chat__loading-channels-meta\">\n      <div className=\"str-chat__loading-channels-username\" />\n      <div className=\"str-chat__loading-channels-status\" />\n    </div>\n  </div>\n);\n\n/**\n * LoadingChannels - Fancy loading indicator for the channel list\n *\n * @example ../../docs/LoadingChannels.md\n */\nconst LoadingChannels = () => (\n  <div className=\"str-chat__loading-channels\">\n    <LoadingItems />\n    <LoadingItems />\n    <LoadingItems />\n  </div>\n);\n\nexport default React.memo(LoadingChannels);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ../../docs/LoadingErrorIndicator.md\n * @type {React.FC<import('types').LoadingErrorIndicatorProps>}\n */\nconst LoadingErrorIndicator = ({ error }) => {\n  const { t } = useContext(TranslationContext);\n  if (!error) return null;\n\n  return (\n    <div>{t('Error: {{ errorMessage }}', { errorMessage: error.message })}</div>\n  );\n};\n\nLoadingErrorIndicator.defaultProps = {\n  error: null,\n};\n\nLoadingErrorIndicator.propTypes = {\n  /** Error object */\n  error: PropTypes.instanceOf(Error),\n};\n\nexport default React.memo(LoadingErrorIndicator);\n","// @ts-check\nimport React from 'react';\n\n/**\n * LoadingIndicator - Just a simple loading spinner..\n *\n * @example ../../docs/LoadingIndicator.md\n * @type { React.FC<import('types').LoadingIndicatorProps>}\n */\nconst LoadingIndicator = ({ size = 15, color = '#006CFF' }) => (\n  <div\n    className={`str-chat__loading-indicator ${color}`}\n    data-testid=\"loading-indicator-wrapper\"\n    style={{ width: size, height: size }}\n  >\n    <svg\n      width={size}\n      height={size}\n      viewBox={`0 0 30 30`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <defs>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"a\">\n          <stop stopColor=\"#FFF\" stopOpacity=\"0\" offset=\"0%\" />\n          <stop\n            offset=\"100%\"\n            data-testid=\"loading-indicator-circle\"\n            stopColor={color}\n            stopOpacity=\"1\"\n            style={{ stopColor: color }}\n          />\n        </linearGradient>\n      </defs>\n      <path\n        d=\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\"\n        fill=\"url(#a)\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  </div>\n);\n\nexport default React.memo(LoadingIndicator);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\n/**\n * UserItem - Component rendered in commands menu\n * @typedef {import('types').UserItemProps} Props\n * @type {React.FC<Props>}\n */\nconst UserItem = ({ Avatar = DefaultAvatar, entity }) => (\n  <div className=\"str-chat__user-item\">\n    <Avatar size={20} image={entity.image} />\n    <div>\n      <strong>{entity.name}</strong> {!entity.name ? entity.id : ''}\n    </div>\n  </div>\n);\n\nUserItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the user */\n    name: PropTypes.string,\n    /** Id of the user */\n    id: PropTypes.string,\n    /** Image of the user */\n    image: PropTypes.string,\n  }).isRequired,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(UserItem);\n","import React, { useContext, useCallback, useMemo } from 'react';\nimport debounce from 'lodash.debounce';\nimport PropTypes from 'prop-types';\n\nimport { AutoCompleteTextarea } from '../AutoCompleteTextarea';\nimport { CommandItem } from '../CommandItem';\nimport { EmoticonItem } from '../EmoticonItem';\nimport { LoadingIndicator } from '../Loading';\nimport { UserItem } from '../UserItem';\n\nimport { ChannelContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").ChatAutoCompleteProps>} */\nconst ChatAutoComplete = (props) => {\n  const { commands, onSelectItem, triggers } = props;\n\n  const { channel, emojiConfig } = useContext(ChannelContext);\n\n  const members = channel?.state?.members;\n  const watchers = channel?.state?.watchers;\n  const { emojiData, EmojiIndex } = emojiConfig || {};\n\n  const emojiIndex = useMemo(() => {\n    if (EmojiIndex) {\n      return new EmojiIndex(emojiData);\n    }\n    return null;\n  }, [emojiData, EmojiIndex]);\n\n  /** @param {string} word */\n  const emojiReplace = (word) => {\n    const found = emojiIndex?.search(word) || [];\n    const emoji = found.slice(0, 10).find(\n      /** @type {{ ({ emoticons } : import('emoji-mart').EmojiData): boolean }} */\n      ({ emoticons }) => !!emoticons?.includes(word),\n    );\n    if (!emoji || !('native' in emoji)) return null;\n    return emoji.native;\n  };\n\n  const getMembersAndWatchers = useCallback(() => {\n    const memberUsers = members\n      ? Object.values(members).map(({ user }) => user)\n      : [];\n    const watcherUsers = watchers ? Object.values(watchers) : [];\n    const users = [...memberUsers, ...watcherUsers];\n    // make sure we don't list users twice\n    /** @type {{ [key: string]: import('stream-chat').UserResponse<import('types').StreamChatReactUserType> }} */\n    const uniqueUsers = {};\n    users.forEach((user) => {\n      if (user && !uniqueUsers[user.id]) {\n        uniqueUsers[user.id] = user;\n      }\n    });\n    return Object.values(uniqueUsers);\n  }, [members, watchers]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const queryMembersDebounced = useCallback(\n    debounce(\n      /**\n       * @param {string} query\n       * @param {(data: any[]) => void} onReady\n       */\n      async (query, onReady) => {\n        if (!channel?.queryMembers) return;\n        const response = await channel?.queryMembers({\n          name: { $autocomplete: query },\n        });\n        const users = response.members.map((m) => m.user);\n        if (onReady) onReady(users);\n      },\n      200,\n    ),\n    [channel?.queryMembers],\n  );\n\n  /**\n   * dataProvider accepts `onReady` function, which will executed once the data is ready.\n   * Another approach would have been to simply return the data from dataProvider and let the\n   * component await for it and then execute the required logic. We are going for callback instead\n   * of async-await since we have debounce function in dataProvider. Which will delay the execution\n   * of api call on trailing end of debounce (lets call it a1) but will return with result of\n   * previous call without waiting for a1. So in this case, we want to execute onReady, when trailing\n   * end of debounce executes.\n   * @type {() => import(\"../AutoCompleteTextarea/types\").TriggerMap | object}\n   */\n  const getTriggers = useCallback(\n    () =>\n      triggers || {\n        ':': {\n          dataProvider: (q, text, onReady) => {\n            if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n              return [];\n            }\n            const emojis = emojiIndex?.search(q) || [];\n            const result = emojis.slice(0, 10);\n\n            if (onReady) onReady(result, q);\n\n            return result;\n          },\n          component: EmoticonItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `${entity.native}`,\n            caretPosition: 'next',\n          }),\n        },\n        '@': {\n          dataProvider: (query, text, onReady) => {\n            // By default, we return maximum 100 members via queryChannels api call.\n            // Thus it is safe to assume, that if number of members in channel.state is < 100,\n            // then all the members are already available on client side and we don't need to\n            // make any api call to queryMembers endpoint.\n            if (!query || Object.values(members || {}).length < 100) {\n              const users = getMembersAndWatchers();\n\n              const matchingUsers = users.filter((user) => {\n                if (!query) return true;\n                if (\n                  user.name !== undefined &&\n                  user.name.toLowerCase().includes(query.toLowerCase())\n                ) {\n                  return true;\n                }\n                return user.id.toLowerCase().includes(query.toLowerCase());\n              });\n              const data = matchingUsers.slice(0, 10);\n\n              if (onReady) onReady(data, query);\n\n              return data;\n            }\n            return queryMembersDebounced(\n              query,\n              /** @param {any[]} data */\n              (data) => {\n                if (onReady) onReady(data, query);\n              },\n            );\n          },\n          component: UserItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `@${entity.name || entity.id}`,\n            caretPosition: 'next',\n          }),\n          callback: (item) => onSelectItem && onSelectItem(item),\n        },\n        '/': {\n          dataProvider: (q, text, onReady) => {\n            if (text.indexOf('/') !== 0 || !commands) {\n              return [];\n            }\n            const selectedCommands = commands.filter(\n              (c) => c.name?.indexOf(q) !== -1,\n            );\n\n            // sort alphabetically unless the you're matching the first char\n            selectedCommands.sort((a, b) => {\n              let nameA = a.name?.toLowerCase();\n              let nameB = b.name?.toLowerCase();\n              if (nameA?.indexOf(q) === 0) {\n                nameA = `0${nameA}`;\n              }\n              if (nameB?.indexOf(q) === 0) {\n                nameB = `0${nameB}`;\n              }\n              // Should confirm possible null / undefined when TS is fully implemented\n              if (nameA != null && nameB != null) {\n                if (nameA < nameB) {\n                  return -1;\n                }\n                if (nameA > nameB) {\n                  return 1;\n                }\n              }\n\n              return 0;\n            });\n\n            const result = selectedCommands.slice(0, 10);\n            if (onReady) onReady(result, q);\n\n            return result;\n          },\n          component: CommandItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `/${entity.name}`,\n            caretPosition: 'next',\n          }),\n        },\n      },\n    [\n      commands,\n      getMembersAndWatchers,\n      members,\n      onSelectItem,\n      queryMembersDebounced,\n      triggers,\n      emojiIndex,\n    ],\n  );\n\n  const { innerRef } = props;\n\n  const updateInnerRef = useCallback(\n    (ref) => {\n      if (innerRef) innerRef.current = ref;\n    },\n    [innerRef],\n  );\n\n  return (\n    <AutoCompleteTextarea\n      loadingComponent={LoadingIndicator}\n      trigger={getTriggers()}\n      replaceWord={emojiReplace}\n      minChar={0}\n      maxRows={props.maxRows}\n      innerRef={updateInnerRef}\n      onFocus={props.onFocus}\n      rows={props.rows}\n      className=\"str-chat__textarea__textarea\"\n      containerClassName=\"str-chat__textarea\"\n      dropdownClassName=\"str-chat__emojisearch\"\n      listClassName=\"str-chat__emojisearch__list\"\n      itemClassName=\"str-chat__emojisearch__item\"\n      placeholder={props.placeholder}\n      onChange={props.onChange}\n      handleSubmit={props.handleSubmit}\n      onPaste={props.onPaste}\n      value={props.value}\n      grow={props.grow}\n      disabled={props.disabled}\n      disableMentions={props.disableMentions}\n      SuggestionList={props.SuggestionList}\n      additionalTextareaProps={props.additionalTextareaProps}\n    />\n  );\n};\n\nChatAutoComplete.propTypes = {\n  /** The number of rows you want the textarea to have */\n  rows: PropTypes.number,\n  /** Grow the number of rows of the textarea while you're typing */\n  grow: PropTypes.bool,\n  /** Maximum number of rows */\n  maxRows: PropTypes.number,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** Disable mentions */\n  disableMentions: PropTypes.bool,\n  /** The value of the textarea */\n  value: PropTypes.string,\n  /** Function to run on pasting within the textarea */\n  onPaste: PropTypes.func,\n  /** Function that runs on submit */\n  handleSubmit: PropTypes.func,\n  /** Function that runs on change */\n  onChange: PropTypes.func,\n  /** Placeholder for the textarea */\n  placeholder: PropTypes.string,\n  /** What loading component to use for the auto complete when loading results. */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /** Minimum number of Character */\n  minChar: PropTypes.number,\n  /**\n   * Handler for selecting item from suggestions list\n   *\n   * @param item Selected item object.\n   *  */\n  onSelectItem: PropTypes.func,\n  /** Array of [commands](https://getstream.io/chat/docs/#channel_commands) */\n  commands: PropTypes.array,\n  /** Listener for onfocus event on textarea */\n  onFocus: PropTypes.func,\n  /** Optional UI component prop to override the default List component that displays suggestions */\n  SuggestionList: /** @type {PropTypes.Validator<React.ElementType<import('types').SuggestionListProps>>} */ (PropTypes.elementType),\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n};\n\nChatAutoComplete.defaultProps = {\n  rows: 3,\n};\n\nexport default React.memo(ChatAutoComplete);\n","// @ts-check\nimport React from 'react';\n\n/**\n * @type {React.FC<import('types').TooltipProps>}\n */\nconst Tooltip = (props) => (\n  <div className=\"str-chat__tooltip\" {...props}>\n    {props.children}\n  </div>\n);\n\nexport default React.memo(Tooltip);\n","import {\n  useReducer,\n  useEffect,\n  useContext,\n  useRef,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport {\n  dataTransferItemsHaveFiles,\n  dataTransferItemsToFiles,\n  // @ts-expect-error\n} from 'react-file-utils';\nimport { ChannelContext } from '../../../context/ChannelContext';\nimport { generateRandomId } from '../../../utils';\n\n/**\n * @typedef {import(\"types\").MessageInputState} State\n * @typedef {import(\"types\").MessageInputProps} Props\n * @typedef {import('stream-chat').Unpacked<ReturnType<import(\"types\").StreamChatReactClient['sendFile']>>} FileUploadAPIResponse\n * @typedef {import('stream-chat').UserResponse} UserResponse\n */\n\n/**\n * Get attachment type from MIME type\n * @param {string} mime\n * @returns {string}\n */\nconst getAttachmentTypeFromMime = (mime) => {\n  if (mime.includes('video/')) return 'media';\n  if (mime.includes('audio/')) return 'audio';\n  return 'file';\n};\n\n/** @type {{ [id: string]: import('types').FileUpload }} */\nconst emptyFileUploads = {};\n/** @type {{ [id: string]: import('types').ImageUpload }} */\nconst emptyImageUploads = {};\n\nconst apiMaxNumberOfFiles = 10;\n\n/**\n * Initializes the state. Empty if the message prop is falsy.\n * @param {import(\"stream-chat\").MessageResponse | undefined} message\n * @returns {State}\n */\nfunction initState(message) {\n  if (!message) {\n    return {\n      text: '',\n      imageOrder: [],\n      imageUploads: { ...emptyImageUploads },\n      fileOrder: [],\n      fileUploads: { ...emptyFileUploads },\n      numberOfUploads: 0,\n      attachments: [],\n      mentioned_users: [],\n      emojiPickerIsOpen: false,\n    };\n  }\n\n  // if message prop is defined, get image uploads, file uploads, text, etc. from it\n  const imageUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'image')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        acc[id] = {\n          id,\n          url: attachment.image_url,\n          state: 'finished',\n          file: {\n            name: attachment.fallback,\n          },\n        };\n        return acc;\n      }, {}) || {};\n  const imageOrder = Object.keys(imageUploads);\n\n  const fileUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'file')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        acc[id] = {\n          id,\n          url: attachment.asset_url,\n          state: 'finished',\n          file: {\n            name: attachment.title,\n            type: attachment.mime_type,\n            size: attachment.file_size,\n          },\n        };\n        return acc;\n      }, {}) || {};\n  const fileOrder = Object.keys(fileUploads);\n\n  const numberOfUploads = fileOrder.length + imageOrder.length;\n\n  const attachments =\n    message.attachments?.filter(\n      ({ type }) => type !== 'file' && type !== 'image',\n    ) || [];\n\n  const mentioned_users = message.mentioned_users || [];\n\n  return {\n    attachments,\n    emojiPickerIsOpen: false,\n    fileOrder,\n    fileUploads,\n    imageOrder,\n    imageUploads,\n    mentioned_users,\n    numberOfUploads,\n    text: message.text || '',\n  };\n}\n/**\n * MessageInput state reducer\n * @param {State} state\n * @param {import(\"./types\").MessageInputReducerAction} action\n * @returns {State}\n */\nfunction messageInputReducer(state, action) {\n  switch (action.type) {\n    case 'setEmojiPickerIsOpen':\n      return { ...state, emojiPickerIsOpen: action.value };\n    case 'setText':\n      return { ...state, text: action.getNewText(state.text) };\n    case 'clear':\n      return {\n        attachments: [],\n        emojiPickerIsOpen: false,\n        fileOrder: [],\n        fileUploads: { ...emptyFileUploads },\n        imageOrder: [],\n        imageUploads: { ...emptyImageUploads },\n        mentioned_users: [],\n        numberOfUploads: 0,\n        text: '',\n      };\n    case 'setImageUpload': {\n      const imageAlreadyExists = state.imageUploads[action.id];\n      if (!imageAlreadyExists && !action.file) return state;\n      const imageOrder = imageAlreadyExists\n        ? state.imageOrder\n        : state.imageOrder.concat(action.id);\n      const { type, ...newUploadFields } = action;\n      return {\n        ...state,\n        imageOrder,\n        imageUploads: {\n          ...state.imageUploads,\n          [action.id]: { ...state.imageUploads[action.id], ...newUploadFields },\n        },\n        numberOfUploads: imageAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'setFileUpload': {\n      const fileAlreadyExists = state.fileUploads[action.id];\n      if (!fileAlreadyExists && !action.file) return state;\n      const fileOrder = fileAlreadyExists\n        ? state.fileOrder\n        : state.fileOrder.concat(action.id);\n      const { type, ...newUploadFields } = action;\n      return {\n        ...state,\n        fileOrder,\n        fileUploads: {\n          ...state.fileUploads,\n          [action.id]: { ...state.fileUploads[action.id], ...newUploadFields },\n        },\n        numberOfUploads: fileAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'removeImageUpload': {\n      if (!state.imageUploads[action.id]) return state; // cannot remove anything\n      const newImageUploads = { ...state.imageUploads };\n      delete newImageUploads[action.id];\n      return {\n        ...state,\n        numberOfUploads: state.numberOfUploads - 1,\n        imageOrder: state.imageOrder.filter((_id) => _id !== action.id),\n        imageUploads: newImageUploads,\n      };\n    }\n    case 'removeFileUpload': {\n      if (!state.fileUploads[action.id]) return state; // cannot remove anything\n      const newFileUploads = { ...state.fileUploads };\n      delete newFileUploads[action.id];\n      return {\n        ...state,\n        numberOfUploads: state.numberOfUploads - 1,\n        fileOrder: state.fileOrder.filter((_id) => _id !== action.id),\n        fileUploads: newFileUploads,\n      };\n    }\n    case 'reduceNumberOfUploads': // TODO: figure out if we can just use uploadOrder instead\n      return { ...state, numberOfUploads: state.numberOfUploads - 1 };\n    case 'addMentionedUser':\n      return {\n        ...state,\n        mentioned_users: state.mentioned_users.concat(action.user),\n      };\n    default:\n      return state;\n  }\n}\n/**\n * hook for MessageInput state\n * @type{import('types').useMessageInput}\n */\nexport default function useMessageInput(props) {\n  const {\n    additionalTextareaProps,\n    clearEditingState,\n    doImageUploadRequest,\n    doFileUploadRequest,\n    errorHandler,\n    focus,\n    message,\n    noFiles,\n    overrideSubmitHandler,\n    parent,\n    publishTypingEvent,\n  } = props;\n\n  const {\n    channel,\n    editMessage,\n    maxNumberOfFiles,\n    multipleUploads,\n    sendMessage,\n  } = useContext(ChannelContext);\n\n  const [state, dispatch] = useReducer(messageInputReducer, message, initState);\n\n  const {\n    text,\n    imageOrder,\n    imageUploads,\n    fileOrder,\n    fileUploads,\n    attachments,\n    numberOfUploads,\n    mentioned_users,\n  } = state;\n\n  const textareaRef = useRef(\n    /** @type {HTMLTextAreaElement | undefined} */ (undefined),\n  );\n  const emojiPickerRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n\n  // Focus\n  useEffect(() => {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]);\n\n  // Text + cursor position\n  const newCursorPosition = useRef(/** @type {number | null} */ (null));\n\n  const insertText = useCallback(\n    (textToInsert) => {\n      const { maxLength } = additionalTextareaProps;\n\n      if (!textareaRef.current) {\n        dispatch({\n          type: 'setText',\n          getNewText: (t) => {\n            const updatedText = t + textToInsert;\n            if (updatedText.length > maxLength) {\n              return updatedText.slice(0, maxLength);\n            }\n            return updatedText;\n          },\n        });\n        return;\n      }\n\n      const { selectionStart, selectionEnd } = textareaRef.current;\n      newCursorPosition.current = selectionStart + textToInsert.length;\n\n      dispatch({\n        type: 'setText',\n        getNewText: (prevText) => {\n          const updatedText =\n            prevText.slice(0, selectionStart) +\n            textToInsert +\n            prevText.slice(selectionEnd);\n\n          if (updatedText.length > maxLength) {\n            return updatedText.slice(0, maxLength);\n          }\n\n          return updatedText;\n        },\n      });\n    },\n    [additionalTextareaProps, newCursorPosition, textareaRef],\n  );\n\n  useEffect(() => {\n    const textareaElement = textareaRef.current;\n    if (textareaElement && newCursorPosition.current !== null) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = null;\n    }\n  }, [text, newCursorPosition]);\n\n  const handleChange = useCallback(\n    (event) => {\n      event.preventDefault();\n      if (!event || !event.target) {\n        return;\n      }\n\n      const newText = event.target.value;\n      dispatch({\n        type: 'setText',\n        getNewText: () => newText,\n      });\n      if (publishTypingEvent && newText && channel) {\n        logChatPromiseExecution(\n          channel.keystroke(parent?.id),\n          'start typing event',\n        );\n      }\n    },\n    [channel, parent, publishTypingEvent],\n  );\n\n  // Emoji\n\n  const closeEmojiPicker = useCallback(\n    (e) => {\n      if (\n        emojiPickerRef.current &&\n        !emojiPickerRef.current.contains(e.target)\n      ) {\n        dispatch({\n          type: 'setEmojiPickerIsOpen',\n          value: false,\n        });\n      }\n    },\n    [emojiPickerRef],\n  );\n\n  const openEmojiPicker = useCallback((event) => {\n    dispatch({\n      type: 'setEmojiPickerIsOpen',\n      value: true,\n    });\n\n    // Prevent event from bubbling to document, so the close handler is never called for this event\n    event.stopPropagation();\n  }, []);\n\n  const handleEmojiKeyDown = (event) => {\n    if (\n      event.key === ' ' ||\n      event.key === 'Enter' ||\n      event.key === 'Spacebar'\n    ) {\n      event.preventDefault();\n      openEmojiPicker(event);\n    }\n  };\n\n  const handleEmojiEscape = (event) => {\n    if (event.key === 'Escape') {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: false,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (state.emojiPickerIsOpen) {\n      document.addEventListener('click', closeEmojiPicker, false);\n      document.addEventListener('keydown', handleEmojiEscape);\n    }\n    return () => {\n      document.removeEventListener('click', closeEmojiPicker, false);\n      document.removeEventListener('keydown', handleEmojiEscape);\n    };\n  }, [closeEmojiPicker, state.emojiPickerIsOpen]);\n\n  const onSelectEmoji = useCallback((emoji) => insertText(emoji.native), [\n    insertText,\n  ]);\n\n  // Commands / mentions\n\n  const getCommands = useCallback(() => channel?.getConfig()?.commands, [\n    channel,\n  ]);\n\n  const getUsers = useCallback(() => {\n    if (!channel) return [];\n    return [\n      ...Object.values(channel.state.members).map(({ user }) => user),\n      ...Object.values(channel.state.watchers),\n    ].filter(\n      (_user, index, self) =>\n        self.findIndex((user) => user?.id === _user?.id) === index, // filter out non-unique ids\n    );\n  }, [channel]);\n\n  const onSelectItem = useCallback(\n    /** @param {UserResponse} item */\n    (item) => {\n      dispatch({ type: 'addMentionedUser', user: item });\n    },\n    [],\n  );\n\n  // Submitting\n\n  const getAttachmentsFromUploads = useCallback(() => {\n    const imageAttachments = imageOrder\n      .map((id) => imageUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .filter((\n        { id, url },\n        index,\n        self, // filter out duplicates based on url\n      ) => self.every((upload) => upload.id === id || upload.url !== url))\n      .map((upload) => ({\n        type: 'image',\n        image_url: upload.url,\n        fallback: upload.file.name,\n      }));\n\n    const fileAttachments = fileOrder\n      .map((id) => fileUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .map((upload) => ({\n        type: getAttachmentTypeFromMime(upload.file.type),\n        asset_url: upload.url,\n        title: upload.file.name,\n        mime_type: upload.file.type,\n        file_size: upload.file.size,\n      }));\n\n    return [\n      ...attachments, // from state\n      ...imageAttachments,\n      ...fileAttachments,\n    ];\n  }, [imageOrder, imageUploads, fileOrder, fileUploads, attachments]);\n\n  /**\n   * @param {React.FormEvent | React.MouseEvent} event\n   */\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const trimmedMessage = text.trim();\n    const isEmptyMessage =\n      trimmedMessage === '' ||\n      trimmedMessage === '>' ||\n      trimmedMessage === '``````' ||\n      trimmedMessage === '``' ||\n      trimmedMessage === '**' ||\n      trimmedMessage === '____' ||\n      trimmedMessage === '__' ||\n      trimmedMessage === '****';\n    if (isEmptyMessage && numberOfUploads === 0) {\n      return;\n    }\n    // the channel component handles the actual sending of the message\n    const someAttachmentsUploading =\n      Object.values(imageUploads).some(\n        (upload) => upload.state === 'uploading',\n      ) ||\n      Object.values(fileUploads).some((upload) => upload.state === 'uploading');\n    if (someAttachmentsUploading) {\n      // TODO: show error to user that they should wait until image is uploaded\n      return;\n    }\n\n    const newAttachments = getAttachmentsFromUploads();\n\n    // Instead of checking if a user is still mentioned every time the text changes,\n    // just filter out non-mentioned users before submit, which is cheaper\n    // and allows users to easily undo any accidental deletion\n    const actualMentionedUsers = Array.from(\n      new Set(\n        mentioned_users\n          .filter(\n            ({ name, id }) =>\n              text.includes(`@${id}`) || text.includes(`@${name}`),\n          )\n          .map(({ id }) => id),\n      ),\n    );\n\n    const updatedMessage = {\n      text,\n      attachments: newAttachments,\n      mentioned_users: actualMentionedUsers,\n    };\n\n    if (!!message && editMessage) {\n      // TODO: Remove this line and show an error when submit fails\n      if (clearEditingState) clearEditingState();\n\n      const updateMessagePromise = editMessage({\n        ...updatedMessage,\n        id: message.id,\n      }).then(clearEditingState);\n\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n      dispatch({ type: 'clear' });\n    } else if (\n      overrideSubmitHandler &&\n      typeof overrideSubmitHandler === 'function' &&\n      channel\n    ) {\n      overrideSubmitHandler(\n        {\n          ...updatedMessage,\n          parent,\n        },\n        channel.cid,\n      );\n      dispatch({ type: 'clear' });\n    } else if (sendMessage) {\n      const sendMessagePromise = sendMessage({\n        ...updatedMessage,\n        parent,\n      });\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      dispatch({ type: 'clear' });\n    }\n    if (channel && publishTypingEvent)\n      logChatPromiseExecution(channel.stopTyping(), 'stop typing');\n  };\n\n  // Attachments\n\n  // Files\n\n  const uploadFile = useCallback((id) => {\n    dispatch({ type: 'setFileUpload', id, state: 'uploading' });\n  }, []);\n\n  const removeFile = useCallback((id) => {\n    // TODO: cancel upload if still uploading\n    dispatch({ type: 'removeFileUpload', id });\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      if (!channel) return;\n      const upload = Object.values(fileUploads).find(\n        (fileUpload) => fileUpload.state === 'uploading' && fileUpload.file,\n      );\n      if (!upload) return;\n\n      const { id, file } = upload;\n      /** @type FileUploadAPIResponse */\n      let response;\n      try {\n        if (doFileUploadRequest) {\n          response = await doFileUploadRequest(file, channel);\n        } else {\n          response = await channel.sendFile(file);\n        }\n      } catch (e) {\n        console.warn(e);\n        let alreadyRemoved = false;\n\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!fileUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ type: 'setFileUpload', id, state: 'failed' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the parameters passed to the error handler actually make sense\n          errorHandler(e, 'upload-file', file);\n        }\n        return;\n      }\n\n      // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n      // This is for the case if someone wants to handle failure on app level.\n      if (!response) {\n        removeFile(id);\n        return;\n      }\n\n      dispatch({\n        type: 'setFileUpload',\n        id,\n        state: 'finished',\n        url: response.file,\n      });\n    })();\n  }, [fileUploads, channel, doFileUploadRequest, errorHandler, removeFile]);\n\n  // Images\n\n  const removeImage = useCallback((id) => {\n    dispatch({ type: 'removeImageUpload', id });\n    // TODO: cancel upload if still uploading\n  }, []);\n\n  const uploadImage = useCallback(\n    async (id) => {\n      const img = imageUploads[id];\n      if (!img || !channel) return;\n      const { file } = img;\n      if (img.state !== 'uploading') {\n        dispatch({ type: 'setImageUpload', id, state: 'uploading' });\n      }\n      /** @type FileUploadAPIResponse */\n      let response;\n      try {\n        if (doImageUploadRequest) {\n          response = await doImageUploadRequest(file, channel);\n        } else {\n          response = await channel.sendImage(file);\n        }\n      } catch (e) {\n        console.warn(e);\n        let alreadyRemoved = false;\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!imageUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ type: 'setImageUpload', id, state: 'failed' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the parameters passed to the error handler actually make sense\n          errorHandler(e, 'upload-image', {\n            id,\n            file,\n          });\n        }\n        return;\n      }\n\n      // If doImageUploadRequest returns any falsy value, then don't create the upload preview.\n      // This is for the case if someone wants to handle failure on app level.\n      if (!response) {\n        removeImage(id);\n        return;\n      }\n\n      dispatch({\n        type: 'setImageUpload',\n        id,\n        state: 'finished',\n        url: response.file,\n      });\n    },\n    [imageUploads, channel, doImageUploadRequest, errorHandler, removeImage],\n  );\n\n  useEffect(() => {\n    if (FileReader) {\n      const upload = Object.values(imageUploads).find(\n        (imageUpload) =>\n          imageUpload.state === 'uploading' &&\n          !!imageUpload.file &&\n          !imageUpload.previewUri,\n      );\n      if (upload) {\n        const { id, file } = upload;\n        // TODO: Possibly use URL.createObjectURL instead. However, then we need\n        // to release the previews when not used anymore though.\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          if (typeof event.target?.result !== 'string') return;\n          dispatch({\n            type: 'setImageUpload',\n            id,\n            previewUri: event.target.result,\n          });\n        };\n        reader.readAsDataURL(file);\n        uploadImage(id);\n        return () => {\n          reader.onload = null;\n        };\n      }\n    }\n    return () => {};\n  }, [imageUploads, uploadImage]);\n\n  // Number of files that the user can still add. Should never be more than the amount allowed by the API.\n  // If multipleUploads is false, we only want to allow a single upload.\n  const maxFilesAllowed = useMemo(\n    () => (!multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles),\n    [maxNumberOfFiles, multipleUploads],\n  );\n\n  // return !multipleUploads ? 1 : maxNumberOfFiles || apiMaxNumberOfFiles;\n  const maxFilesLeft = maxFilesAllowed - numberOfUploads;\n\n  const uploadNewFiles = useCallback(\n    /**\n     * @param {FileList} files\n     */\n    (files) => {\n      Array.from(files)\n        .slice(0, maxFilesLeft)\n        .forEach((file) => {\n          const id = generateRandomId();\n          if (\n            file.type.startsWith('image/') &&\n            !file.type.endsWith('.photoshop') // photoshop files begin with 'image/'\n          ) {\n            dispatch({ type: 'setImageUpload', id, file, state: 'uploading' });\n          } else if (file instanceof File && !noFiles) {\n            dispatch({ type: 'setFileUpload', id, file, state: 'uploading' });\n          }\n        });\n    },\n    [maxFilesLeft, noFiles],\n  );\n\n  const onPaste = useCallback(\n    /** (e: React.ClipboardEvent) */\n    (e) => {\n      (async (event) => {\n        // TODO: Move this handler to package with ImageDropzone\n        const { items } = event.clipboardData;\n        if (!dataTransferItemsHaveFiles(items)) return;\n\n        event.preventDefault();\n        // Get a promise for the plain text in case no files are\n        // found. This needs to be done here because chrome cleans\n        // up the DataTransferItems after resolving of a promise.\n        let plainTextPromise;\n        /** @type {DataTransferItem} */\n        const plainTextItem = [...items].find(\n          ({ kind, type }) => kind === 'string' && type === 'text/plain',\n        );\n\n        if (plainTextItem) {\n          plainTextPromise = new Promise((resolve) => {\n            plainTextItem.getAsString((string) => {\n              resolve(string);\n            });\n          });\n        }\n\n        const fileLikes = await dataTransferItemsToFiles(items);\n        if (fileLikes.length) {\n          uploadNewFiles(fileLikes);\n          return;\n        }\n\n        // fallback to regular text paste\n        if (plainTextPromise) {\n          const pastedText = await plainTextPromise;\n          insertText(pastedText);\n        }\n      })(e);\n    },\n    [insertText, uploadNewFiles],\n  );\n\n  const isUploadEnabled = channel?.getConfig?.()?.uploads !== false;\n\n  return {\n    ...state,\n    isUploadEnabled,\n    maxFilesLeft,\n    // refs\n    textareaRef,\n    emojiPickerRef,\n    // handlers\n    uploadNewFiles,\n    removeImage,\n    uploadImage,\n    removeFile,\n    uploadFile,\n    onSelectEmoji,\n    getUsers,\n    getCommands,\n    handleSubmit,\n    handleChange,\n    onPaste,\n    onSelectItem,\n    closeEmojiPicker,\n    openEmojiPicker,\n    handleEmojiKeyDown,\n  };\n}\n","import React, { useContext } from 'react';\nimport { ChannelContext, TranslationContext } from '../../context';\n\n/** @type { (emoji: import('emoji-mart').EmojiData) => boolean } */\nconst filterEmoji = (emoji) => {\n  if (\n    emoji.name === 'White Smiling Face' ||\n    emoji.name === 'White Frowning Face'\n  ) {\n    return false;\n  }\n  return true;\n};\n\n/** @type {React.FC<import(\"types\").MessageInputEmojiPickerProps>} */\nconst EmojiPicker = ({\n  emojiPickerIsOpen,\n  emojiPickerRef,\n  onSelectEmoji,\n  small,\n}) => {\n  const { emojiConfig } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const { emojiData, EmojiPicker: Picker } = emojiConfig || {};\n\n  if (emojiPickerIsOpen) {\n    const className = small\n      ? 'str-chat__small-message-input-emojipicker'\n      : 'str-chat__input--emojipicker';\n\n    return (\n      <div className={className} ref={emojiPickerRef}>\n        {Picker && (\n          <Picker\n            native\n            data={emojiData}\n            set={'facebook'}\n            emoji=\"point_up\"\n            title={t('Pick your emoji')}\n            onSelect={onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n            useButton={true}\n            emojisToShowFilter={filterEmoji}\n            showSkinTones={false}\n          />\n        )}\n      </div>\n    );\n  }\n  return null;\n};\n\nexport default EmojiPicker;\n","// @ts-check\nimport React, { useContext } from 'react';\n// @ts-expect-error\nimport { ImagePreviewer, FilePreviewer } from 'react-file-utils';\nimport { ChannelContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").MessageInputUploadsProps>} */\nconst UploadsPreview = ({\n  imageOrder,\n  imageUploads,\n  removeImage,\n  uploadImage,\n  uploadNewFiles,\n  numberOfUploads,\n  fileOrder,\n  fileUploads,\n  removeFile,\n  uploadFile,\n}) => {\n  const channelContext = useContext(ChannelContext);\n  return (\n    <>\n      {imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={imageOrder.map((id) => imageUploads[id])}\n          handleRemove={removeImage}\n          handleRetry={uploadImage}\n          handleFiles={uploadNewFiles}\n          multiple={channelContext.multipleUploads}\n          disabled={\n            channelContext.maxNumberOfFiles !== undefined &&\n            numberOfUploads >= channelContext.maxNumberOfFiles\n          }\n        />\n      )}\n      {fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={fileOrder.map((id) => fileUploads[id])}\n          handleRemove={removeFile}\n          handleRetry={uploadFile}\n          handleFiles={uploadNewFiles}\n        />\n      )}\n    </>\n  );\n};\n\nexport default UploadsPreview;\n","import React, { useContext } from 'react';\nimport { TranslationContext } from '../../context';\n\n/**\n * @type { React.FC }\n */\nexport const EmojiIconLarge = () => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <svg width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\n      <title>{t('Open emoji picker')}</title>\n      <path\n        d=\"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\n/**\n * @type { React.FC }\n */\nexport const EmojiIconSmall = () => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n      <title>{t('Open emoji picker')}</title>\n      <path\n        d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\n/**\n * @type { React.FC }\n */\nexport const FileUploadIcon = () => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n      <title>{t('Attach files')}</title>\n      <path\n        d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n        fillRule=\"nonzero\"\n      />\n    </svg>\n  );\n};\n\n/**\n * @type { React.FC }\n */\nexport const FileUploadIconFlat = () => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n      <title>{t('Attach files')}</title>\n      <path\n        d=\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\"\n        fillRule=\"nonzero\"\n      />\n    </svg>\n  );\n};\n\n/**\n * @type { React.FC<import('types').SendButtonProps> }\n */\nexport default function SendButton({ sendMessage }) {\n  const { t } = useContext(TranslationContext);\n  return (\n    <button className=\"str-chat__send-button\" onClick={sendMessage}>\n      <svg\n        width=\"18\"\n        height=\"17\"\n        viewBox=\"0 0 18 17\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <title>{t('Send')}</title>\n        <path\n          d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n          fillRule=\"evenodd\"\n          fill=\"#006cff\"\n        />\n      </svg>\n    </button>\n  );\n}\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  ImageDropzone,\n  FileUploadButton,\n  // @ts-expect-error\n} from 'react-file-utils';\n\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport EmojiPicker from './EmojiPicker';\nimport UploadsPreview from './UploadsPreview';\nimport DefaultSendButton, {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIcon as DefaultFileUploadIcon,\n} from './icons';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputLarge = (props) => {\n  const {\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    SendButton = DefaultSendButton,\n  } = props;\n\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const messageInput = useMessageInput(props);\n\n  /**\n   * @typedef {import(\"stream-chat\").Event} ClientEvent\n   * @param {{ [userid: string]: ClientEvent } | {}} typingUsers\n   */\n  const constructTypingString = (typingUsers) => {\n    const otherTypingUsers = Object.values(typingUsers)\n      .filter(({ user }) => channelContext.client?.user?.id !== user?.id)\n      .map(({ user }) => user?.name || user?.id);\n    if (otherTypingUsers.length === 0) return '';\n    if (otherTypingUsers.length === 1) {\n      return t('{{ user }} is typing...', { user: otherTypingUsers[0] });\n    }\n    if (otherTypingUsers.length === 2) {\n      // joins all with \"and\" but =no commas\n      // example: \"bob and sam\"\n      return t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: otherTypingUsers[0],\n        secondUser: otherTypingUsers[1],\n      });\n    }\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, and sam\"\n    return t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n      commaSeparatedUsers: otherTypingUsers.slice(0, -1).join(', '),\n      lastUser: otherTypingUsers[otherTypingUsers.length - 1],\n    });\n  };\n\n  return (\n    <div className=\"str-chat__input-large\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div className=\"str-chat__input\">\n          <div className=\"str-chat__input--textarea-wrapper\">\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onChange={messageInput.handleChange}\n              onSelectItem={messageInput.onSelectItem}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              disableMentions={props.disableMentions}\n              SuggestionList={props.SuggestionList}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n\n            {messageInput.isUploadEnabled && (\n              <div\n                className=\"str-chat__fileupload-wrapper\"\n                data-testid=\"fileinput\"\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  multiple={channelContext.multipleUploads}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  accepts={channelContext.acceptedFiles}\n                  handleFiles={messageInput.uploadNewFiles}\n                >\n                  <span className=\"str-chat__input-fileupload\">\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className=\"str-chat__input-emojiselect\"\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                ref={messageInput.emojiPickerRef}\n                role=\"button\"\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} />\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n        <div>\n          <div className=\"str-chat__input-footer\">\n            <span\n              className={`str-chat__input-footer--count ${\n                !channelContext.watcher_count\n                  ? 'str-chat__input-footer--count--hidden'\n                  : ''\n              }`}\n            >\n              {t('{{ watcherCount }} online', {\n                watcherCount: channelContext.watcher_count,\n              })}\n            </span>\n            <span className=\"str-chat__input-footer--typing\">\n              {constructTypingString(channelContext.typing || {})}\n            </span>\n          </div>\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputLarge.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** Disable mentions in textarea */\n  disableMentions: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: /** @type {PropTypes.Validator<React.TextareaHTMLAttributes<import('types').AnyType>>} */ (PropTypes.object),\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for emoji button in input.\n   *\n   * Defaults to and accepts same props as: [EmojiIconSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  EmojiIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file upload button in input.\n   *\n   * Defaults to and accepts same props as: [FileUploadIcon](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  FileUploadIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  SendButton: /** @type {PropTypes.Validator<React.FC<import('types').SendButtonProps>>} */ (PropTypes.elementType),\n  /** Optional UI component prop to override the default List component that displays suggestions */\n  SuggestionList: /** @type {PropTypes.Validator<React.ElementType<import('types').SuggestionListProps>>} */ (PropTypes.elementType),\n};\n\nMessageInputLarge.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputLarge;\n","import React from 'react';\nimport MessageInputLarge from './MessageInputLarge';\n\nconst MessageInput = (props) => {\n  const { Input } = props;\n  return <Input {...props} />;\n};\n\nMessageInput.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  additionalTextareaProps: {},\n};\n\nexport default React.memo(MessageInput);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-expect-error\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\n\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport DefaultSendButton, {\n  EmojiIconLarge as DefaultEmojiIcon,\n  FileUploadIconFlat as DefaultFileUploadIcon,\n} from './icons';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputFlat = (props) => {\n  const {\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    SendButton = DefaultSendButton,\n  } = props;\n\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const messageInput = useMessageInput(props);\n\n  return (\n    <div\n      className={`str-chat__input-flat ${\n        SendButton ? 'str-chat__input-flat--send-button-active' : null\n      }`}\n    >\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div className=\"str-chat__input-flat-wrapper\">\n          <div className=\"str-chat__input-flat--textarea-wrapper\">\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className=\"str-chat__input-flat-emojiselect\"\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                role=\"button\"\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} />\n\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onSelectItem={messageInput.onSelectItem}\n              onChange={messageInput.handleChange}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              disableMentions={props.disableMentions}\n              SuggestionList={props.SuggestionList}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n\n            {messageInput.isUploadEnabled && (\n              <div\n                className=\"str-chat__fileupload-wrapper\"\n                data-testid=\"fileinput\"\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  multiple={channelContext.multipleUploads}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  accepts={channelContext.acceptedFiles}\n                  handleFiles={messageInput.uploadNewFiles}\n                >\n                  <span className=\"str-chat__input-flat-fileupload\">\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputFlat.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** Disable mentions in textarea */\n  disableMentions: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: /** @type {PropTypes.Validator<React.TextareaHTMLAttributes<import('types').AnyType>>} */ (PropTypes.object),\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for emoji button in input.\n   *\n   * Defaults to and accepts same props as: [EmojiIconLarge](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  EmojiIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file upload button in input.\n   *\n   * Defaults to and accepts same props as: [FileUploadIconFlat](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  FileUploadIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  SendButton: /** @type {PropTypes.Validator<React.FC<import('types').SendButtonProps>>} */ (PropTypes.elementType),\n  /** Optional UI component prop to override the default List component that displays suggestions */\n  SuggestionList: /** @type {PropTypes.Validator<React.ElementType<import('types').SuggestionListProps>>} */ (PropTypes.elementType),\n};\n\nMessageInputFlat.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputFlat;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-expect-error\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport DefaultSendButton, {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIcon as DefaultFileUploadIcon,\n} from './icons';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputSmall = (props) => {\n  const {\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n    SendButton = DefaultSendButton,\n  } = props;\n\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const messageInput = useMessageInput(props);\n\n  return (\n    <div className=\"str-chat__small-message-input__wrapper\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div\n          className={`str-chat__small-message-input ${\n            SendButton\n              ? 'str-chat__small-message-input--send-button-active'\n              : null\n          }`}\n        >\n          <div className=\"str-chat__small-message-input--textarea-wrapper\">\n            {messageInput.isUploadEnabled && (\n              <UploadsPreview {...messageInput} />\n            )}\n\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onChange={messageInput.handleChange}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              onSelectItem={messageInput.onSelectItem}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              disableMentions={props.disableMentions}\n              SuggestionList={props.SuggestionList}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n\n            {messageInput.isUploadEnabled && (\n              <div\n                className=\"str-chat__fileupload-wrapper\"\n                data-testid=\"fileinput\"\n              >\n                <Tooltip>\n                  {messageInput.maxFilesLeft\n                    ? t('Attach files')\n                    : t(\"You've reached the maximum number of files\")}\n                </Tooltip>\n                <FileUploadButton\n                  multiple={channelContext.multipleUploads}\n                  disabled={messageInput.maxFilesLeft === 0}\n                  accepts={channelContext.acceptedFiles}\n                  handleFiles={messageInput.uploadNewFiles}\n                >\n                  <span className=\"str-chat__small-message-input-fileupload\">\n                    <FileUploadIcon />\n                  </span>\n                </FileUploadButton>\n              </div>\n            )}\n\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>\n                {messageInput.emojiPickerIsOpen\n                  ? t('Close emoji picker')\n                  : t('Open emoji picker')}\n              </Tooltip>\n              <span\n                className=\"str-chat__small-message-input-emojiselect\"\n                onClick={\n                  messageInput.emojiPickerIsOpen\n                    ? messageInput.closeEmojiPicker\n                    : messageInput.openEmojiPicker\n                }\n                onKeyDown={messageInput.handleEmojiKeyDown}\n                role=\"button\"\n                tabIndex={0}\n              >\n                <EmojiIcon />\n              </span>\n            </div>\n            <EmojiPicker {...messageInput} small />\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputSmall.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** Disable mentions in textarea */\n  disableMentions: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: /** @type {PropTypes.Validator<React.TextareaHTMLAttributes<import('types').AnyType>>} */ (PropTypes.object),\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for emoji button in input.\n   *\n   * Defaults to and accepts same props as: [EmojiIconSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  EmojiIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file upload button in input.\n   *\n   * Defaults to and accepts same props as: [FileUploadIcon](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  FileUploadIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  SendButton: /** @type {PropTypes.Validator<React.FC<import('types').SendButtonProps>>} */ (PropTypes.elementType),\n  /** Optional UI component prop to override the default List component that displays suggestions */\n  SuggestionList: /** @type {PropTypes.Validator<React.ElementType<import('types').SuggestionListProps>>} */ (PropTypes.elementType),\n};\n\nMessageInputSmall.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputSmall;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport EmojiPicker from './EmojiPicker';\nimport DefaultSendButton, { EmojiIconLarge as DefaultEmojiIcon } from './icons';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputSimple = (props) => {\n  const {\n    EmojiIcon = DefaultEmojiIcon,\n    SendButton = DefaultSendButton,\n  } = props;\n\n  const { t } = useContext(TranslationContext);\n\n  const messageInput = useMessageInput(props);\n\n  return (\n    <div\n      className={`str-chat__input-flat ${\n        SendButton ? 'str-chat__input-flat--send-button-active' : null\n      }`}\n    >\n      <div className=\"str-chat__input-flat-wrapper\">\n        <div className=\"str-chat__input-flat--textarea-wrapper\">\n          <ChatAutoComplete\n            commands={messageInput.getCommands()}\n            innerRef={messageInput.textareaRef}\n            handleSubmit={messageInput.handleSubmit}\n            onSelectItem={messageInput.onSelectItem}\n            onChange={messageInput.handleChange}\n            value={messageInput.text}\n            rows={1}\n            maxRows={props.maxRows}\n            placeholder={t('Type your message')}\n            onPaste={messageInput.onPaste}\n            triggers={props.autocompleteTriggers}\n            grow={props.grow}\n            disabled={props.disabled}\n            disableMentions={props.disableMentions}\n            SuggestionList={props.SuggestionList}\n            additionalTextareaProps={props.additionalTextareaProps}\n          />\n\n          <div className=\"str-chat__emojiselect-wrapper\">\n            <Tooltip>\n              {messageInput.emojiPickerIsOpen\n                ? t('Close emoji picker')\n                : t('Open emoji picker')}\n            </Tooltip>\n            <span\n              className=\"str-chat__input-flat-emojiselect\"\n              onClick={\n                messageInput.emojiPickerIsOpen\n                  ? messageInput.closeEmojiPicker\n                  : messageInput.openEmojiPicker\n              }\n              onKeyDown={messageInput.handleEmojiKeyDown}\n              role=\"button\"\n              tabIndex={0}\n            >\n              <EmojiIcon />\n            </span>\n          </div>\n          <EmojiPicker {...messageInput} />\n        </div>\n        {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n      </div>\n    </div>\n  );\n};\n\nMessageInputSimple.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** Disable mentions in textarea */\n  disableMentions: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attributes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: /** @type {PropTypes.Validator<React.TextareaHTMLAttributes<import('types').AnyType>>} */ (PropTypes.object),\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for emoji button in input.\n   *\n   * Defaults to and accepts same props as: [EmojiIconLarge](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  EmojiIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  SendButton: /** @type {PropTypes.Validator<React.FC<import('types').SendButtonProps>>} */ (PropTypes.elementType),\n  /** Optional UI component prop to override the default List component that displays suggestions */\n  SuggestionList: /** @type {PropTypes.Validator<React.ElementType<import('types').SuggestionListProps>>} */ (PropTypes.elementType),\n};\n\nMessageInputSimple.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputSimple;\n","// @ts-check\nimport React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-expect-error\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\nimport { Tooltip } from '../Tooltip';\n\nimport { ChannelContext, TranslationContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport {\n  EmojiIconSmall as DefaultEmojiIcon,\n  FileUploadIcon as DefaultFileUploadIcon,\n} from './icons';\nimport { KEY_CODES } from '../AutoCompleteTextarea';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst EditMessageForm = (props) => {\n  const {\n    clearEditingState,\n    EmojiIcon = DefaultEmojiIcon,\n    FileUploadIcon = DefaultFileUploadIcon,\n  } = props;\n\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const messageInput = useMessageInput(props);\n\n  useEffect(() => {\n    /** @type {(event: KeyboardEvent) => void} Typescript syntax */\n    const onKeyDown = (event) => {\n      if (event.keyCode === KEY_CODES.ESC && clearEditingState)\n        clearEditingState();\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [clearEditingState]);\n\n  return (\n    <div className=\"str-chat__edit-message-form\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          !messageInput.isUploadEnabled || messageInput.maxFilesLeft === 0\n        }\n        maxNumberOfFiles={messageInput.maxFilesLeft}\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <form onSubmit={messageInput.handleSubmit}>\n          {messageInput.isUploadEnabled && <UploadsPreview {...messageInput} />}\n          <EmojiPicker {...messageInput} small />\n          <ChatAutoComplete\n            commands={messageInput.getCommands()}\n            innerRef={messageInput.textareaRef}\n            handleSubmit={messageInput.handleSubmit}\n            onChange={messageInput.handleChange}\n            onSelectItem={messageInput.onSelectItem}\n            placeholder={t('Type your message')}\n            value={messageInput.text}\n            rows={1}\n            maxRows={props.maxRows}\n            onPaste={messageInput.onPaste}\n            grow={props.grow}\n            additionalTextareaProps={props.additionalTextareaProps}\n          />\n          <div className=\"str-chat__message-team-form-footer\">\n            <div className=\"str-chat__edit-message-form-options\">\n              <span\n                className=\"str-chat__input-emojiselect\"\n                onClick={messageInput.openEmojiPicker}\n              >\n                <EmojiIcon />\n              </span>\n              {messageInput.isUploadEnabled && (\n                <div\n                  className=\"str-chat__fileupload-wrapper\"\n                  data-testid=\"fileinput\"\n                >\n                  <Tooltip>\n                    {messageInput.maxFilesLeft\n                      ? t('Attach files')\n                      : t(\"You've reached the maximum number of files\")}\n                  </Tooltip>\n                  <FileUploadButton\n                    multiple={channelContext.multipleUploads}\n                    disabled={messageInput.maxFilesLeft === 0}\n                    accepts={channelContext.acceptedFiles}\n                    handleFiles={messageInput.uploadNewFiles}\n                  >\n                    <span className=\"str-chat__input-fileupload\">\n                      <FileUploadIcon />\n                    </span>\n                  </FileUploadButton>\n                </div>\n              )}\n            </div>\n            <div>\n              <button\n                onClick={() => {\n                  if (props.clearEditingState) {\n                    props.clearEditingState();\n                  }\n                }}\n              >\n                {t('Cancel')}\n              </button>\n              <button type=\"submit\">{t('Send')}</button>\n            </div>\n          </div>\n        </form>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nEditMessageForm.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for emoji button in input.\n   *\n   * Defaults to and accepts same props as: [EmojiIconSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  EmojiIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file upload button in input.\n   *\n   * Defaults to and accepts same props as: [FileUploadIcon](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/icons.js)\n   * */\n  FileUploadIcon: /** @type {PropTypes.Validator<React.FC>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  SendButton: /** @type {PropTypes.Validator<React.FC<import('types').SendButtonProps>>} */ (PropTypes.elementType),\n  /**\n   * Clears edit state for current message (passed down from message component)\n   */\n  clearEditingState: PropTypes.func,\n};\n\nEditMessageForm.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  additionalTextareaProps: {},\n};\n\nexport default EditMessageForm;\n","import React, {\n  useState,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  useEffect,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { getStrippedEmojiData } from '../Channel/emojiData';\nimport { ChannelContext } from '../../context';\n\n/** @type {React.ForwardRefRenderFunction<HTMLDivElement | null, import(\"types\").ReactionSelectorProps>} */\nconst ReactionSelectorWithRef = (\n  {\n    Avatar = DefaultAvatar,\n    latest_reactions,\n    reaction_counts,\n    reactionOptions: reactionOptionsProp,\n    reverse = false,\n    handleReaction,\n    detailedView = true,\n  },\n  ref,\n) => {\n  const { emojiConfig } = useContext(ChannelContext);\n\n  const { defaultMinimalEmojis, Emoji, emojiData: fullEmojiData, emojiSetDef } =\n    emojiConfig || {};\n\n  const emojiData = getStrippedEmojiData(fullEmojiData);\n  const reactionOptions = reactionOptionsProp || defaultMinimalEmojis;\n  const [tooltipReactionType, setTooltipReactionType] = useState(null);\n  const [tooltipPositions, setTooltipPositions] = useState(\n    /** @type {{ tooltip: number, arrow: number } | null} */ (null),\n  );\n  const containerRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const tooltipRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const targetRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n\n  // @ts-expect-error because it's okay for our ref to be null in the parent component.\n  useImperativeHandle(ref, () => containerRef.current);\n\n  const showTooltip = useCallback((e, reactionType) => {\n    targetRef.current = e.target;\n    setTooltipReactionType(reactionType);\n  }, []);\n\n  const hideTooltip = useCallback(() => {\n    setTooltipReactionType(null);\n    setTooltipPositions(null);\n  }, []);\n\n  useEffect(() => {\n    if (tooltipReactionType) {\n      const tooltip = tooltipRef.current?.getBoundingClientRect();\n      const target = targetRef.current?.getBoundingClientRect();\n      const container = containerRef.current?.getBoundingClientRect();\n\n      if (!tooltip || !target || !container) return;\n\n      const tooltipPosition =\n        tooltip.width === container.width || tooltip.x < container.x\n          ? 0\n          : target.left + target.width / 2 - container.left - tooltip.width / 2;\n      const arrowPosition =\n        target.x - tooltip.x + target.width / 2 - tooltipPosition;\n      setTooltipPositions({\n        tooltip: tooltipPosition,\n        arrow: arrowPosition,\n      });\n    }\n  }, [tooltipReactionType, containerRef]);\n\n  /**\n   * @param {string | null} type\n   * @returns {string[] | undefined}\n   * */\n  const getUsersPerReactionType = (type) =>\n    /** @type {string[] | undefined} */ (latest_reactions\n      ?.map((reaction) => {\n        if (reaction.type === type) {\n          return reaction.user?.name || reaction.user?.id;\n        }\n        return null;\n      })\n      .filter(Boolean));\n\n  /**\n   * @param {string | null} type\n   * @returns {import(\"types\").StreamChatReactClient['user'] | undefined}\n   * */\n  const getLatestUserForReactionType = (type) =>\n    latest_reactions?.find(\n      (reaction) => reaction.type === type && !!reaction.user,\n    )?.user || undefined;\n\n  return (\n    <div\n      data-testid=\"reaction-selector\"\n      className={`str-chat__reaction-selector ${\n        reverse ? 'str-chat__reaction-selector--reverse' : ''\n      }`}\n      ref={containerRef}\n    >\n      {!!tooltipReactionType && detailedView && (\n        <div\n          className=\"str-chat__reaction-selector-tooltip\"\n          ref={tooltipRef}\n          style={{\n            left: tooltipPositions?.tooltip,\n            visibility: tooltipPositions ? 'visible' : 'hidden',\n          }}\n        >\n          <div className=\"arrow\" style={{ left: tooltipPositions?.arrow }} />\n          {getUsersPerReactionType(tooltipReactionType)?.map(\n            (user, i, users) => (\n              <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n                {`${user}${i < users.length - 1 ? ', ' : ''}`}\n              </span>\n            ),\n          )}\n        </div>\n      )}\n      <ul className=\"str-chat__message-reactions-list\">\n        {reactionOptions.map((reactionOption) => {\n          const latestUser = getLatestUserForReactionType(reactionOption.id);\n\n          const count = reaction_counts && reaction_counts[reactionOption.id];\n          return (\n            <li\n              key={`item-${reactionOption.id}`}\n              className=\"str-chat__message-reactions-list-item\"\n              data-text={reactionOption.id}\n              onClick={() =>\n                handleReaction && handleReaction(reactionOption.id)\n              }\n            >\n              {!!count && detailedView && (\n                <React.Fragment>\n                  <div\n                    className=\"latest-user\"\n                    onClick={hideTooltip}\n                    onMouseEnter={(e) => showTooltip(e, reactionOption.id)}\n                    onMouseLeave={hideTooltip}\n                  >\n                    {latestUser ? (\n                      <Avatar\n                        image={latestUser.image}\n                        size={20}\n                        name={latestUser.name}\n                      />\n                    ) : (\n                      <div className=\"latest-user-not-found\" />\n                    )}\n                  </div>\n                </React.Fragment>\n              )}\n              {Emoji && (\n                <Emoji\n                  // @ts-expect-error because emoji-mart types don't support specifying\n                  // spriteUrl instead of imageUrl, while the implementation does\n                  emoji={reactionOption}\n                  {...emojiSetDef}\n                  data={emojiData}\n                />\n              )}\n\n              {Boolean(count) && detailedView && (\n                <span className=\"str-chat__message-reactions-list-item__count\">\n                  {count || ''}\n                </span>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nconst ReactionSelector = React.forwardRef(ReactionSelectorWithRef);\n\nReactionSelector.propTypes = {\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Array of latest reactions.\n   * Reaction object has following structure:\n   *\n   * ```json\n   * {\n   *  \"type\": \"love\",\n   *  \"user_id\": \"demo_user_id\",\n   *  \"user\": {\n   *    ...userObject\n   *  },\n   *  \"created_at\": \"datetime\";\n   * }\n   * ```\n   * */\n  latest_reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func.isRequired,\n  /** Enable the avatar display */\n  detailedView: PropTypes.bool,\n};\n\nexport default React.memo(ReactionSelector);\n","import React, { useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getStrippedEmojiData } from '../Channel/emojiData';\nimport { ChannelContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").ReactionsListProps>} */\nconst ReactionsList = ({\n  reactions,\n  reaction_counts,\n  reactionOptions: reactionOptionsProp,\n  reverse = false,\n  onClick,\n}) => {\n  const { emojiConfig } = useContext(ChannelContext);\n\n  const { defaultMinimalEmojis, Emoji, emojiData: fullEmojiData, emojiSetDef } =\n    emojiConfig || {};\n\n  const emojiData = useMemo(() => getStrippedEmojiData(fullEmojiData), [\n    fullEmojiData,\n  ]);\n  const reactionOptions = reactionOptionsProp || defaultMinimalEmojis;\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  /** @param {string} type */\n  const getOptionForType = (type) =>\n    reactionOptions.find((option) => option.id === type);\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set();\n    reactions.forEach(({ type }) => {\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n\n  return (\n    <div\n      data-testid=\"reaction-list\"\n      className={`str-chat__reaction-list ${\n        reverse ? 'str-chat__reaction-list--reverse' : ''\n      }`}\n      onClick={onClick}\n    >\n      <ul>\n        {getReactionTypes().map((reactionType) => {\n          const emojiDefinition = getOptionForType(reactionType);\n          return emojiDefinition ? (\n            <li key={emojiDefinition.id}>\n              {Emoji && (\n                <Emoji\n                  // emoji-mart type defs don't support spriteSheet use case\n                  // (but implementation does)\n                  // @ts-expect-error\n                  emoji={emojiDefinition}\n                  {...emojiSetDef}\n                  size={16}\n                  data={emojiData}\n                />\n              )}\n              &nbsp;\n            </li>\n          ) : null;\n        })}\n        <li>\n          <span className=\"str-chat__reaction-list--counter\">\n            {getTotalReactionCount()}\n          </span>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nReactionsList.propTypes = {\n  reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nexport default React.memo(ReactionsList);\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getStrippedEmojiData } from '../Channel/emojiData';\nimport { ChannelContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").SimpleReactionsListProps>} */\nconst SimpleReactionsList = ({\n  reactions,\n  reaction_counts,\n  reactionOptions: reactionOptionsProp,\n  handleReaction,\n}) => {\n  const { emojiConfig } = useContext(ChannelContext);\n\n  const {\n    defaultMinimalEmojis,\n    Emoji,\n    emojiData: defaultEmojiData,\n    emojiSetDef,\n  } = emojiConfig || {};\n\n  const emojiData = getStrippedEmojiData(defaultEmojiData);\n  const [tooltipReactionType, setTooltipReactionType] = useState(null);\n  /** @type{import('types').MinimalEmojiInterface[]} */\n  const reactionOptions = reactionOptionsProp || defaultMinimalEmojis;\n\n  if (!reactions || reactions.length === 0) {\n    return null;\n  }\n\n  /** @param {string | null} type */\n  const getUsersPerReactionType = (type) =>\n    reactions\n      ?.map((reaction) => {\n        if (reaction.type === type) {\n          return reaction.user?.name || reaction.user?.id;\n        }\n        return null;\n      })\n      .filter(Boolean);\n\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set();\n    reactions.forEach(({ type }) => {\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n\n  /** @param {string} type */\n  const getOptionForType = (type) =>\n    reactionOptions.find((option) => option.id === type);\n\n  return (\n    <ul\n      data-testid=\"simple-reaction-list\"\n      className=\"str-chat__simple-reactions-list\"\n      onMouseLeave={() => setTooltipReactionType(null)}\n    >\n      {getReactionTypes().map((reactionType, i) => {\n        const emojiDefinition = getOptionForType(reactionType);\n        return emojiDefinition ? (\n          <li\n            className=\"str-chat__simple-reactions-list-item\"\n            key={`${emojiDefinition?.id}-${i}`}\n            onClick={() => handleReaction && handleReaction(reactionType)}\n          >\n            <span onMouseEnter={() => setTooltipReactionType(reactionType)}>\n              {Emoji && (\n                <Emoji\n                  // emoji-mart type defs don't support spriteSheet use case\n                  // (but implementation does)\n                  // @ts-expect-error\n                  emoji={emojiDefinition}\n                  {...emojiSetDef}\n                  size={13}\n                  data={emojiData}\n                />\n              )}\n              &nbsp;\n            </span>\n\n            {tooltipReactionType === getOptionForType(reactionType)?.id && (\n              <div className=\"str-chat__simple-reactions-list-tooltip\">\n                <div className=\"arrow\" />\n                {getUsersPerReactionType(tooltipReactionType)?.join(', ')}\n              </div>\n            )}\n          </li>\n        ) : null;\n      })}\n      {reactions?.length !== 0 && (\n        <li className=\"str-chat__simple-reactions-list-item--last-number\">\n          {getTotalReactionCount()}\n        </li>\n      )}\n    </ul>\n  );\n};\n\nSimpleReactionsList.propTypes = {\n  reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func,\n};\n\nexport default React.memo(SimpleReactionsList);\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\nexport const handleActionWarning = `Action handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n/**\n * @type {import('types').useActionHandler}\n */\nexport const useActionHandler = (message) => {\n  const { channel, updateMessage, removeMessage } = useContext(ChannelContext);\n  return async (dataOrName, value, event) => {\n    if (event) event.preventDefault();\n    if (!message || !updateMessage || !removeMessage || !channel) {\n      console.warn(handleActionWarning);\n      return;\n    }\n    const messageID = message.id;\n\n    // deprecated: value&name should be removed in favor of data obj\n    /** @type {Record<string, any>} */\n    let formData = {};\n    if (typeof dataOrName === 'string') formData[dataOrName] = value;\n    else formData = { ...dataOrName };\n\n    if (messageID) {\n      const data = await channel.sendAction(messageID, formData);\n\n      if (data?.message) {\n        updateMessage(data.message);\n      } else {\n        removeMessage(message);\n      }\n    }\n  };\n};\n","import { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\n\n/** @type {(width: number) => {device: 'mobile' | 'tablet' | 'full'; width: number}} */\nconst getDeviceWidth = (width) => {\n  if (width < 768) return { device: 'mobile', width };\n  if (width < 1024) return { device: 'tablet', width };\n  return { device: 'full', width };\n};\n\nexport const useBreakpoint = () => {\n  const [breakpoint, setBreakpoint] = useState(\n    getDeviceWidth(window.innerWidth),\n  );\n\n  useEffect(() => {\n    const getInnerWidth = throttle(\n      () => setBreakpoint(getDeviceWidth(window.innerWidth)),\n      200,\n    );\n\n    window.addEventListener('resize', getInnerWidth);\n    return () => window.removeEventListener('resize', getInnerWidth);\n  }, []);\n\n  return breakpoint;\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {import('types').useDeleteHandler}\n */\nexport const useDeleteHandler = (message) => {\n  const { updateMessage, client } = useContext(ChannelContext);\n  return async (event) => {\n    event.preventDefault();\n    if (!message?.id || !client || !updateMessage) {\n      return;\n    }\n    const data = await client.deleteMessage(message.id);\n    updateMessage(data.message);\n  };\n};\n","// @ts-check\nimport { useState } from 'react';\n\n/**\n * @type {(\n *   customInitialState?: boolean,\n *   customSetEditing?: (event?: React.MouseEvent<HTMLElement>) => void,\n *   customClearEditingHandler?: (event?: React.MouseEvent<HTMLElement>) => void\n * ) => {\n *   editing: boolean,\n *   setEdit: (event?: React.MouseEvent<HTMLElement>) => void,\n *   clearEdit: (event?: React.MouseEvent<HTMLElement>) => void\n * }}\n */\nexport const useEditHandler = (\n  customInitialState = false,\n  customSetEditing,\n  customClearEditingHandler,\n) => {\n  const [editing, setEditing] = useState(customInitialState);\n\n  const setEdit =\n    customSetEditing ||\n    ((event) => {\n      if (event?.preventDefault) {\n        event.preventDefault();\n      }\n      setEditing(true);\n    });\n  const clearEdit =\n    customClearEditingHandler ||\n    ((event) => {\n      if (event?.preventDefault) {\n        event.preventDefault();\n      }\n      setEditing(false);\n    });\n  return { editing, setEdit, clearEdit };\n};\n","// @ts-check\nimport deepequal from 'react-fast-compare';\nimport PropTypes from 'prop-types';\n\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n *\n * @type {(func: Function, args: any) => null | string}\n */\nexport const validateAndGetMessage = (func, args) => {\n  if (!func || typeof func !== 'function') return null;\n\n  const returnValue = func(...args);\n\n  if (typeof returnValue !== 'string') return null;\n\n  return returnValue;\n};\n\n/**\n * Tell if the owner of the current message is muted\n *\n * @type {(message?: import('stream-chat').MessageResponse, mutes?: import('stream-chat').Mute[]) => boolean}\n */\nexport const isUserMuted = (message, mutes) => {\n  if (!mutes || !message) {\n    return false;\n  }\n\n  const userMuted = mutes.filter(\n    /** @type {(el: import('stream-chat').Mute) => boolean} Typescript syntax */\n    (el) => el.target.id === message.user?.id,\n  );\n  return !!userMuted.length;\n};\n\nexport const MESSAGE_ACTIONS = {\n  edit: 'edit',\n  delete: 'delete',\n  flag: 'flag',\n  mute: 'mute',\n  pin: 'pin',\n  react: 'react',\n  reply: 'reply',\n};\n\nexport const defaultPinPermissions = {\n  commerce: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false,\n  },\n  gaming: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false,\n  },\n  livestream: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n  messaging: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n  team: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false,\n  },\n};\n\n/**\n * @typedef {{\n *   canEdit?: boolean;\n *   canDelete?: boolean;\n *   canMute?: boolean;\n *   canFlag?: boolean;\n *   canPin?: boolean;\n *   canReact?: boolean;\n *   canReply?: boolean;\n * }} Capabilities\n * @type {(actions: string[] | boolean, capabilities: Capabilities) => string[]} Typescript syntax\n */\nexport const getMessageActions = (\n  actions,\n  { canDelete, canFlag, canEdit, canMute, canPin, canReact, canReply },\n) => {\n  const messageActionsAfterPermission = [];\n  let messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = [...actions];\n  } else {\n    return [];\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  if (canPin && messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.pin);\n  }\n\n  if (canReact && messageActions.indexOf(MESSAGE_ACTIONS.react) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.react);\n  }\n\n  if (canReply && messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.reply);\n  }\n\n  return messageActionsAfterPermission;\n};\n\n/**\n * @typedef {Pick<import('types').MessageComponentProps, 'message' | 'readBy' | 'groupStyles' | 'lastReceivedId' | 'messageListRect'>} MessageEqualProps\n * @type {(props: MessageEqualProps, nextProps: MessageEqualProps) => boolean} Typescript syntax\n */\nexport const areMessagePropsEqual = (props, nextProps) => {\n  return (\n    // Message content is equal\n    nextProps.message === props.message &&\n    // Message was read by someone\n    deepequal(nextProps.readBy, props.readBy) &&\n    // Group style changes (it often happens that the last 3 messages of a channel have different group styles)\n    deepequal(nextProps.groupStyles, props.groupStyles) &&\n    // @ts-expect-error\n    deepequal(nextProps.mutes, props.mutes) &&\n    // Last message received in the channel changes\n    deepequal(nextProps.lastReceivedId, props.lastReceivedId) &&\n    // User toggles edit state\n    // @ts-expect-error // TODO: fix\n    nextProps.editing === props.editing &&\n    // Message wrapper layout changes\n    nextProps.messageListRect === props.messageListRect\n  );\n};\n\n/**\n * @type {(nextProps: import('types').MessageComponentProps, props: import('types').MessageComponentProps ) => boolean} Typescript syntax\n */\nexport const shouldMessageComponentUpdate = (props, nextProps) => {\n  // Component should only update if:\n  return !areMessagePropsEqual(props, nextProps);\n};\n\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\nexport const messageHasReactions = (message) => {\n  return !!message?.latest_reactions && !!message.latest_reactions.length;\n};\n\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\nexport const messageHasAttachments = (message) => {\n  return !!message?.attachments && !!message.attachments.length;\n};\n\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\nexport const getImages = (message) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter(\n    /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n    (item) => item.type === 'image',\n  );\n};\n\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\nexport const getNonImageAttachments = (message) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter(\n    /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n    (item) => item.type !== 'image',\n  );\n};\n\n/**\n * @typedef {Array<import('stream-chat').UserResponse<import('types').StreamChatReactUserType>>} ReadByUsers\n * @type {(\n *   users: ReadByUsers,\n *   t: import('types').TranslationContextValue['t'],\n *   client: import('types').ChannelContextValue['client']\n * ) => string}\n */\nexport const getReadByTooltipText = (users, t, client) => {\n  let outStr = '';\n  if (!t) {\n    throw new Error(\n      '`getReadByTooltipText was called, but translation function is not available`',\n    );\n  }\n  // first filter out client user, so restLength won't count it\n  const otherUsers = users\n    .filter((item) => item && client?.user && item.id !== client.user.id)\n    .map((item) => item.name || item.id);\n\n  const slicedArr = otherUsers.slice(0, 5);\n  const restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = `${slicedArr[0]} `;\n  } else if (slicedArr.length === 2) {\n    // joins all with \"and\" but =no commas\n    // example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1],\n    });\n  } else if (slicedArr.length > 2) {\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      const lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser,\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength,\n      });\n    }\n  }\n\n  return outStr;\n};\n\nexport const MessagePropTypes = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  html: PropTypes.string.isRequired,\n  created_at: PropTypes.instanceOf(Date).isRequired,\n  updated_at: PropTypes.instanceOf(Date).isRequired,\n}).isRequired;\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext, TranslationContext } from '../../../context';\nimport { validateAndGetMessage } from '../utils';\n\nexport const missingUseFlagHandlerParameterWarning =\n  'useFlagHandler was called but it is missing one or more necessary parameters.';\n\n/**\n * @type {import('types').useFlagHandler}\n */\nexport const useFlagHandler = (message, notifications = {}) => {\n  const { client } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n  return async (event) => {\n    event.preventDefault();\n    const {\n      notify,\n      getSuccessNotification,\n      getErrorNotification,\n    } = notifications;\n\n    if (!client || !t || !notify || !message?.id) {\n      console.warn(missingUseFlagHandlerParameterWarning);\n      return;\n    }\n\n    try {\n      await client.flagMessage(message.id);\n      const successMessage =\n        getSuccessNotification &&\n        validateAndGetMessage(getSuccessNotification, [message]);\n      notify(\n        successMessage || t('Message has been successfully flagged'),\n        'success',\n      );\n    } catch (e) {\n      const errorMessage =\n        getErrorNotification &&\n        validateAndGetMessage(getErrorNotification, [message]);\n      notify(\n        errorMessage ||\n          t(\n            'Error adding flag: Either the flag already exist or there is issue with network connection ...',\n          ),\n        'error',\n      );\n    }\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/** @type {(fn: Function | undefined, message: import('stream-chat').MessageResponse | undefined) => React.EventHandler<React.SyntheticEvent>} * */\nfunction createEventHandler(fn, message) {\n  return (e) => {\n    if (typeof fn !== 'function' || !message?.mentioned_users) {\n      return;\n    }\n    fn(e, message.mentioned_users);\n  };\n}\n\n/**\n * @type {import('types').useMentionsHandler}\n */\nexport const useMentionsHandler = (message, customMentionHandler) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const {\n    onMentionsClick: channelOnMentionsClick,\n    onMentionsHover: channelOnMentionsHover,\n  } = useContext(ChannelContext);\n  const onMentionsClick =\n    customMentionHandler?.onMentionsClick ||\n    channelOnMentionsClick ||\n    (() => {});\n  const onMentionsHover =\n    customMentionHandler?.onMentionsHover ||\n    channelOnMentionsHover ||\n    (() => {});\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick: createEventHandler(onMentionsClick, message),\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover: createEventHandler(onMentionsHover, message),\n  };\n};\n\n/**\n * @type {import('types').useMentionsUIHandler}\n */\nexport const useMentionsUIHandler = (message, eventHandlers) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const { onMentionsClick, onMentionsHover } = useContext(ChannelContext);\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick:\n      eventHandlers?.onMentionsClick ||\n      createEventHandler(onMentionsClick, message),\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover:\n      eventHandlers?.onMentionsHover ||\n      createEventHandler(onMentionsHover, message),\n  };\n};\n","import { useEffect, useState } from 'react';\nimport { useBreakpoint } from './useBreakpoint';\n\nexport const useMobilePress = () => {\n  const [targetMessage, setTargetMessage] = useState(null);\n\n  const breakpoint = useBreakpoint();\n\n  /** @type {(event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void} */\n  const handleMobilePress = (event) => {\n    if (event.target instanceof HTMLElement && breakpoint.device === 'mobile') {\n      const closestMessage = event.target.closest('.str-chat__message-simple');\n\n      if (!closestMessage) return;\n      setTargetMessage(closestMessage);\n\n      if (closestMessage.classList.contains('mobile-press')) {\n        closestMessage.classList.remove('mobile-press');\n      } else {\n        closestMessage.classList.add('mobile-press');\n      }\n    }\n  };\n\n  useEffect(() => {\n    const handleClick = (event) => {\n      const isClickInside = targetMessage?.contains(event.target);\n\n      if (!isClickInside && targetMessage) {\n        targetMessage.classList.remove('mobile-press');\n      }\n    };\n\n    if (breakpoint.device === 'mobile') {\n      document.addEventListener('click', handleClick);\n    }\n    return () => document.removeEventListener('click', handleClick);\n  }, [breakpoint, targetMessage]);\n\n  return { handleMobilePress };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { isUserMuted, validateAndGetMessage } from '../utils';\nimport { ChannelContext, TranslationContext } from '../../../context';\n\nexport const missingUseMuteHandlerParamsWarning =\n  'useMuteHandler was called but it is missing one or more necessary parameter.';\n\n/**\n * @type {import('types').useMuteHandler}\n */\nexport const useMuteHandler = (message, notifications = {}) => {\n  const { client, mutes } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n  return async (event) => {\n    event.preventDefault();\n    const {\n      notify,\n      getSuccessNotification,\n      getErrorNotification,\n    } = notifications;\n\n    if (!t || !message?.user || !notify || !client) {\n      console.warn(missingUseMuteHandlerParamsWarning);\n      return;\n    }\n    if (!isUserMuted(message, mutes)) {\n      try {\n        await client.muteUser(message.user.id);\n        const successMessage =\n          getSuccessNotification &&\n          validateAndGetMessage(getSuccessNotification, [message.user]);\n\n        notify(\n          successMessage ||\n            t(`{{ user }} has been muted`, {\n              user: message.user.name || message.user.id,\n            }),\n          'success',\n        );\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message.user]);\n\n        notify(errorMessage || t('Error muting a user ...'), 'error');\n      }\n    } else {\n      try {\n        await client.unmuteUser(message.user.id);\n        const fallbackMessage = t(`{{ user }} has been unmuted`, {\n          user: message.user.name || message.user.id,\n        });\n        const successMessage =\n          (getSuccessNotification &&\n            validateAndGetMessage(getSuccessNotification, [message.user])) ||\n          fallbackMessage;\n\n        if (typeof successMessage === 'string') {\n          notify(successMessage, 'success');\n        }\n      } catch (e) {\n        const errorMessage =\n          (getErrorNotification &&\n            validateAndGetMessage(getErrorNotification, [message.user])) ||\n          t('Error unmuting a user ...');\n        if (typeof errorMessage === 'string') {\n          notify(errorMessage, 'error');\n        }\n      }\n    }\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {import('types').useOpenThreadHandler}\n */\nexport const useOpenThreadHandler = (message, customOpenThread) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const { openThread: channelOpenThread } = useContext(ChannelContext);\n\n  const openThread = customOpenThread || channelOpenThread;\n  return (event) => {\n    if (!openThread || !message) {\n      console.warn(\n        'Open thread handler was called but it is missing one of its parameters',\n      );\n      return;\n    }\n    openThread(message, event);\n  };\n};\n","import { useContext } from 'react';\nimport { validateAndGetMessage } from '../utils';\nimport { ChannelContext, TranslationContext } from '../../../context';\n\n/**\n * @type {import('types').usePinHandler}\n */\nexport const usePinHandler = (message, permissions, notifications) => {\n  const { notify, getErrorNotification } = notifications;\n\n  const { client, channel } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const canPin = () => {\n    if (\n      !client ||\n      !channel?.state ||\n      !permissions ||\n      !permissions[channel.type]\n    ) {\n      return false;\n    }\n\n    const currentChannelPermissions = permissions[channel.type];\n    const currentChannelMember = channel.state.members[client.userID];\n    const currentChannelWatcher = channel.state.watchers[client.userID];\n\n    if (\n      currentChannelPermissions &&\n      currentChannelPermissions[client.user?.role]\n    ) {\n      return true;\n    }\n\n    if (\n      currentChannelMember &&\n      currentChannelPermissions[currentChannelMember.role]\n    ) {\n      return true;\n    }\n\n    if (\n      currentChannelWatcher &&\n      currentChannelPermissions[currentChannelWatcher.role]\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const handlePin = async (event) => {\n    event.preventDefault();\n\n    if (!message) return;\n\n    if (!message.pinned) {\n      try {\n        await client.pinMessage(message);\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message.user]);\n\n        notify(errorMessage || t('Error pinning message'), 'error');\n      }\n    } else {\n      try {\n        await client.unpinMessage(message);\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message.user]);\n\n        notify(errorMessage || t('Error removing message pin'), 'error');\n      }\n    }\n  };\n\n  return { canPin: canPin(), handlePin };\n};\n","// @ts-check\nimport { useContext, useCallback, useEffect, useRef, useState } from 'react';\nimport { ChannelContext } from '../../../context';\n\nexport const reactionHandlerWarning = `Reaction handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n/**\n * @type {import('types').useReactionHandler}\n */\nexport const useReactionHandler = (message) => {\n  const { client, channel, updateMessage } = useContext(ChannelContext);\n\n  return async (reactionType, event) => {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    if (!updateMessage || !message || !channel || !client) {\n      console.warn(reactionHandlerWarning);\n      return;\n    }\n\n    let userExistingReaction = /** @type { import('stream-chat').ReactionResponse<Record<String, unknown>, import('types').StreamChatReactUserType> | null } */ (null);\n\n    const currentUser = client.userID;\n    if (message.own_reactions) {\n      message.own_reactions.forEach((reaction) => {\n        // own user should only ever contain the current user id\n        // just in case we check to prevent bugs with message updates from breaking reactions\n        if (\n          reaction.user &&\n          currentUser === reaction.user.id &&\n          reaction.type === reactionType\n        ) {\n          userExistingReaction = reaction;\n        } else if (reaction.user && currentUser !== reaction.user.id) {\n          console.warn(\n            `message.own_reactions contained reactions from a different user, this indicates a bug`,\n          );\n        }\n      });\n    }\n\n    const originalMessage = message;\n    let reactionChangePromise;\n\n    /*\n    - Make the API call in the background\n    - If it fails, revert to the old message...\n     */\n    if (message.id) {\n      if (userExistingReaction) {\n        reactionChangePromise = channel.deleteReaction(\n          message.id,\n          userExistingReaction.type,\n        );\n      } else {\n        // add the reaction\n        const messageID = message.id;\n\n        const reaction = { type: reactionType };\n\n        // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n        reactionChangePromise = channel.sendReaction(messageID, reaction);\n      }\n\n      try {\n        // only wait for the API call after the state is updated\n        await reactionChangePromise;\n      } catch (e) {\n        // revert to the original message if the API call fails\n        updateMessage(originalMessage);\n      }\n    }\n  };\n};\n\n/**\n * @type {import('types').useReactionClick}\n */\nexport const useReactionClick = (\n  message,\n  reactionSelectorRef,\n  messageWrapperRef,\n) => {\n  const { channel } = useContext(ChannelContext);\n  const [showDetailedReactions, setShowDetailedReactions] = useState(false);\n  const isReactionEnabled = channel?.getConfig?.()?.reactions !== false;\n  const messageDeleted = !!message?.deleted_at;\n  const hasListener = useRef(false);\n  /** @type {EventListener} */\n  const closeDetailedReactions = useCallback(\n    (event) => {\n      if (\n        event.target &&\n        // @ts-expect-error\n        reactionSelectorRef?.current?.contains(event.target)\n      ) {\n        return;\n      }\n      setShowDetailedReactions(false);\n    },\n    [setShowDetailedReactions, reactionSelectorRef],\n  );\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n    if (showDetailedReactions && !hasListener.current) {\n      hasListener.current = true;\n      document.addEventListener('click', closeDetailedReactions);\n      document.addEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.addEventListener('mouseleave', closeDetailedReactions);\n      }\n    }\n    if (!showDetailedReactions && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n      hasListener.current = false;\n    }\n    return () => {\n      if (hasListener.current) {\n        document.removeEventListener('click', closeDetailedReactions);\n        document.removeEventListener('touchend', closeDetailedReactions);\n        if (messageWrapper) {\n          messageWrapper.removeEventListener(\n            'mouseleave',\n            closeDetailedReactions,\n          );\n        }\n        hasListener.current = false;\n      }\n    };\n  }, [showDetailedReactions, closeDetailedReactions, messageWrapperRef]);\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n    if (messageDeleted && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n      hasListener.current = false;\n    }\n  }, [messageDeleted, closeDetailedReactions, messageWrapperRef]);\n\n  /** @type {(e: MouseEvent) => void} Typescript syntax */\n  const onReactionListClick = (e) => {\n    if (e && e.stopPropagation) {\n      e.stopPropagation();\n    }\n    setShowDetailedReactions(true);\n  };\n\n  return {\n    // @ts-expect-error\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {import('types').useRetryHandler}\n */\nexport const useRetryHandler = (customRetrySendMessage) => {\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { retrySendMessage: contextRetrySendMessage } = useContext(\n    ChannelContext,\n  );\n  const retrySendMessage = customRetrySendMessage || contextRetrySendMessage;\n  return async (message) => {\n    if (retrySendMessage && message) {\n      await retrySendMessage(message);\n    }\n  };\n};\n","// @ts-check\n/**\n * @type {import('types').useUserHandler}\n */\nexport const useUserHandler = (message, eventHandlers) => {\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserClick: (e) => {\n      if (\n        typeof eventHandlers?.onUserClickHandler !== 'function' ||\n        !message?.user\n      ) {\n        return;\n      }\n      eventHandlers.onUserClickHandler(e, message.user);\n    },\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserHover: (e) => {\n      if (\n        typeof eventHandlers?.onUserHoverHandler !== 'function' ||\n        !message?.user\n      ) {\n        return;\n      }\n\n      eventHandlers.onUserHoverHandler(e, message.user);\n    },\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {import('types').useUserRole}\n */\nexport const useUserRole = (message) => {\n  const { client, channel } = useContext(ChannelContext);\n\n  const isMyMessage =\n    !!message?.user && !!client?.user && client.user.id === message.user.id;\n\n  const isAdmin =\n    client?.user?.role === 'admin' ||\n    channel?.state?.membership?.role === 'admin';\n  const isOwner = channel?.state?.membership?.role === 'owner';\n  const isModerator =\n    client?.user?.role === 'channel_moderator' ||\n    channel?.state?.membership?.role === 'channel_moderator' ||\n    channel?.state?.membership?.role === 'moderator';\n  const canEditMessage = isMyMessage || isModerator || isOwner || isAdmin;\n  const canDeleteMessage = canEditMessage;\n\n  return {\n    isMyMessage,\n    isAdmin,\n    isOwner,\n    isModerator,\n    canEditMessage,\n    canDeleteMessage,\n  };\n};\n","import React, { useContext, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MESSAGE_ACTIONS } from '../Message/utils';\nimport { TranslationContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").MessageActionsBoxProps>} */\nconst MessageActionsBox = ({\n  getMessageActions,\n  handleDelete,\n  handleEdit,\n  handleFlag,\n  handleMute,\n  handlePin,\n  isUserMuted,\n  message,\n  messageListRect,\n  mine,\n  open = false,\n}) => {\n  const { t } = useContext(TranslationContext);\n\n  const [reverse, setReverse] = useState(false);\n\n  const messageActions = getMessageActions();\n\n  const checkIfReverse = useCallback(\n    (containerElement) => {\n      if (!containerElement) {\n        setReverse(false);\n        return;\n      }\n      if (open) {\n        const containerRect = containerElement.getBoundingClientRect();\n\n        if (mine) {\n          setReverse(\n            !!messageListRect && containerRect.left < messageListRect.left,\n          );\n        } else {\n          setReverse(\n            !!messageListRect &&\n              containerRect.right + 5 > messageListRect.right,\n          );\n        }\n      }\n    },\n    [messageListRect, mine, open],\n  );\n\n  return (\n    <div\n      data-testid=\"message-actions-box\"\n      className={`str-chat__message-actions-box\n        ${open ? 'str-chat__message-actions-box--open' : ''}\n        ${mine ? 'str-chat__message-actions-box--mine' : ''}\n        ${reverse ? 'str-chat__message-actions-box--reverse' : ''}\n      `}\n      ref={checkIfReverse}\n    >\n      <ul className=\"str-chat__message-actions-list\">\n        {messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1 &&\n          !message?.parent_id && (\n            <button onClick={handlePin}>\n              <li className=\"str-chat__message-actions-list-item\">\n                {!message?.pinned ? t('Pin') : t('Unpin')}\n              </li>\n            </button>\n          )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\n          <button onClick={handleFlag}>\n            <li className=\"str-chat__message-actions-list-item\">{t('Flag')}</li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\n          <button onClick={handleMute}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {isUserMuted && isUserMuted() ? t('Unmute') : t('Mute')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\n          <button onClick={handleEdit}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {t('Edit Message')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\n          <button onClick={handleDelete}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {t('Delete')}\n            </li>\n          </button>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nMessageActionsBox.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes.object),\n  /** If the message actions box should be open or not */\n  open: PropTypes.bool,\n  /** If message belongs to current user. */\n  mine: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /**\n   * Handler for flagging a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleFlag: PropTypes.func,\n  /**\n   * Handler for muting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleMute: PropTypes.func,\n  /**\n   * Handler for editing a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleEdit: PropTypes.func,\n  /**\n   * Handler for deleting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleDelete: PropTypes.func,\n  /**\n   * Handler for pinning a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handlePin: PropTypes.func,\n  /**\n   * Returns array of available message actions for current message.\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   */\n  getMessageActions: PropTypes.func.isRequired,\n};\n\nexport default React.memo(MessageActionsBox);\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport MessageActionsBox from './MessageActionsBox';\nimport {\n  useDeleteHandler,\n  useUserRole,\n  useFlagHandler,\n  useMuteHandler,\n  usePinHandler,\n} from '../Message/hooks';\nimport { defaultPinPermissions, isUserMuted } from '../Message/utils';\n\nimport { ChatContext } from '../../context';\n\n/**\n * @type { React.FC<import('types').MessageActionsProps> }\n */\nexport const MessageActions = (props) => {\n  const {\n    addNotification,\n    customWrapperClass,\n    getMessageActions,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    getPinMessageErrorNotification,\n    handleDelete: propHandleDelete,\n    handleFlag: propHandleFlag,\n    handleMute: propHandleMute,\n    handlePin: propHandlePin,\n    inline,\n    message,\n    messageListRect,\n    messageWrapperRef,\n    pinPermissions = defaultPinPermissions,\n    setEditingState,\n  } = props;\n\n  const { mutes } = useContext(ChatContext);\n\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n\n  const { isMyMessage } = useUserRole(message);\n\n  const handleDelete = useDeleteHandler(message);\n\n  const handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageErrorNotification,\n    getErrorNotification: getFlagMessageSuccessNotification,\n  });\n\n  const handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getErrorNotification: getMuteUserSuccessNotification,\n    getSuccessNotification: getMuteUserErrorNotification,\n  });\n\n  const { handlePin } = usePinHandler(message, pinPermissions, {\n    notify: addNotification,\n    getErrorNotification: getPinMessageErrorNotification,\n  });\n\n  const isMuted = useCallback(() => {\n    return isUserMuted(message, mutes);\n  }, [message, mutes]);\n\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n\n  const messageActions = getMessageActions();\n  const messageDeletedAt = !!message?.deleted_at;\n\n  useEffect(() => {\n    if (messageWrapperRef?.current) {\n      messageWrapperRef.current.addEventListener('onMouseLeave', hideOptions);\n    }\n  }, [messageWrapperRef, hideOptions]);\n\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return () => document.removeEventListener('click', hideOptions);\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (messageActions.length === 0) return null;\n\n  return (\n    <MessageActionsWrapper\n      customWrapperClass={customWrapperClass}\n      inline={inline}\n      setActionsBoxOpen={setActionsBoxOpen}\n    >\n      <MessageActionsBox\n        getMessageActions={getMessageActions}\n        handleDelete={propHandleDelete || handleDelete}\n        handleEdit={setEditingState}\n        handleFlag={propHandleFlag || handleFlag}\n        handleMute={propHandleMute || handleMute}\n        handlePin={propHandlePin || handlePin}\n        isUserMuted={isMuted}\n        message={message}\n        messageListRect={messageListRect}\n        mine={isMyMessage}\n        open={actionsBoxOpen}\n      />\n      <svg\n        width=\"11\"\n        height=\"4\"\n        viewBox=\"0 0 11 4\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\"\n          fillRule=\"nonzero\"\n        />\n      </svg>\n    </MessageActionsWrapper>\n  );\n};\n\n/**\n * This is a workaround to encompass the different styles message actions can have at the moment\n * while allowing for sharing the component's stateful logic.\n * @type { React.FC<import('types').MessageActionsWrapperProps> }\n */\nconst MessageActionsWrapper = (props) => {\n  const { children, customWrapperClass, inline, setActionsBoxOpen } = props;\n\n  const defaultWrapperClass =\n    'str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options';\n\n  const wrapperClass =\n    typeof customWrapperClass === 'string'\n      ? customWrapperClass\n      : defaultWrapperClass;\n\n  /** @type {(e: React.MouseEvent) => void} Typescript syntax */\n  const onClickOptionsAction = (e) => {\n    e.stopPropagation();\n    setActionsBoxOpen(true);\n  };\n\n  const wrapperProps = {\n    'data-testid': 'message-actions',\n    onClick: onClickOptionsAction,\n    className: wrapperClass,\n  };\n\n  if (inline) return <span {...wrapperProps}>{children}</span>;\n\n  return <div {...wrapperProps}>{children}</div>;\n};\n","// @ts-check\nimport React, { useContext } from 'react';\nimport { useUserRole, useOpenThreadHandler } from './hooks';\nimport { ChannelContext } from '../../context';\nimport { MessageActions } from '../MessageActions';\nimport { MESSAGE_ACTIONS } from './utils';\nimport { ThreadIcon, ReactionIcon } from './icons';\n\n/**\n * @type { React.FC<import('types').MessageOptionsProps> }\n */\nconst MessageOptionsComponent = (props) => {\n  const {\n    displayActions = true,\n    displayLeft = true,\n    displayReplies = true,\n    handleOpenThread: propHandleOpenThread,\n    initialMessage,\n    message,\n    messageWrapperRef,\n    onReactionListClick,\n    theme = 'simple',\n    threadList,\n  } = props;\n  const { isMyMessage } = useUserRole(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  /**\n   * @type {import('types').ChannelContextValue}\n   */\n  const { channel } = useContext(ChannelContext);\n  const channelConfig = channel?.getConfig();\n  const messageActions = props.getMessageActions();\n  const shouldShowReactions =\n    messageActions.indexOf(MESSAGE_ACTIONS.react) > -1 &&\n    channelConfig &&\n    channelConfig.reactions;\n\n  const shouldShowReplies =\n    messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1 &&\n    displayReplies &&\n    !threadList &&\n    channelConfig &&\n    channelConfig.replies;\n\n  if (\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending' ||\n    initialMessage\n  ) {\n    return null;\n  }\n  if (isMyMessage && displayLeft) {\n    return (\n      <div\n        data-testid=\"message-options-left\"\n        className={`str-chat__message-${theme}__actions`}\n      >\n        {displayActions && (\n          <MessageActions {...props} messageWrapperRef={messageWrapperRef} />\n        )}\n        {shouldShowReplies && (\n          <div\n            data-testid=\"thread-action\"\n            onClick={propHandleOpenThread || handleOpenThread}\n            className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--thread`}\n          >\n            <ThreadIcon />\n          </div>\n        )}\n        {shouldShowReactions && (\n          <div\n            data-testid=\"message-reaction-action\"\n            className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n            onClick={onReactionListClick}\n          >\n            <ReactionIcon />\n          </div>\n        )}\n      </div>\n    );\n  }\n  return (\n    <div\n      data-testid=\"message-options\"\n      className={`str-chat__message-${theme}__actions`}\n    >\n      {shouldShowReactions && (\n        <div\n          data-testid=\"message-reaction-action\"\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n          onClick={onReactionListClick}\n        >\n          <ReactionIcon />\n        </div>\n      )}\n      {shouldShowReplies && (\n        <div\n          onClick={propHandleOpenThread || handleOpenThread}\n          data-testid=\"thread-action\"\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--thread`}\n        >\n          <ThreadIcon />\n        </div>\n      )}\n      {displayActions && (\n        <MessageActions {...props} messageWrapperRef={messageWrapperRef} />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(MessageOptionsComponent);\n","// @ts-check\nimport React, { useMemo, useContext, useRef } from 'react';\nimport { isOnlyEmojis, renderText } from '../../utils';\nimport { TranslationContext } from '../../context';\nimport {\n  ReactionsList as DefaultReactionList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport {\n  useMobilePress,\n  useReactionHandler,\n  useReactionClick,\n  useMentionsUIHandler,\n} from './hooks';\nimport { messageHasReactions, messageHasAttachments } from './utils';\nimport MessageOptions from './MessageOptions';\n\n/**\n * @type { React.FC<import('types').MessageTextProps> }\n */\nconst MessageTextComponent = (props) => {\n  const {\n    ReactionsList = DefaultReactionList,\n    ReactionSelector = DefaultReactionSelector,\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n    customWrapperClass,\n    customInnerClass,\n    theme = 'simple',\n    message,\n    unsafeHTML,\n    customOptionProps,\n  } = props;\n\n  const reactionSelectorRef = useRef(\n    /** @type {HTMLDivElement | null} */ (null),\n  );\n\n  const { handleMobilePress } = useMobilePress();\n\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n\n  const {\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  } = useReactionClick(message, reactionSelectorRef);\n\n  const { t, userLanguage } = useContext(TranslationContext);\n\n  const hasReactions = messageHasReactions(message);\n  const hasAttachment = messageHasAttachments(message);\n  const handleReaction = useReactionHandler(message);\n\n  const messageTextToRender =\n    // @ts-expect-error\n    message?.i18n?.[`${userLanguage}_text`] || message?.text;\n\n  const messageMentionedUsersItem = message?.mentioned_users;\n\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, messageMentionedUsersItem),\n    [messageMentionedUsersItem, messageTextToRender],\n  );\n\n  const wrapperClass = customWrapperClass || 'str-chat__message-text';\n  const innerClass =\n    customInnerClass ||\n    `str-chat__message-text-inner str-chat__message-${theme}-text-inner`;\n\n  if (!message?.text) {\n    return null;\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <div\n        data-testid=\"message-text-inner-wrapper\"\n        className={`\n          ${innerClass}\n          ${\n            hasAttachment\n              ? ` str-chat__message-${theme}-text-inner--has-attachment`\n              : ''\n          }\n          ${\n            isOnlyEmojis(message.text)\n              ? ` str-chat__message-${theme}-text-inner--is-emoji`\n              : ''\n          }\n        `.trim()}\n        onMouseOver={onMentionsHover}\n        onClick={onMentionsClick}\n      >\n        {message.type === 'error' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {t && t('Error · Unsent')}\n          </div>\n        )}\n        {message.status === 'failed' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {t && t('Message Failed · Click to try again')}\n          </div>\n        )}\n\n        {unsafeHTML && message.html ? (\n          <div dangerouslySetInnerHTML={{ __html: message.html }} />\n        ) : (\n          <div onClick={handleMobilePress}>{messageText}</div>\n        )}\n\n        {/* if reactions show them */}\n        {hasReactions && !showDetailedReactions && isReactionEnabled && (\n          <ReactionsList\n            reactions={message.latest_reactions}\n            reaction_counts={message.reaction_counts || undefined}\n            own_reactions={message.own_reactions}\n            onClick={onReactionListClick}\n            reverse={true}\n          />\n        )}\n        {showDetailedReactions && isReactionEnabled && (\n          <ReactionSelector\n            handleReaction={handleReaction}\n            detailedView\n            reaction_counts={message.reaction_counts || undefined}\n            latest_reactions={message.latest_reactions}\n            own_reactions={message.own_reactions}\n            ref={reactionSelectorRef}\n          />\n        )}\n      </div>\n      <MessageOptions\n        {...props}\n        {...customOptionProps}\n        onReactionListClick={onReactionListClick}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(MessageTextComponent);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport { useUserRole } from './hooks/useUserRole';\nimport { MessagePropTypes } from './utils';\n\n/**\n * @type{React.FC<import('types').MessageDeletedProps>}\n */\nconst MessageDeleted = (props) => {\n  const { message } = props;\n  const { t } = useContext(TranslationContext);\n  const { isMyMessage } = useUserRole(message);\n  if (props.isMyMessage) {\n    console.warn(\n      'The isMyMessage is deprecated, and will be removed in the next major release.',\n    );\n  }\n  const messageClasses =\n    (props.isMyMessage && props.isMyMessage(message)) || isMyMessage\n      ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n      : 'str-chat__message str-chat__message-simple';\n\n  return (\n    <div\n      key={message.id}\n      className={`${messageClasses} str-chat__message--deleted ${message.type} `}\n      data-testid={'message-deleted-component'}\n    >\n      <div className=\"str-chat__message--deleted-inner\">\n        {t && t('This message was deleted...')}\n      </div>\n    </div>\n  );\n};\n\nMessageDeleted.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  // @ts-expect-error\n  // Ignoring this for now as Typescript definitions on 'stream-chat' are wrong.\n  message: MessagePropTypes,\n  /** @deprecated This is no longer needed. The component should now rely on the user role custom hook */\n  isMyMessage: PropTypes.func,\n};\n\nexport default MessageDeleted;\n","// @ts-check\nimport React, { useContext, useMemo } from 'react';\nimport { TranslationContext } from '../../context';\n\nexport const defaultTimestampFormat = 'h:mmA';\nexport const notValidDateWarning =\n  'MessageTimestamp was called without a message, or message has invalid created_at date.';\nexport const noParsingFunctionWarning =\n  'MessageTimestamp was called but there is no datetime parsing function available';\n/**\n * @type { (\n *   messageCreatedAt?: string,\n *   formatDate?: import('types').MessageTimestampProps['formatDate'],\n *   calendar?: boolean,\n *   tDateTimeParser?: import('types').MessageTimestampProps['tDateTimeParser'],\n *   format?: string,\n * ) => string | null }\n */\nfunction getDateString(\n  messageCreatedAt,\n  formatDate,\n  calendar,\n  tDateTimeParser,\n  format,\n) {\n  if (!messageCreatedAt || !Date.parse(messageCreatedAt)) {\n    console.warn(notValidDateWarning);\n    return null;\n  }\n\n  if (typeof formatDate === 'function') {\n    return formatDate(new Date(messageCreatedAt));\n  }\n\n  if (!tDateTimeParser) {\n    console.warn(noParsingFunctionWarning);\n    return null;\n  }\n\n  const parsedTime = tDateTimeParser(messageCreatedAt);\n  if (calendar && typeof parsedTime.calendar !== 'function') {\n    return null;\n  }\n\n  return calendar ? parsedTime.calendar() : parsedTime.format(format);\n}\n/**\n * @typedef { import('types').MessageTimestampProps } Props\n * @type { React.FC<Props> }\n */\nconst MessageTimestamp = (props) => {\n  const {\n    message,\n    formatDate,\n    tDateTimeParser: propTDatetimeParser,\n    customClass = '',\n    format = defaultTimestampFormat,\n    calendar = false,\n  } = props;\n  const { tDateTimeParser: contextTDateTimeParser } = useContext(\n    TranslationContext,\n  );\n  const tDateTimeParser = propTDatetimeParser || contextTDateTimeParser;\n  const createdAt = message?.created_at;\n  const when = useMemo(\n    () =>\n      getDateString(createdAt, formatDate, calendar, tDateTimeParser, format),\n    [formatDate, calendar, tDateTimeParser, format, createdAt],\n  );\n\n  if (!when) {\n    return null;\n  }\n\n  return (\n    <time className={customClass} dateTime={createdAt} title={createdAt}>\n      {when}\n    </time>\n  );\n};\n\nexport default React.memo(MessageTimestamp);\n","import React, { useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport { smartRender } from '../../utils';\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MML } from '../MML';\nimport { Modal } from '../Modal';\nimport {\n  MessageInput,\n  EditMessageForm as DefaultEditMessageForm,\n} from '../MessageInput';\nimport { Tooltip } from '../Tooltip';\nimport { LoadingIndicator } from '../Loading';\nimport {\n  ReactionsList as DefaultReactionList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport MessageOptions from './MessageOptions';\nimport MessageText from './MessageText';\nimport DefaultMessageDeleted from './MessageDeleted';\nimport {\n  useActionHandler,\n  useOpenThreadHandler,\n  useReactionClick,\n  useReactionHandler,\n  useRetryHandler,\n  useUserHandler,\n  useUserRole,\n} from './hooks';\nimport {\n  areMessagePropsEqual,\n  messageHasReactions,\n  messageHasAttachments,\n  getReadByTooltipText,\n} from './utils';\nimport { DeliveredCheckIcon } from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageSimple - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageSimple.md\n * @type { React.FC<import('types').MessageSimpleProps> }\n */\nconst MessageSimple = (props) => {\n  const {\n    clearEditingState,\n    editing,\n    EditMessageInput = DefaultEditMessageForm,\n    message,\n    threadList,\n    formatDate,\n    updateMessage: propUpdateMessage,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    handleReaction: propHandleReaction,\n    handleRetry: propHandleRetry,\n    onUserClick: onUserClickCustomHandler,\n    onUserHover: onUserHoverCustomHandler,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const { updateMessage: channelUpdateMessage } = useContext(ChannelContext);\n  const updateMessage = propUpdateMessage || channelUpdateMessage;\n  const { isMyMessage } = useUserRole(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleAction = useActionHandler(message);\n  const handleRetry = useRetryHandler();\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: onUserClickCustomHandler,\n    onUserHoverHandler: onUserHoverCustomHandler,\n  });\n  const reactionSelectorRef = React.createRef();\n  const messageWrapperRef = useRef(null);\n  const {\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  } = useReactionClick(message, reactionSelectorRef);\n  const {\n    Attachment = DefaultAttachment,\n    Avatar = DefaultAvatar,\n    MessageDeleted = DefaultMessageDeleted,\n    ReactionSelector = DefaultReactionSelector,\n    ReactionsList = DefaultReactionList,\n  } = props;\n\n  const hasReactions = messageHasReactions(message);\n  const hasAttachment = messageHasAttachments(message);\n\n  const messageClasses = isMyMessage\n    ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n    : 'str-chat__message str-chat__message-simple';\n\n  if (message?.type === 'message.read' || message?.type === 'message.date') {\n    return null;\n  }\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, { message }, null);\n  }\n  return (\n    <React.Fragment>\n      {editing && (\n        <Modal open={editing} onClose={clearEditingState}>\n          <MessageInput\n            Input={EditMessageInput}\n            message={message}\n            clearEditingState={clearEditingState}\n            updateMessage={updateMessage}\n            {...props.additionalMessageInputProps}\n          />\n        </Modal>\n      )}\n      {message && (\n        <div\n          key={message.id || ''}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message--${message.type}\n\t\t\t\t\t\tstr-chat__message--${message.status}\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\n            ${\n              hasReactions && isReactionEnabled\n                ? 'str-chat__message--with-reactions'\n                : ''\n            }\n            ${message?.pinned ? 'pinned-message' : ''}\n\t\t\t\t\t`.trim()}\n          ref={messageWrapperRef}\n        >\n          <MessageSimpleStatus {...props} />\n\n          {message.user && (\n            <Avatar\n              image={message.user.image}\n              name={message.user.name || message.user.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          )}\n          <div\n            data-testid=\"message-inner\"\n            className=\"str-chat__message-inner\"\n            onClick={() => {\n              if (\n                message.status === 'failed' &&\n                (propHandleRetry || handleRetry)\n              ) {\n                const retryHandler = propHandleRetry || handleRetry;\n                // FIXME: type checking fails here because in the case of a failed message,\n                // `message` is of type Client.Message (i.e. request object)\n                // instead of Client.MessageResponse (i.e. server response object)\n                // @ts-expect-error\n                retryHandler(message);\n              }\n            }}\n          >\n            {!message.text && (\n              <React.Fragment>\n                {\n                  <MessageOptions\n                    {...props}\n                    messageWrapperRef={messageWrapperRef}\n                    onReactionListClick={onReactionListClick}\n                    handleOpenThread={propHandleOpenThread}\n                  />\n                }\n                {/* if reactions show them */}\n                {hasReactions &&\n                  !showDetailedReactions &&\n                  isReactionEnabled && (\n                    <ReactionsList\n                      reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts || undefined}\n                      own_reactions={message.own_reactions}\n                      onClick={onReactionListClick}\n                      reverse={true}\n                    />\n                  )}\n                {showDetailedReactions && isReactionEnabled && (\n                  <ReactionSelector\n                    handleReaction={propHandleReaction || handleReaction}\n                    detailedView\n                    reaction_counts={message.reaction_counts || undefined}\n                    latest_reactions={message.latest_reactions}\n                    own_reactions={message.own_reactions}\n                    ref={reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            {message?.attachments && Attachment && (\n              <Attachment\n                attachments={message.attachments}\n                actionHandler={propHandleAction || handleAction}\n              />\n            )}\n\n            {message.text && (\n              <MessageText\n                {...props}\n                customOptionProps={{\n                  messageWrapperRef,\n                  handleOpenThread: propHandleOpenThread,\n                }}\n                // FIXME: There's some unmatched definition between the infered and the declared\n                // ReactionSelector reference\n                // @ts-expect-error\n                reactionSelectorRef={reactionSelectorRef}\n              />\n            )}\n\n            {message.mml && (\n              <MML\n                source={message.mml}\n                actionHandler={handleAction}\n                align={isMyMessage ? 'right' : 'left'}\n              />\n            )}\n\n            {!threadList && message.reply_count !== 0 && (\n              <div className=\"str-chat__message-simple-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={propHandleOpenThread || handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div\n              className={`str-chat__message-data str-chat__message-simple-data`}\n            >\n              {!isMyMessage && message.user ? (\n                <span className=\"str-chat__message-simple-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <MessageTimestamp\n                customClass=\"str-chat__message-simple-timestamp\"\n                tDateTimeParser={propTDateTimeParser}\n                formatDate={formatDate}\n                message={message}\n                calendar\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </React.Fragment>\n  );\n};\n\n/** @type { React.FC<import('types').MessageSimpleProps> } */\nconst MessageSimpleStatus = ({\n  Avatar = DefaultAvatar,\n  readBy,\n  message,\n  threadList,\n  lastReceivedId,\n}) => {\n  const { t } = useContext(TranslationContext);\n  const { client } = useContext(ChannelContext);\n  const { isMyMessage } = useUserRole(message);\n  if (!isMyMessage || message?.type === 'error') {\n    return null;\n  }\n  const justReadByMe =\n    readBy &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    client &&\n    readBy[0].id === client.user?.id;\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-sending\"\n      >\n        <Tooltip>{t && t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      /** @type {(item: import('stream-chat').UserResponse) => boolean} Typescript syntax */\n      (item) => !!item && !!client && item.id !== client.user?.id,\n    )[0];\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-read-by\"\n      >\n        <Tooltip>{readBy && getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          name={lastReadUser?.name}\n          image={lastReadUser?.image}\n          size={15}\n        />\n        {readBy.length > 2 && (\n          <span\n            className=\"str-chat__message-simple-status-number\"\n            data-testid=\"message-status-read-by-many\"\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-received\"\n      >\n        <Tooltip>{t && t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n  return null;\n};\n\nMessageSimple.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').WrapperAttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to override default edit message input\n   *\n   * Defaults to and accepts same props as: [EditMessageForm](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/EditMessageForm.js)\n   * */\n  EditMessageInput: /** @type {PropTypes.Validator<React.FC<import(\"types\").MessageInputProps>>} */ (PropTypes.elementType),\n  /**\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  )),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Client object */\n  // @ts-expect-error\n  client: PropTypes.object,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes.object),\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /**\n   * Function to open thread on current message\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., ['edit', 'delete', 'flag', 'mute', 'react', 'reply']\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: PropTypes.func.isRequired,\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   * @deprecated This component now relies on the useRetryHandler custom hook.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n  /**\n   * A component to display the selector that allows a user to react to a certain message.\n   */\n  ReactionSelector: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionSelectorProps>>} */ (PropTypes.elementType),\n  /**\n   * A component to display the a message list of reactions.\n   */\n  ReactionsList: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionsListProps>>} */ (PropTypes.elementType),\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired,\n  }),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageSimple, areMessagePropsEqual);\n","import React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MessageSimple from './MessageSimple';\nimport {\n  useActionHandler,\n  useDeleteHandler,\n  useEditHandler,\n  useFlagHandler,\n  useMentionsHandler,\n  useMuteHandler,\n  useOpenThreadHandler,\n  usePinHandler,\n  useReactionHandler,\n  useRetryHandler,\n  useUserHandler,\n  useUserRole,\n} from './hooks';\nimport {\n  areMessagePropsEqual,\n  defaultPinPermissions,\n  getMessageActions,\n  MESSAGE_ACTIONS,\n} from './utils';\n\nimport { ChannelContext } from '../../context';\nimport { checkChannelPropType, checkClientPropType } from '../../utils';\n\n/**\n * Message - A high level component which implements all the logic required for a message.\n * The actual rendering of the message is delegated via the \"Message\" property\n *\n * @example ../../docs/Message.md\n * @type { React.FC<import('types').MessageComponentProps> }\n */\nconst Message = (props) => {\n  const {\n    addNotification,\n    channel: propChannel,\n    formatDate,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    getPinMessageErrorNotification,\n    groupStyles = [],\n    Message: MessageUIComponent = MessageSimple,\n    message,\n    messageActions = Object.keys(MESSAGE_ACTIONS),\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    openThread: propOpenThread,\n    pinPermissions = defaultPinPermissions,\n    retrySendMessage: propRetrySendMessage,\n  } = props;\n\n  const { channel: contextChannel } = useContext(ChannelContext);\n\n  const channel = propChannel || contextChannel;\n  const channelConfig = channel?.getConfig && channel.getConfig();\n\n  const handleAction = useActionHandler(message);\n  const handleDelete = useDeleteHandler(message);\n  const { editing, setEdit, clearEdit } = useEditHandler();\n  const handleOpenThread = useOpenThreadHandler(message, propOpenThread);\n  const handleReaction = useReactionHandler(message);\n  const handleRetry = useRetryHandler(propRetrySendMessage);\n\n  const handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageSuccessNotification,\n    getErrorNotification: getFlagMessageErrorNotification,\n  });\n\n  const handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getMuteUserSuccessNotification,\n    getErrorNotification: getMuteUserErrorNotification,\n  });\n\n  const { onMentionsClick, onMentionsHover } = useMentionsHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n\n  const { canPin, handlePin } = usePinHandler(message, pinPermissions, {\n    notify: addNotification,\n    getErrorNotification: getPinMessageErrorNotification,\n  });\n\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n\n  const { isMyMessage, isAdmin, isModerator, isOwner } = useUserRole(message);\n\n  const canEdit = isMyMessage || isModerator || isOwner || isAdmin;\n  const canDelete = canEdit;\n  const canReact = true;\n  const canReply = true;\n\n  const messageActionsHandler = useCallback(() => {\n    if (!message || !messageActions) {\n      return [];\n    }\n\n    return getMessageActions(messageActions, {\n      canDelete,\n      canEdit,\n      canPin,\n      canReply,\n      canReact,\n      canFlag: !isMyMessage,\n      canMute: !isMyMessage && !!channelConfig?.mutes,\n    });\n  }, [\n    canDelete,\n    canEdit,\n    canPin,\n    canReply,\n    canReact,\n    channelConfig?.mutes,\n    isMyMessage,\n    message,\n    messageActions,\n  ]);\n\n  const actionsEnabled =\n    message && message.type === 'regular' && message.status === 'received';\n\n  return (\n    MessageUIComponent && (\n      <MessageUIComponent\n        {...props}\n        actionsEnabled={actionsEnabled}\n        channelConfig={channelConfig}\n        clearEditingState={clearEdit}\n        editing={editing}\n        formatDate={formatDate}\n        getMessageActions={messageActionsHandler}\n        groupStyles={groupStyles}\n        handleAction={handleAction}\n        handleDelete={handleDelete}\n        handleEdit={setEdit}\n        handleFlag={handleFlag}\n        handleMute={handleMute}\n        handlePin={handlePin}\n        handleReaction={handleReaction}\n        handleRetry={handleRetry}\n        handleOpenThread={handleOpenThread}\n        isMyMessage={() => isMyMessage}\n        Message={MessageUIComponent}\n        onMentionsClickMessage={onMentionsClick}\n        onMentionsHoverMessage={onMentionsHover}\n        onUserClick={onUserClick}\n        onUserHover={onUserHover}\n        setEditingState={setEdit}\n      />\n    )\n  );\n};\n\nMessage.propTypes = {\n  /** The message object */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes.shape(\n    {\n      text: PropTypes.string.isRequired,\n      html: PropTypes.string.isRequired,\n      type: PropTypes.string.isRequired,\n      reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n      reaction_scores: PropTypes.objectOf(PropTypes.number.isRequired),\n      created_at: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n      updated_at: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    },\n  ).isRequired),\n  /** The client connection object for connecting to Stream */\n  client: /** @type {PropTypes.Validator<import('types').StreamChatReactClient>} */ (PropTypes.objectOf(\n    checkClientPropType,\n  )),\n  /** The current channel this message is displayed in */\n  channel: /** @type {PropTypes.Validator<ReturnType<import('types').StreamChatReactClient['channel']>>} */ (PropTypes.objectOf(\n    checkChannelPropType,\n  )),\n  /** A list of users that have read this message */\n  readBy: PropTypes.array,\n  /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\n  groupStyles: PropTypes.array,\n\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Message UI component to display a message in message list.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n\n  /**\n   * A component to display the selector that allows a user to react to a certain message.\n   */\n  ReactionSelector: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionSelectorProps>>} */ (PropTypes.elementType),\n  /**\n   * A component to display the a message list of reactions.\n   */\n  ReactionsList: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionsListProps>>} */ (PropTypes.elementType),\n  /**\n   * Attachment UI component to display attachment in individual message.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').WrapperAttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'flag', 'mute', 'react', 'reply']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for pinning a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format)\n   *\n   * */\n  getPinMessageErrorNotification: PropTypes.func,\n  /** Latest message id on current channel */\n  lastReceivedId: PropTypes.string,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  members: /** @type {PropTypes.Validator<{[user_id: string]: import('stream-chat').ChannelMemberResponse<import('types').StreamChatReactUserType>} | null | undefined>} */ (PropTypes.object),\n  /**\n   * Function to add custom notification on message list\n   *\n   * @param text Notification text to display\n   * @param type Type of notification. 'success' | 'error'\n   * */\n  addNotification: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  updateMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  removeMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  retrySendMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsClick: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsHover: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for hover events on the user that posted the message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserHover: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  openThread: PropTypes.func,\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n  /**\n   * The user roles allowed to pin messages in various channel types\n   */\n  pinPermissions: /** @type {PropTypes.Validator<import('types').PinPermissions>>} */ (PropTypes.object),\n};\n\nMessage.defaultProps = {\n  readBy: [],\n};\n\nexport default React.memo(Message, areMessagePropsEqual);\n","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { smartRender } from '../../utils';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MML } from '../MML';\nimport {\n  ReactionsList as DefaultReactionsList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport {\n  areMessagePropsEqual,\n  messageHasReactions,\n  messageHasAttachments,\n} from './utils';\nimport MessageOptions from './MessageOptions';\nimport MessageText from './MessageText';\nimport {\n  useUserRole,\n  useReactionClick,\n  useReactionHandler,\n  useActionHandler,\n  useOpenThreadHandler,\n  useUserHandler,\n} from './hooks';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageCommerce - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageCommerce.md\n * @type { React.FC<import('types').MessageCommerceProps> }\n */\nconst MessageCommerce = (props) => {\n  const {\n    message,\n    formatDate,\n    groupStyles,\n    actionsEnabled,\n    threadList,\n    MessageDeleted,\n    getMessageActions,\n    ReactionsList = DefaultReactionsList,\n    ReactionSelector = DefaultReactionSelector,\n    handleReaction: propHandleReaction,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const Attachment = props.Attachment || DefaultAttachment;\n  const Avatar = props.Avatar || DefaultAvatar;\n  const hasReactions = messageHasReactions(message);\n  const handleAction = useActionHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const reactionSelectorRef = useRef(null);\n  const {\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  } = useReactionClick(message, reactionSelectorRef);\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const { isMyMessage } = useUserRole(message);\n  const messageClasses = `str-chat__message-commerce str-chat__message-commerce--${\n    isMyMessage ? 'right' : 'left'\n  }`;\n\n  const hasAttachment = messageHasAttachments(message);\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (\n    message &&\n    (message.type === 'message.read' || message.type === 'message.date')\n  ) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <div\n        data-testid=\"message-commerce-wrapper\"\n        key={message?.id || ''}\n        className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message-commerce--${message?.type}\n\t\t\t\t\t\t${\n              message?.text\n                ? 'str-chat__message-commerce--has-text'\n                : 'str-chat__message-commerce--has-no-text'\n            }\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\n\t\t\t\t\t\t${\n              hasReactions && isReactionEnabled\n                ? 'str-chat__message-commerce--with-reactions'\n                : ''\n            }\n            ${`str-chat__message-commerce--${firstGroupStyle}`}\n            ${message?.pinned ? 'pinned-message' : ''}\n\t\t\t\t\t`.trim()}\n      >\n        {(firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && (\n          <Avatar\n            image={message?.user?.image}\n            size={32}\n            name={message?.user?.name || message?.user?.id}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n          />\n        )}\n        <div className=\"str-chat__message-commerce-inner\">\n          {message && !message.text && (\n            <React.Fragment>\n              {\n                <MessageOptions\n                  {...props}\n                  displayLeft={false}\n                  displayReplies={false}\n                  displayActions={false}\n                  onReactionListClick={onReactionListClick}\n                  theme={'commerce'}\n                />\n              }\n              {/* if reactions show them */}\n              {hasReactions && !showDetailedReactions && isReactionEnabled && (\n                <ReactionsList\n                  reactions={message.latest_reactions}\n                  reaction_counts={message.reaction_counts || undefined}\n                  own_reactions={message.own_reactions}\n                  onClick={onReactionListClick}\n                />\n              )}\n              {showDetailedReactions && isReactionEnabled && (\n                <ReactionSelector\n                  reverse={false}\n                  handleReaction={propHandleReaction || handleReaction}\n                  detailedView\n                  reaction_counts={message.reaction_counts || undefined}\n                  latest_reactions={message.latest_reactions}\n                  own_reactions={message.own_reactions}\n                  ref={reactionSelectorRef}\n                />\n              )}\n            </React.Fragment>\n          )}\n\n          {message?.attachments && Attachment && (\n            <Attachment\n              attachments={message.attachments}\n              actionHandler={propHandleAction || handleAction}\n            />\n          )}\n\n          {message?.mml && (\n            <MML\n              source={message.mml}\n              actionHandler={handleAction}\n              align={isMyMessage ? 'right' : 'left'}\n            />\n          )}\n\n          {message?.text && (\n            <MessageText\n              ReactionSelector={ReactionSelector}\n              ReactionsList={ReactionsList}\n              actionsEnabled={actionsEnabled}\n              customWrapperClass=\"str-chat__message-commerce-text\"\n              customInnerClass=\"str-chat__message-commerce-text-inner\"\n              customOptionProps={{\n                displayLeft: false,\n                displayReplies: false,\n                displayActions: false,\n                theme: 'commerce',\n              }}\n              getMessageActions={getMessageActions}\n              message={message}\n              messageListRect={props.messageListRect}\n              unsafeHTML={props.unsafeHTML}\n              onMentionsClickMessage={props.onMentionsClickMessage}\n              onMentionsHoverMessage={props.onMentionsHoverMessage}\n              theme=\"commerce\"\n            />\n          )}\n          {!threadList && (\n            <div className=\"str-chat__message-commerce-reply-button\">\n              <MessageRepliesCountButton\n                onClick={propHandleOpenThread || handleOpenThread}\n                reply_count={message?.reply_count}\n              />\n            </div>\n          )}\n          <div className=\"str-chat__message-commerce-data\">\n            {!isMyMessage ? (\n              <span className=\"str-chat__message-commerce-name\">\n                {message?.user?.name || message?.user?.id}\n              </span>\n            ) : null}\n            <MessageTimestamp\n              formatDate={formatDate}\n              customClass=\"str-chat__message-commerce-timestamp\"\n              message={message}\n              tDateTimeParser={propTDateTimeParser}\n              format=\"LT\"\n            />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nMessageCommerce.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').WrapperAttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  )),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes.object),\n\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /**\n   * Function to open thread on current message\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /** Returns all allowed actions on message by current user e.g., ['edit', 'delete', 'flag', 'mute', 'react', 'reply'] */\n  getMessageActions: PropTypes.func.isRequired,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n  /**\n   * A component to display the selector that allows a user to react to a certain message.\n   */\n  ReactionSelector: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionSelectorProps>>} */ (PropTypes.elementType),\n  /**\n   * A component to display the a message list of reactions.\n   */\n  ReactionsList: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionsListProps>>} */ (PropTypes.elementType),\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserHover: PropTypes.func,\n  /** The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageCommerce, areMessagePropsEqual);\n","import React, {\n  useCallback,\n  useEffect,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\n\nimport { isOnlyEmojis, renderText, smartRender } from '../../utils';\nimport { ChannelContext, TranslationContext } from '../../context';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport {\n  MessageInput,\n  EditMessageForm as DefaultEditMessageForm,\n} from '../MessageInput';\nimport {\n  SimpleReactionsList as DefaultReactionsList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport {\n  useReactionHandler,\n  useUserHandler,\n  useRetryHandler,\n  useOpenThreadHandler,\n  useActionHandler,\n  useReactionClick,\n  useMentionsUIHandler,\n  useEditHandler,\n} from './hooks';\nimport { areMessagePropsEqual } from './utils';\nimport { MessageActions } from '../MessageActions';\nimport {\n  ErrorIcon,\n  PinIndicator as DefaultPinIndicator,\n  ReactionIcon,\n  ThreadIcon,\n} from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageLivestream - Render component, should be used together with the Message component\n * Implements the look and feel for a livestream use case.\n *\n * @example ../../docs/MessageLivestream.md\n * @typedef { import('../../../types').MessageLivestreamProps } Props\n * @type { React.FC<Props> }\n */\nconst MessageLivestreamComponent = (props) => {\n  const {\n    message,\n    groupStyles,\n    editing: propEditing,\n    setEditingState: propSetEdit,\n    clearEditingState: propClearEdit,\n    initialMessage,\n    unsafeHTML,\n    formatDate,\n    channelConfig: propChannelConfig,\n    ReactionsList = DefaultReactionsList,\n    ReactionSelector = DefaultReactionSelector,\n    onUserClick: propOnUserClick,\n    handleReaction: propHandleReaction,\n    handleOpenThread: propHandleOpenThread,\n    onUserHover: propOnUserHover,\n    handleRetry: propHandleRetry,\n    handleAction: propHandleAction,\n    updateMessage: propUpdateMessage,\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n    Attachment = DefaultAttachment,\n    Avatar = DefaultAvatar,\n    EditMessageInput = DefaultEditMessageForm,\n    t: propT,\n    tDateTimeParser: propTDateTimeParser,\n    MessageDeleted,\n    PinIndicator = DefaultPinIndicator,\n  } = props;\n  const { t: contextT, userLanguage } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const messageWrapperRef = useRef(null);\n  const reactionSelectorRef = useRef(null);\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { updateMessage: channelUpdateMessage, channel } = useContext(\n    ChannelContext,\n  );\n  const channelConfig = propChannelConfig || channel?.getConfig();\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const handleAction = useActionHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const {\n    editing: ownEditing,\n    setEdit: ownSetEditing,\n    clearEdit: ownClearEditing,\n  } = useEditHandler();\n  const editing = propEditing || ownEditing;\n  const setEdit = propSetEdit || ownSetEditing;\n  const clearEdit = propClearEdit || ownClearEditing;\n  const handleRetry = useRetryHandler();\n  const retryHandler = propHandleRetry || handleRetry;\n  const {\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  } = useReactionClick(message, reactionSelectorRef, messageWrapperRef);\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const messageTextToRender =\n    message?.i18n?.[`${userLanguage}_text`] || message?.text;\n  const messageMentionedUsersItem = message?.mentioned_users;\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, messageMentionedUsersItem),\n    [messageMentionedUsersItem, messageTextToRender],\n  );\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (\n    !message ||\n    message.type === 'message.read' ||\n    message.type === 'message.date'\n  ) {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n  if (editing) {\n    return (\n      <div\n        data-testid={'message-livestream-edit'}\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className=\"str-chat__message-team-meta\">\n            <Avatar\n              image={message.user?.image}\n              name={message.user?.name || message.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          </div>\n        )}\n        <MessageInput\n          Input={EditMessageInput}\n          message={message}\n          clearEditingState={clearEdit}\n          updateMessage={propUpdateMessage || channelUpdateMessage}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {message?.pinned && (\n        <div className=\"str-chat__message-livestream-pin-indicator\">\n          <PinIndicator message={message} t={t} />\n        </div>\n      )}\n      <div\n        data-testid=\"message-livestream\"\n        className={`str-chat__message-livestream str-chat__message-livestream--${firstGroupStyle} str-chat__message-livestream--${\n          message.type\n        } str-chat__message-livestream--${message.status} ${\n          initialMessage ? 'str-chat__message-livestream--initial-message' : ''\n        } ${message?.pinned ? 'pinned-message' : ''}`}\n        ref={messageWrapperRef}\n      >\n        {showDetailedReactions && isReactionEnabled && (\n          <ReactionSelector\n            reverse={false}\n            handleReaction={handleReaction}\n            detailedView\n            latest_reactions={message?.latest_reactions}\n            reaction_counts={message?.reaction_counts || undefined}\n            own_reactions={message.own_reactions}\n            ref={reactionSelectorRef}\n          />\n        )}\n        <MessageLivestreamActions\n          initialMessage={initialMessage}\n          message={message}\n          formatDate={formatDate}\n          onReactionListClick={onReactionListClick}\n          messageWrapperRef={messageWrapperRef}\n          getMessageActions={props.getMessageActions}\n          tDateTimeParser={propTDateTimeParser}\n          channelConfig={channelConfig}\n          threadList={props.threadList}\n          addNotification={props.addNotification}\n          handleOpenThread={propHandleOpenThread || handleOpenThread}\n          setEditingState={setEdit}\n        />\n        <div className=\"str-chat__message-livestream-left\">\n          <Avatar\n            image={message.user?.image}\n            name={message.user?.name || message?.user?.id}\n            size={30}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n          />\n        </div>\n        <div className=\"str-chat__message-livestream-right\">\n          <div className=\"str-chat__message-livestream-content\">\n            <div className=\"str-chat__message-livestream-author\">\n              <strong>{message.user?.name || message.user?.id}</strong>\n              {message?.type === 'error' && (\n                <div className=\"str-chat__message-team-error-header\">\n                  {t('Only visible to you')}\n                </div>\n              )}\n            </div>\n\n            <div\n              data-testid=\"message-livestream-text\"\n              className={\n                isOnlyEmojis(message.text)\n                  ? 'str-chat__message-livestream-text--is-emoji'\n                  : ''\n              }\n              onMouseOver={onMentionsHover}\n              onClick={onMentionsClick}\n            >\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                !unsafeHTML &&\n                messageText}\n\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                unsafeHTML &&\n                !!message.html && (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                )}\n\n              {message.type === 'error' && !message.command && (\n                <p data-testid=\"message-livestream-error\">\n                  <ErrorIcon />\n                  {message.text}\n                </p>\n              )}\n\n              {message.type === 'error' && message.command && (\n                <p data-testid=\"message-livestream-command-error\">\n                  <ErrorIcon />\n                  {/* TODO: Translate following sentence */}\n                  <strong>/{message.command}</strong> is not a valid command\n                </p>\n              )}\n              {message.status === 'failed' && (\n                <p\n                  onClick={() => {\n                    if (retryHandler) {\n                      // FIXME: type checking fails here because in the case of a failed message,\n                      // `message` is of type Client.Message (i.e. request object)\n                      // instead of Client.MessageResponse (i.e. server response object)\n                      // @ts-expect-error\n                      retryHandler(message);\n                    }\n                  }}\n                >\n                  <ErrorIcon />\n                  {t('Message failed. Click to try again.')}\n                </p>\n              )}\n            </div>\n\n            {message?.attachments && Attachment && (\n              <Attachment\n                attachments={message.attachments}\n                actionHandler={propHandleAction || handleAction}\n              />\n            )}\n\n            {isReactionEnabled && (\n              <ReactionsList\n                reaction_counts={message.reaction_counts || undefined}\n                reactions={message.latest_reactions}\n                own_reactions={message.own_reactions}\n                handleReaction={propHandleReaction || handleReaction}\n              />\n            )}\n\n            {!initialMessage && (\n              <MessageRepliesCountButton\n                onClick={propHandleOpenThread || handleOpenThread}\n                reply_count={message.reply_count}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\n/**\n * @type { React.FC<import('types').MessageLivestreamActionProps> }\n */\nconst MessageLivestreamActions = (props) => {\n  const {\n    initialMessage,\n    message,\n    channelConfig,\n    threadList,\n    formatDate,\n    messageWrapperRef,\n    onReactionListClick,\n    getMessageActions,\n    handleOpenThread,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n  /** @type {() => void} Typescript syntax */\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n  const messageDeletedAt = !!message?.deleted_at;\n  const messageWrapper = messageWrapperRef?.current;\n  useEffect(() => {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return () => {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n    return () => {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (\n    initialMessage ||\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending'\n  ) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid={'message-livestream-actions'}\n      className={`str-chat__message-livestream-actions`}\n    >\n      <MessageTimestamp\n        customClass=\"str-chat__message-livestream-time\"\n        message={message}\n        formatDate={formatDate}\n        tDateTimeParser={propTDateTimeParser}\n      />\n      {channelConfig && channelConfig.reactions && (\n        <span\n          onClick={onReactionListClick}\n          data-testid=\"message-livestream-reactions-action\"\n        >\n          <span>\n            <ReactionIcon />\n          </span>\n        </span>\n      )}\n      {!threadList && channelConfig && channelConfig.replies && (\n        <span\n          data-testid=\"message-livestream-thread-action\"\n          onClick={handleOpenThread}\n        >\n          <ThreadIcon />\n        </span>\n      )}\n      <MessageActions\n        {...props}\n        getMessageActions={getMessageActions}\n        customWrapperClass={''}\n        inline\n      />\n    </div>\n  );\n};\n\nMessageLivestreamComponent.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').WrapperAttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to override default edit message input\n   *\n   * Defaults to and accepts same props as: [EditMessageForm](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/EditMessageForm.js)\n   * */\n  EditMessageInput: /** @type {PropTypes.Validator<React.FC<import(\"types\").MessageInputProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to override default pinned message indicator\n   *\n   * Defaults to and accepts same props as: [PinIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message/icon.js)\n   * */\n  PinIndicator: /** @type {PropTypes.Validator<React.FC<import(\"types\").PinIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  )),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes.object),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /** Function to open thread on current message */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., ['edit', 'delete', 'flag', 'mute', 'react', 'reply']\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: /** @type {PropTypes.Validator<() => Array<string>>} */ (PropTypes.func),\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n  /**\n   * A component to display the selector that allows a user to react to a certain message.\n   */\n  ReactionSelector: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionSelectorProps>>} */ (PropTypes.elementType),\n  /**\n   * A component to display the a message list of reactions.\n   */\n  ReactionsList: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionsListProps>>} */ (PropTypes.elementType),\n\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  /** @deprecated This property is no longer used * */\n  actionsEnabled: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired,\n  }),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageLivestreamComponent, areMessagePropsEqual);\n","import React, { useMemo, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport { isOnlyEmojis, renderText, smartRender } from '../../utils';\nimport { ChannelContext, TranslationContext } from '../../context';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MML } from '../MML';\nimport {\n  MessageInput,\n  EditMessageForm as DefaultEditMessageForm,\n} from '../MessageInput';\nimport { MessageActions } from '../MessageActions';\nimport { Tooltip } from '../Tooltip';\nimport { LoadingIndicator } from '../Loading';\nimport {\n  SimpleReactionsList as DefaultReactionsList,\n  ReactionSelector as DefaultReactionSelector,\n} from '../Reactions';\nimport {\n  useUserRole,\n  useActionHandler,\n  useUserHandler,\n  useReactionClick,\n  useRetryHandler,\n  useReactionHandler,\n  useOpenThreadHandler,\n  useMentionsUIHandler,\n  useEditHandler,\n} from './hooks';\nimport { areMessagePropsEqual, getReadByTooltipText } from './utils';\nimport {\n  DeliveredCheckIcon,\n  ErrorIcon,\n  PinIndicator as DefaultPinIndicator,\n  ReactionIcon,\n  ThreadIcon,\n} from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageTeam - Render component, should be used together with the Message component\n * Implements the look and feel for a team style collaboration environment\n *\n * @example ../../docs/MessageTeam.md\n * @typedef { import('types').MessageTeamProps } Props\n *\n * @type {React.FC<Props>}\n */\nconst MessageTeam = (props) => {\n  const {\n    message,\n    threadList,\n    formatDate,\n    initialMessage,\n    unsafeHTML,\n    getMessageActions,\n    Avatar = DefaultAvatar,\n    EditMessageInput = DefaultEditMessageForm,\n    MessageDeleted,\n    PinIndicator = DefaultPinIndicator,\n    ReactionsList = DefaultReactionsList,\n    ReactionSelector = DefaultReactionSelector,\n    editing: propEditing,\n    setEditingState: propSetEdit,\n    clearEditingState: propClearEdit,\n    onMentionsHoverMessage: propOnMentionsHover,\n    onMentionsClickMessage: propOnMentionsClick,\n    channelConfig: propChannelConfig,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    handleReaction: propHandleReaction,\n    handleRetry: propHandleRetry,\n    updateMessage: propUpdateMessage,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    t: propT,\n  } = props;\n\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { channel, updateMessage: channelUpdateMessage } = useContext(\n    ChannelContext,\n  );\n  const channelConfig = propChannelConfig || channel?.getConfig();\n  const { t: contextT, userLanguage } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const groupStyles = props.groupStyles || ['single'];\n  const reactionSelectorRef = useRef(null);\n  const messageWrapperRef = useRef(null);\n  const {\n    editing: ownEditing,\n    setEdit: ownSetEditing,\n    clearEdit: ownClearEditing,\n  } = useEditHandler();\n  const editing = propEditing || ownEditing;\n  const setEdit = propSetEdit || ownSetEditing;\n  const clearEdit = propClearEdit || ownClearEditing;\n  const handleOpenThread = useOpenThreadHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleAction = useActionHandler(message);\n  const retryHandler = useRetryHandler();\n\n  const retry = propHandleRetry || retryHandler;\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const {\n    onReactionListClick,\n    showDetailedReactions,\n    isReactionEnabled,\n  } = useReactionClick(message, reactionSelectorRef, messageWrapperRef);\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const messageTextToRender =\n    message?.i18n?.[`${userLanguage}_text`] || message?.text;\n  const messageMentionedUsersItem = message?.mentioned_users;\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const messageText = useMemo(\n    () => renderText(messageTextToRender, messageMentionedUsersItem),\n    [messageMentionedUsersItem, messageTextToRender],\n  );\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message?.type === 'message.read') {\n    return null;\n  }\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (editing) {\n    return (\n      <div\n        data-testid=\"message-team-edit\"\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className=\"str-chat__message-team-meta\">\n            <Avatar\n              image={message?.user?.image}\n              name={message?.user?.name || message?.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          </div>\n        )}\n        <MessageInput\n          Input={EditMessageInput}\n          message={message}\n          clearEditingState={clearEdit}\n          updateMessage={propUpdateMessage || channelUpdateMessage}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {message?.pinned && (\n        <div className=\"str-chat__message-team-pin-indicator\">\n          <PinIndicator message={message} t={t} />\n        </div>\n      )}\n      <div\n        data-testid=\"message-team\"\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--${\n          message?.type\n        } ${threadList ? 'thread-list' : ''} str-chat__message-team--${\n          message?.status\n        } ${message?.pinned ? 'pinned-message' : ''}`}\n        ref={messageWrapperRef}\n      >\n        <div className=\"str-chat__message-team-meta\">\n          {firstGroupStyle === 'top' ||\n          firstGroupStyle === 'single' ||\n          initialMessage ? (\n            <Avatar\n              image={message?.user?.image}\n              name={message?.user?.name || message?.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          ) : (\n            <div\n              data-testid=\"team-meta-spacer\"\n              style={{ width: 40, marginRight: 0 }}\n            />\n          )}\n          <MessageTimestamp\n            message={message}\n            tDateTimeParser={props.tDateTimeParser}\n            formatDate={formatDate}\n          />\n        </div>\n        <div className=\"str-chat__message-team-group\">\n          {message &&\n            (firstGroupStyle === 'top' ||\n              firstGroupStyle === 'single' ||\n              initialMessage) && (\n              <div\n                data-testid=\"message-team-author\"\n                className=\"str-chat__message-team-author\"\n                onClick={onUserClick}\n              >\n                <strong>{message.user?.name || message.user?.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    {t('Only visible to you')}\n                  </div>\n                )}\n              </div>\n            )}\n          <div\n            data-testid=\"message-team-content\"\n            className={`str-chat__message-team-content str-chat__message-team-content--${firstGroupStyle} str-chat__message-team-content--${\n              message?.text === '' ? 'image' : 'text'\n            }`}\n          >\n            {!initialMessage &&\n              message &&\n              message.status !== 'sending' &&\n              message.status !== 'failed' &&\n              message.type !== 'system' &&\n              message.type !== 'ephemeral' &&\n              message.type !== 'error' && (\n                <div\n                  data-testid=\"message-team-actions\"\n                  className={`str-chat__message-team-actions`}\n                >\n                  {message && showDetailedReactions && (\n                    <ReactionSelector\n                      handleReaction={propHandleReaction || handleReaction}\n                      latest_reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts || undefined}\n                      own_reactions={message.own_reactions}\n                      detailedView={true}\n                      ref={reactionSelectorRef}\n                    />\n                  )}\n\n                  {isReactionEnabled && (\n                    <span\n                      data-testid=\"message-team-reaction-icon\"\n                      title=\"Reactions\"\n                      onClick={onReactionListClick}\n                    >\n                      <ReactionIcon />\n                    </span>\n                  )}\n                  {!threadList && channelConfig?.replies !== false && (\n                    <span\n                      data-testid=\"message-team-thread-icon\"\n                      title=\"Start a thread\"\n                      onClick={propHandleOpenThread || handleOpenThread}\n                    >\n                      <ThreadIcon />\n                    </span>\n                  )}\n                  {message &&\n                    getMessageActions &&\n                    getMessageActions().length > 0 && (\n                      <MessageActions\n                        addNotification={props.addNotification}\n                        message={message}\n                        getMessageActions={props.getMessageActions}\n                        messageListRect={props.messageListRect}\n                        messageWrapperRef={messageWrapperRef}\n                        setEditingState={setEdit}\n                        getMuteUserSuccessNotification={\n                          props.getMuteUserSuccessNotification\n                        }\n                        getMuteUserErrorNotification={\n                          props.getMuteUserErrorNotification\n                        }\n                        getFlagMessageErrorNotification={\n                          props.getFlagMessageErrorNotification\n                        }\n                        getFlagMessageSuccessNotification={\n                          props.getFlagMessageSuccessNotification\n                        }\n                        handleFlag={props.handleFlag}\n                        handleMute={props.handleMute}\n                        handleEdit={props.handleEdit}\n                        handleDelete={props.handleDelete}\n                        handlePin={props.handlePin}\n                        customWrapperClass={''}\n                        inline\n                      />\n                    )}\n                </div>\n              )}\n            {message && (\n              <span\n                data-testid=\"message-team-message\"\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-team-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={onMentionsHover}\n                onClick={onMentionsClick}\n              >\n                {unsafeHTML && message.html ? (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                ) : (\n                  messageText\n                )}\n              </span>\n            )}\n\n            {message?.mml && (\n              <MML\n                source={message.mml}\n                actionHandler={handleAction}\n                align=\"left\"\n              />\n            )}\n\n            {message && message.text === '' && (\n              <MessageTeamAttachments\n                Attachment={props.Attachment}\n                message={message}\n                handleAction={propHandleAction || handleAction}\n              />\n            )}\n\n            {message?.latest_reactions &&\n              message.latest_reactions.length !== 0 &&\n              message.text !== '' &&\n              isReactionEnabled && (\n                <ReactionsList\n                  reaction_counts={message.reaction_counts || undefined}\n                  handleReaction={propHandleReaction || handleReaction}\n                  reactions={message.latest_reactions}\n                  own_reactions={message.own_reactions}\n                />\n              )}\n            {message?.status === 'failed' && (\n              <button\n                data-testid=\"message-team-failed\"\n                className=\"str-chat__message-team-failed\"\n                onClick={() => {\n                  if (message.status === 'failed' && retry) {\n                    // FIXME: type checking fails here because in the case of a failed message,\n                    // `message` is of type Client.Message (i.e. request object)\n                    // instead of Client.MessageResponse (i.e. server response object)\n                    // @ts-expect-error\n                    retry(message);\n                  }\n                }}\n              >\n                <ErrorIcon />\n                {t('Message failed. Click to try again.')}\n              </button>\n            )}\n          </div>\n          <MessageTeamStatus\n            Avatar={Avatar}\n            readBy={props.readBy}\n            message={message}\n            threadList={threadList}\n            lastReceivedId={props.lastReceivedId}\n            t={propT}\n          />\n          {message && message.text !== '' && message.attachments && (\n            <MessageTeamAttachments\n              Attachment={props.Attachment}\n              message={message}\n              handleAction={propHandleAction || handleAction}\n            />\n          )}\n          {message?.latest_reactions &&\n            message.latest_reactions.length !== 0 &&\n            message.text === '' &&\n            isReactionEnabled && (\n              <ReactionsList\n                reaction_counts={message.reaction_counts || undefined}\n                handleReaction={propHandleReaction || handleReaction}\n                reactions={message.latest_reactions}\n                own_reactions={message.own_reactions}\n              />\n            )}\n          {!threadList && message && (\n            <MessageRepliesCountButton\n              onClick={propHandleOpenThread || handleOpenThread}\n              reply_count={message.reply_count}\n            />\n          )}\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\n/** @type {(props: import('types').MessageTeamStatusProps) => React.ReactElement | null} */\nconst MessageTeamStatus = (props) => {\n  const {\n    Avatar = DefaultAvatar,\n    readBy,\n    message,\n    threadList,\n    lastReceivedId,\n    t: propT,\n  } = props;\n  const { client } = useContext(ChannelContext);\n  const { t: contextT } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const { isMyMessage } = useUserRole(message);\n  if (!isMyMessage || message?.type === 'error') {\n    return null;\n  }\n  const justReadByMe =\n    readBy &&\n    client?.user &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    readBy[0].id === client.user.id;\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className=\"str-chat__message-team-status\"\n        data-testid=\"message-team-sending\"\n      >\n        <Tooltip>{t && t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      (item) => item && client?.user && item.id !== client.user.id,\n    )[0];\n    return (\n      <span className=\"str-chat__message-team-status\">\n        <Tooltip>{getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          name={lastReadUser?.name}\n          image={lastReadUser?.image}\n          size={15}\n        />\n        {readBy.length - 1 > 1 && (\n          <span\n            data-testid=\"message-team-read-by-count\"\n            className=\"str-chat__message-team-status-number\"\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        data-testid=\"message-team-received\"\n        className=\"str-chat__message-team-status\"\n      >\n        <Tooltip>{t && t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n\n  return null;\n};\n\n/** @type {(props: import('types').MessageTeamAttachmentsProps) => React.ReactElement | null} Typescript syntax */\nconst MessageTeamAttachments = (props) => {\n  const { Attachment = DefaultAttachment, message, handleAction } = props;\n\n  if (message?.attachments && Attachment) {\n    return (\n      <Attachment\n        attachments={message.attachments}\n        actionHandler={handleAction}\n      />\n    );\n  }\n  return null;\n};\n\nMessageTeam.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').WrapperAttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to override default edit message input\n   *\n   * Defaults to and accepts same props as: [EditMessageForm](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInput/EditMessageForm.js)\n   * */\n  EditMessageInput: /** @type {PropTypes.Validator<React.FC<import(\"types\").MessageInputProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component to override default pinned message indicator\n   *\n   * Defaults to and accepts same props as: [PinIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message/icon.js)\n   * */\n  PinIndicator: /** @type {PropTypes.Validator<React.FC<import(\"types\").PinIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  )),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Client object */\n  client: /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */ (PropTypes.object),\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes.object),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /** Function to open thread on current message */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., ['edit', 'delete', 'flag', 'mute', 'react', 'reply']\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: /** @type {PropTypes.Validator<() => Array<string>>} */ (PropTypes.func),\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n  /**\n   * A component to display the selector that allows a user to react to a certain message.\n   */\n  ReactionSelector: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionSelectorProps>>} */ (PropTypes.elementType),\n  /**\n   * A component to display the a message list of reactions.\n   */\n  ReactionsList: /** @type {PropTypes.Validator<React.ElementType<import('types').ReactionsListProps>>} */ (PropTypes.elementType),\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n  /**\n   * Handler for pinning a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handlePin: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageTeam, areMessagePropsEqual);\n","// @ts-check\nimport React, { useMemo, useContext, useCallback } from 'react';\n\nimport MessageTimestamp from './MessageTimestamp';\nimport { Avatar } from '../Avatar';\nimport { MML } from '../MML';\nimport { renderText } from '../../utils';\nimport { ChatContext, TranslationContext } from '../../context';\nimport { Gallery } from '../Gallery';\nimport { MessageActions } from '../MessageActions';\nimport { useUserRole, useActionHandler } from './hooks';\nimport { getMessageActions } from './utils';\n\n/**\n * @param { number } number\n * @param { boolean } dark\n */\nconst selectColor = (number, dark) => {\n  const hue = number * 137.508; // use golden angle approximation\n  return `hsl(${hue},${dark ? '50%' : '85%'}, ${dark ? '75%' : '55%'})`;\n};\n\n/**\n * @param { string } userId\n */\nconst hashUserId = (userId) => {\n  const hash = userId.split('').reduce((acc, c) => {\n    acc = (acc << 5) - acc + c.charCodeAt(0); // eslint-disable-line\n    return acc & acc; // eslint-disable-line no-bitwise\n  }, 0);\n  return Math.abs(hash) / 10 ** Math.ceil(Math.log10(Math.abs(hash) + 1));\n};\n\n/**\n * @param { string } theme\n * @param { string } userId\n */\nconst getUserColor = (theme, userId) => {\n  return selectColor(hashUserId(userId), theme.includes('dark'));\n};\n\n/**\n * FixedHeightMessage - This component renders a single message.\n * It uses fixed height elements to make sure it works well in VirtualizedMessageList\n * @type {React.FC<import('types').FixedHeightMessageProps>}\n */\nconst FixedHeightMessage = ({ message, groupedByUser }) => {\n  const { theme } = useContext(ChatContext);\n  const { userLanguage } = useContext(TranslationContext);\n\n  const role = useUserRole(message);\n  const handleAction = useActionHandler(message);\n\n  const messageTextToRender =\n    // @ts-expect-error\n    message?.i18n?.[`${userLanguage}_text`] || message?.text;\n\n  const renderedText = useMemo(\n    () => renderText(messageTextToRender, message.mentioned_users),\n    [message.mentioned_users, messageTextToRender],\n  );\n  const userId = message.user?.id;\n  // @ts-expect-error\n  const userColor = useMemo(() => getUserColor(theme, userId), [userId, theme]);\n\n  const messageActionsHandler = useCallback(\n    () => getMessageActions(['delete'], { canDelete: role.canDeleteMessage }),\n    [role],\n  );\n\n  const images = message?.attachments?.filter(({ type }) => type === 'image');\n\n  return (\n    <div\n      key={message.id}\n      className={`str-chat__virtual-message__wrapper ${\n        role.isMyMessage ? 'str-chat__virtual-message__wrapper--me' : ''\n      } ${groupedByUser ? 'str-chat__virtual-message__wrapper--group' : ''}`}\n    >\n      <Avatar\n        shape=\"rounded\"\n        size={38}\n        // @ts-expect-error\n        image={message.user?.image}\n        name={message.user?.name || message.user?.id}\n      />\n\n      <div className=\"str-chat__virtual-message__content\">\n        <div className=\"str-chat__virtual-message__meta\">\n          <div\n            className=\"str-chat__virtual-message__author\"\n            style={{ color: userColor }}\n          >\n            <strong>{message.user?.name || 'unknown'}</strong>\n          </div>\n        </div>\n\n        {images && <Gallery images={images} />}\n\n        <div className=\"str-chat__virtual-message__text\" data-testid=\"msg-text\">\n          {renderedText}\n\n          {message.mml && (\n            <MML\n              source={message.mml}\n              actionHandler={handleAction}\n              align=\"left\"\n            />\n          )}\n\n          <div className=\"str-chat__virtual-message__data\">\n            <MessageActions\n              message={message}\n              customWrapperClass=\"str-chat__virtual-message__actions\"\n              getMessageActions={messageActionsHandler}\n            />\n            <span className=\"str-chat__virtual-message__date\">\n              <MessageTimestamp\n                customClass=\"str-chat__message-simple-timestamp\"\n                message={message}\n              />\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(FixedHeightMessage);\n","/** @type {import('./types').ChannelStateReducer} */\nexport const channelReducer = (state, action) => {\n  switch (action.type) {\n    case 'initStateFromChannel': {\n      const { channel } = action;\n      return {\n        ...state,\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        read: { ...channel.state.read },\n        watchers: { ...channel.state.watchers },\n        members: { ...channel.state.members },\n        watcherCount: channel.state.watcher_count,\n        loading: false,\n      };\n    }\n    case 'copyStateFromChannelOnEvent': {\n      const { channel } = action;\n      return {\n        ...state,\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        read: { ...channel.state.read },\n        watchers: { ...channel.state.watchers },\n        members: { ...channel.state.members },\n        typing: { ...channel.state.typing },\n        watcherCount: channel.state.watcher_count,\n      };\n    }\n    case 'setThread': {\n      const { message } = action;\n      return { ...state, thread: message };\n    }\n    case 'loadMoreFinished': {\n      const { hasMore, messages } = action;\n      return {\n        ...state,\n        loadingMore: false,\n        hasMore,\n        messages,\n      };\n    }\n    case 'setLoadingMore': {\n      const { loadingMore } = action;\n      return { ...state, loadingMore };\n    }\n    case 'copyMessagesFromChannel': {\n      const { channel, parentId } = action;\n      return {\n        ...state,\n        messages: [...channel.state.messages],\n        pinnedMessages: [...channel.state.pinnedMessages],\n        threadMessages: parentId\n          ? { ...channel.state.threads }[parentId] || []\n          : state.threadMessages,\n      };\n    }\n    case 'updateThreadOnEvent': {\n      const { channel, message } = action;\n      if (!state.thread) return state;\n      return {\n        ...state,\n        threadMessages: state.thread?.id\n          ? { ...channel.state.threads }[state.thread.id] || []\n          : [],\n        thread:\n          message?.id === state.thread.id\n            ? channel.state.formatMessage(message)\n            : state.thread,\n      };\n    }\n    case 'openThread': {\n      const { message, channel } = action;\n      return {\n        ...state,\n        thread: message,\n        threadMessages: message.id\n          ? { ...channel.state.threads }[message.id] || []\n          : [],\n      };\n    }\n    case 'startLoadingThread': {\n      return {\n        ...state,\n        threadLoadingMore: true,\n      };\n    }\n    case 'loadMoreThreadFinished': {\n      const { threadHasMore, threadMessages } = action;\n      return {\n        ...state,\n        threadHasMore,\n        threadMessages,\n        threadLoadingMore: false,\n      };\n    }\n    case 'closeThread': {\n      return {\n        ...state,\n        thread: null,\n        threadMessages: [],\n        threadLoadingMore: false,\n      };\n    }\n    case 'setError': {\n      const { error } = action;\n      return { ...state, error };\n    }\n    default:\n      return state;\n  }\n};\n\n/** @type {import('./types').ChannelState} */\nexport const initialState = {\n  error: null,\n  loading: true,\n  loadingMore: false,\n  hasMore: true,\n  messages: [],\n  pinnedMessages: [],\n  typing: {},\n  members: {},\n  watchers: {},\n  watcherCount: 0,\n  read: {},\n  thread: null,\n  threadMessages: [],\n  threadLoadingMore: false,\n  threadHasMore: true,\n};\n","// @ts-check\nimport { useCallback } from 'react';\n\n/**\n * @type {import('types').useMentionsHandlers}\n */\nconst useMentionsHandlers = (onMentionsHover, onMentionsClick) => {\n  return useCallback(\n    (e, mentioned_users) => {\n      if (!onMentionsHover && !onMentionsClick) return;\n      // eslint-disable-next-line prefer-destructuring\n      const target = /** @type {HTMLSpanElement} */ (e.target);\n      const tagName = target?.tagName.toLowerCase();\n      const textContent = target?.innerHTML.replace('*', '');\n      if (tagName === 'strong' && textContent[0] === '@') {\n        const userName = textContent.replace('@', '');\n        const user = mentioned_users.find(\n          ({ name, id }) => name === userName || id === userName,\n        );\n        if (\n          onMentionsHover &&\n          typeof onMentionsHover === 'function' &&\n          e.type === 'mouseover'\n        ) {\n          onMentionsHover(e, user);\n        }\n        if (\n          onMentionsClick &&\n          e.type === 'click' &&\n          typeof onMentionsClick === 'function'\n        ) {\n          onMentionsClick(e, user);\n        }\n      }\n    },\n    [onMentionsClick, onMentionsHover],\n  );\n};\n\nexport default useMentionsHandlers;\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @type {import('types').useEditMessageHandler}\n */\nconst useEditMessageHandler = (doUpdateMessageRequest) => {\n  const { channel, client } = useContext(ChatContext);\n  return (updatedMessage) => {\n    if (doUpdateMessageRequest && channel) {\n      return Promise.resolve(\n        doUpdateMessageRequest(channel.cid, updatedMessage),\n      );\n    }\n    return client.updateMessage(updatedMessage);\n  };\n};\n\nexport default useEditMessageHandler;\n","import { useRef, useEffect } from 'react';\n\nexport default () => {\n  const isMounted = useRef(true);\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n","import React, {\n  useEffect,\n  useCallback,\n  useContext,\n  useRef,\n  useReducer,\n  useLayoutEffect,\n} from 'react';\n// @ts-expect-error\nimport DefaultEmoji from 'emoji-mart/dist/components/emoji/nimble-emoji.js';\n// @ts-expect-error\nimport DefaultEmojiIndex from 'emoji-mart/dist/utils/emoji-index/nimble-emoji-index.js';\n// @ts-expect-error\nimport DefaultEmojiPicker from 'emoji-mart/dist/components/picker/nimble-picker.js';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport PropTypes from 'prop-types';\nimport { logChatPromiseExecution, Channel as StreamChannel } from 'stream-chat';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { commonEmoji, defaultMinimalEmojis, emojiSetDef } from './emojiData';\nimport { MessageSimple } from '../Message';\nimport {\n  LoadingIndicator as DefaultLoadingIndicator,\n  LoadingErrorIndicator as DefaultLoadingErrorIndicator,\n} from '../Loading';\n\nimport { channelReducer, initialState } from './channelState';\nimport useMentionsHandlers from './hooks/useMentionsHandlers';\nimport useEditMessageHandler from './hooks/useEditMessageHandler';\nimport useIsMounted from './hooks/useIsMounted';\n\nimport { ChatContext, ChannelContext, TranslationContext } from '../../context';\nimport defaultEmojiData from '../../stream-emoji.json';\n\n/** @type {React.FC<import('types').ChannelProps>}>} */\nconst Channel = ({ EmptyPlaceholder = null, ...props }) => {\n  const { channel: contextChannel } = useContext(ChatContext);\n\n  const channel = props.channel || contextChannel;\n\n  if (!channel?.cid) return EmptyPlaceholder;\n\n  return <ChannelInner {...props} channel={channel} key={channel.cid} />;\n};\n\n/** @type {React.FC<import('types').ChannelProps & { channel: import('stream-chat').Channel }>} */\nconst ChannelInner = ({\n  Attachment = DefaultAttachment,\n  doMarkReadRequest,\n  Emoji = DefaultEmoji,\n  emojiData = defaultEmojiData,\n  EmojiIndex = DefaultEmojiIndex,\n  EmojiPicker = DefaultEmojiPicker,\n  LoadingErrorIndicator = DefaultLoadingErrorIndicator,\n  LoadingIndicator = DefaultLoadingIndicator,\n  Message = MessageSimple,\n  ...props\n}) => {\n  const { channel } = props;\n\n  const { client, mutes, theme } = useContext(ChatContext);\n  const { t } = useContext(TranslationContext);\n\n  const [state, dispatch] = useReducer(channelReducer, initialState);\n\n  const isMounted = useIsMounted();\n\n  const originalTitle = useRef('');\n  const lastRead = useRef(new Date());\n  const online = useRef(true);\n\n  const emojiConfig = {\n    commonEmoji,\n    defaultMinimalEmojis,\n    Emoji,\n    emojiData,\n    EmojiIndex,\n    EmojiPicker,\n    emojiSetDef,\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const throttledCopyStateFromChannel = useCallback(\n    throttle(\n      () => {\n        dispatch({ type: 'copyStateFromChannelOnEvent', channel });\n      },\n      500,\n      { leading: true, trailing: true },\n    ),\n    [channel],\n  );\n\n  const markRead = useCallback(() => {\n    if (channel.disconnected || !channel.getConfig()?.read_events) {\n      return;\n    }\n    lastRead.current = new Date();\n    if (doMarkReadRequest) {\n      doMarkReadRequest(channel);\n    } else {\n      logChatPromiseExecution(channel.markRead(), 'mark read');\n    }\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel, doMarkReadRequest]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const markReadThrottled = useCallback(\n    throttle(markRead, 500, { leading: true, trailing: true }),\n    [markRead],\n  );\n\n  const handleEvent = useCallback(\n    (e) => {\n      dispatch({ type: 'updateThreadOnEvent', message: e.message, channel });\n      if (e.type === 'connection.changed') {\n        online.current = e.online;\n      }\n\n      if (e.type === 'message.new') {\n        let mainChannelUpdated = true;\n        if (e.message.parent_id && !e.message.show_in_channel) {\n          mainChannelUpdated = false;\n        }\n\n        if (mainChannelUpdated && e.message.user.id !== client.userID) {\n          if (!document.hidden) {\n            markReadThrottled();\n          } else if (\n            channel.getConfig()?.read_events &&\n            !channel.muteStatus().muted\n          ) {\n            const unread = channel.countUnread(lastRead.current);\n            document.title = `(${unread}) ${originalTitle.current}`;\n          }\n        }\n      }\n\n      throttledCopyStateFromChannel();\n    },\n    [channel, throttledCopyStateFromChannel, client.userID, markReadThrottled],\n  );\n\n  // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n  useLayoutEffect(() => {\n    let errored = false;\n    let done = false;\n    const onVisibilityChange = () => {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n\n    (async () => {\n      if (!channel.initialized) {\n        try {\n          await channel.watch();\n        } catch (e) {\n          dispatch({ type: 'setError', error: e });\n          errored = true;\n        }\n      }\n      done = true;\n      originalTitle.current = document.title;\n      if (!errored) {\n        dispatch({ type: 'initStateFromChannel', channel });\n        if (channel.countUnread() > 0) markRead();\n        // The more complex sync logic is done in chat.js\n        // listen to client.connection.recovered and all channel events\n        document.addEventListener('visibilitychange', onVisibilityChange);\n        client.on('connection.changed', handleEvent);\n        client.on('connection.recovered', handleEvent);\n        channel.on(handleEvent);\n      }\n    })();\n    return () => {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      channel.off(handleEvent);\n      client.off('connection.changed', handleEvent);\n      client.off('connection.recovered', handleEvent);\n    };\n  }, [channel, client, handleEvent, markRead, props.channel]);\n\n  useEffect(() => {\n    if (state.thread) {\n      for (let i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({ type: 'setThread', message: state.messages[i] });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]);\n\n  // Message\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const loadMoreFinished = useCallback(\n    debounce(\n      /**\n       * @param {boolean} hasMore\n       * @param {import('stream-chat').ChannelState['messages']} messages\n       */\n      (hasMore, messages) => {\n        if (!isMounted.current) return;\n        dispatch({ type: 'loadMoreFinished', hasMore, messages });\n      },\n      2000,\n      {\n        leading: true,\n        trailing: true,\n      },\n    ),\n    [],\n  );\n\n  const loadMore = useCallback(\n    async (limit = 100) => {\n      if (!online.current || !window.navigator.onLine) return 0;\n      // prevent duplicate loading events...\n      const oldestMessage = state.messages[0];\n      if (state.loadingMore || oldestMessage?.status !== 'received') return 0;\n      dispatch({ type: 'setLoadingMore', loadingMore: true });\n\n      const oldestID = oldestMessage?.id;\n\n      const perPage = limit;\n      let queryResponse;\n      try {\n        queryResponse = await channel.query({\n          messages: { limit: perPage, id_lt: oldestID },\n        });\n      } catch (e) {\n        console.warn('message pagination request failed with error', e);\n        dispatch({ type: 'setLoadingMore', loadingMore: false });\n        return 0;\n      }\n      const hasMoreMessages = queryResponse.messages.length === perPage;\n\n      loadMoreFinished(hasMoreMessages, channel.state.messages);\n\n      return queryResponse.messages.length;\n    },\n    [channel, loadMoreFinished, state.loadingMore, state.messages, online],\n  );\n\n  const updateMessage = useCallback(\n    (updatedMessage) => {\n      // adds the message to the local channel state..\n      // this adds to both the main channel state as well as any reply threads\n      channel.state.addMessageSorted(updatedMessage, true);\n\n      dispatch({\n        type: 'copyMessagesFromChannel',\n        parentId: state.thread && updatedMessage.parent_id,\n        channel,\n      });\n    },\n    [channel, state.thread],\n  );\n\n  const { doSendMessageRequest } = props;\n  const doSendMessage = useCallback(\n    async (message) => {\n      const { text, attachments, id, parent_id, mentioned_users } = message;\n      const messageData = {\n        text,\n        attachments,\n        mentioned_users,\n        id,\n        parent_id,\n      };\n\n      try {\n        let messageResponse;\n        if (doSendMessageRequest) {\n          messageResponse = await doSendMessageRequest(\n            channel.cid,\n            messageData,\n          );\n        } else {\n          messageResponse = await channel.sendMessage(messageData);\n        }\n\n        // replace it after send is completed\n        if (messageResponse && messageResponse.message) {\n          updateMessage({\n            ...messageResponse.message,\n            status: 'received',\n          });\n        }\n      } catch (e) {\n        // set the message to failed..\n        updateMessage({\n          ...message,\n          status: 'failed',\n        });\n      }\n    },\n    [channel, doSendMessageRequest, updateMessage],\n  );\n\n  const createMessagePreview = useCallback(\n    (text, attachments, parent, mentioned_users) => {\n      // create a preview of the message\n      const clientSideID = `${client.userID}-${uuidv4()}`;\n      return {\n        text,\n        html: text,\n        __html: text,\n        id: clientSideID,\n        type: 'regular',\n        status: 'sending',\n        user: client.user,\n        created_at: new Date(),\n        attachments,\n        mentioned_users,\n        reactions: [],\n        ...(parent?.id ? { parent_id: parent.id } : null),\n      };\n    },\n    [client.user, client.userID],\n  );\n\n  const sendMessage = useCallback(\n    async ({ text, attachments = [], mentioned_users = [], parent }) => {\n      // remove error messages upon submit\n      channel.state.filterErrorMessages();\n\n      // create a local preview message to show in the UI\n      const messagePreview = createMessagePreview(\n        text,\n        attachments,\n        parent,\n        mentioned_users,\n      );\n\n      // first we add the message to the UI\n      updateMessage(messagePreview);\n\n      await doSendMessage(messagePreview);\n    },\n    [channel.state, createMessagePreview, doSendMessage, updateMessage],\n  );\n\n  const retrySendMessage = useCallback(\n    async (message) => {\n      // set the message status to sending\n      updateMessage({\n        ...message,\n        status: 'sending',\n      });\n      // actually try to send the message...\n      await doSendMessage(message);\n    },\n    [doSendMessage, updateMessage],\n  );\n\n  const removeMessage = useCallback(\n    (message) => {\n      channel.state.removeMessage(message);\n      dispatch({\n        type: 'copyMessagesFromChannel',\n        parentId: state.thread && message.parent_id,\n        channel,\n      });\n    },\n    [channel, state.thread],\n  );\n\n  // Thread\n\n  const openThread = useCallback(\n    (message, e) => {\n      if (e && e.preventDefault) {\n        e.preventDefault();\n      }\n\n      dispatch({ type: 'openThread', message, channel });\n    },\n    [channel],\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const loadMoreThreadFinished = useCallback(\n    debounce(\n      /**\n       * @param {boolean} threadHasMore\n       * @param {Array<ReturnType<import('stream-chat').ChannelState['formatMessage']>>} threadMessages\n       */\n      (threadHasMore, threadMessages) => {\n        dispatch({\n          type: 'loadMoreThreadFinished',\n          threadHasMore,\n          threadMessages,\n        });\n      },\n      2000,\n      { leading: true, trailing: true },\n    ),\n    [],\n  );\n\n  const loadMoreThread = useCallback(async () => {\n    // prevent duplicate loading events...\n    if (state.threadLoadingMore || !state.thread) return;\n    dispatch({ type: 'startLoadingThread' });\n    const parentID = state.thread.id;\n\n    if (!parentID) {\n      dispatch({ type: 'closeThread' });\n      return;\n    }\n\n    const oldMessages = channel.state.threads[parentID] || [];\n    const oldestMessageID = oldMessages[0]?.id;\n    const limit = 50;\n\n    try {\n      const queryResponse = await channel.getReplies(parentID, {\n        limit,\n        id_lt: oldestMessageID,\n      });\n\n      const threadHasMoreMessages = queryResponse.messages.length === limit;\n      const newThreadMessages = channel.state.threads[parentID] || [];\n\n      // next set loadingMore to false so we can start asking for more data...\n      loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n    } catch (e) {\n      loadMoreThreadFinished(false, oldMessages);\n    }\n  }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n\n  const closeThread = useCallback((e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n    dispatch({ type: 'closeThread' });\n  }, []);\n\n  const onMentionsHoverOrClick = useMentionsHandlers(\n    props.onMentionsHover,\n    props.onMentionsClick,\n  );\n\n  const editMessage = useEditMessageHandler(props.doUpdateMessageRequest);\n\n  const channelContextValue = {\n    // state\n    ...state,\n    watcher_count: state.watcherCount,\n    // props\n    acceptedFiles: props.acceptedFiles,\n    Attachment,\n    channel,\n    maxNumberOfFiles: props.maxNumberOfFiles,\n    Message,\n    multipleUploads: props.multipleUploads,\n    mutes,\n    // handlers\n    closeThread,\n    editMessage,\n    loadMore,\n    loadMoreThread,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    onUserClick: props.onUserClick,\n    onUserHover: props.onUserHover,\n    openThread,\n    removeMessage,\n    retrySendMessage,\n    sendMessage,\n    updateMessage,\n    // from chatContext, for legacy reasons\n    client,\n    // emoji config and customization object, potentially find a better home\n    emojiConfig,\n    dispatch,\n  };\n\n  let core;\n  if (state.error) {\n    core = <LoadingErrorIndicator error={state.error} />;\n  } else if (state.loading) {\n    core = <LoadingIndicator size={25} />;\n  } else if (!props.channel?.watch) {\n    core = <div>{t('Channel Missing')}</div>;\n  } else {\n    core = (\n      <ChannelContext.Provider value={channelContextValue}>\n        <div className=\"str-chat__container\">{props.children}</div>\n      </ChannelContext.Provider>\n    );\n  }\n\n  return <div className={`str-chat str-chat-channel ${theme}`}>{core}</div>;\n};\n\nChannel.defaultProps = {\n  multipleUploads: true,\n};\n\nChannel.propTypes = {\n  /** Which channel to connect to, will initialize the channel if it's not initialized yet */\n  channel: PropTypes.instanceOf(StreamChannel),\n  /**\n   * Empty channel UI component. This will be shown on the screen if there is no active channel.\n   *\n   * Defaults to null which skips rendering the Channel\n   *\n   * */\n  EmptyPlaceholder: PropTypes.element,\n  /**\n   * Error indicator UI component. This will be shown on the screen if channel query fails.\n   *\n   * Defaults to and accepts same props as: [LoadingErrorIndicator](https://getstream.github.io/stream-chat-react/#loadingerrorindicator)\n   *\n   * */\n  // @ts-expect-error elementType\n  LoadingErrorIndicator: PropTypes.elementType,\n  /**\n   * Loading indicator UI component. This will be shown on the screen until the messages are\n   * being queried from channel. Once the messages are loaded, loading indicator is removed from the screen\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\n   */\n  // @ts-expect-error elementType\n  LoadingIndicator: PropTypes.elementType,\n  /**\n   * Message UI component to display a message in message list.\n   *\n   * Available built-in components (also accepts the same props as):\n   *\n   * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.js) (default)\n   * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.js)\n   * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.js)\n   * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.js)\n   *\n   * */\n  // @ts-expect-error elementType\n  Message: PropTypes.elementType,\n  /**\n   * Attachment UI component to display attachment in individual message.\n   *\n   * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  // @ts-expect-error elementType\n  Attachment: PropTypes.elementType,\n  /**\n   * Handle for click on @mention in message\n   *\n   * @param {Event} event DOM Click event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\n   */\n  onMentionsClick: PropTypes.func,\n  /**\n   * Handle for hover on @mention in message\n   *\n   * @param {Event} event DOM hover event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\n   */\n  onMentionsHover: PropTypes.func,\n  /**\n   * Callback invoked when the user clicks on an avatar\n   *\n   * @param {Event} event DOM click event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * Callback invoked when the user hovers over an avatar\n   *\n   * @param {Event} event DOM hover event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\n   */\n  onUserHover: PropTypes.func,\n  /** Whether to allow multiple attachment uploads */\n  multipleUploads: PropTypes.bool,\n  /** List of accepted file types */\n  acceptedFiles: PropTypes.array,\n  /** Maximum number of attachments allowed per message */\n  maxNumberOfFiles: PropTypes.number,\n  /** Override send message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} message\n   */\n  doSendMessageRequest: PropTypes.func,\n  /**\n   * Override mark channel read request (Advanced usage only)\n   *\n   * @param {Channel} channel object\n   * */\n  doMarkReadRequest: PropTypes.func,\n  /** Override update(edit) message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} updatedMessage\n   */\n  doUpdateMessageRequest: PropTypes.func,\n  /**\n   * Optional component to override default NimbleEmoji from emoji-mart\n   */\n  // @ts-expect-error import type when converted to TS\n  Emoji: /** @type {PropTypes.Validator<React.ElementType<NimbleEmojiProps>>} */ (PropTypes.elementType),\n  /**\n   * Optional prop to override default facebook.json emoji data set from emoji-mart\n   */\n  // @ts-expect-error import type when converted to TS\n  emojiData: /** @type {PropTypes.Validator<EmojiMartData>} */ (PropTypes.object),\n  /**\n   * Optional component to override default NimbleEmojiIndex from emoji-mart\n   */\n  // @ts-expect-error import type when converted to TS\n  EmojiIndex: /** @type {PropTypes.Validator<NimbleEmojiIndex>} */ (PropTypes.object),\n  /**\n   * Optional component to override default NimblePicker from emoji-mart\n   */\n  // @ts-expect-error import type when converted to TS\n  EmojiPicker: /** @type {PropTypes.Validator<React.ElementType<NimblePickerProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(Channel);\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { ChannelContext, ChatContext, TranslationContext } from '../../context';\n\n/**\n * ChannelHeader - Render some basic information about this channel\n * @example ../../docs/ChannelHeader.md\n * @type {React.FC<import('types').ChannelHeaderProps>}\n */\nconst ChannelHeader = (props) => {\n  const { Avatar = DefaultAvatar, image: propImage, live, title } = props;\n\n  const { channel, watcher_count } = useContext(ChannelContext);\n  const { openMobileNav } = useContext(ChatContext);\n  const { t } = useContext(TranslationContext);\n\n  const { image: channelImage, member_count, name, subtitle } =\n    channel?.data || {};\n\n  const image = propImage || channelImage;\n\n  return (\n    <div className=\"str-chat__header-livestream\">\n      <div className=\"str-chat__header-hamburger\" onClick={openMobileNav}>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n      </div>\n      {image && (\n        <Avatar\n          image={image}\n          shape=\"rounded\"\n          size={channel?.type === 'commerce' ? 60 : 40}\n        />\n      )}\n      <div className=\"str-chat__header-livestream-left\">\n        <p className=\"str-chat__header-livestream-left--title\">\n          {title || name}{' '}\n          {live && (\n            <span className=\"str-chat__header-livestream-left--livelabel\">\n              {t('live')}\n            </span>\n          )}\n        </p>\n        {subtitle && (\n          <p className=\"str-chat__header-livestream-left--subtitle\">\n            {subtitle}\n          </p>\n        )}\n        <p className=\"str-chat__header-livestream-left--members\">\n          {!live && !!member_count && member_count > 0 && (\n            <>\n              {t('{{ memberCount }} members', {\n                memberCount: member_count,\n              })}\n              ,{' '}\n            </>\n          )}\n          {t('{{ watcherCount }} online', { watcherCount: watcher_count })}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nChannelHeader.propTypes = {\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /** Manually set the image to render, defaults to the channel image */\n  image: PropTypes.string,\n  /** Show a little indicator that the channel is live right now */\n  live: PropTypes.bool,\n  /** Set title manually */\n  title: PropTypes.string,\n};\n\nexport default React.memo(ChannelHeader);\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LoadingChannels } from '../Loading';\nimport { TranslationContext } from '../../context';\n\nimport placeholder from '../../assets/str-chat__connection-error.svg';\n\n/**\n * ChatDown - Indicator that chat is down or your network isn't working\n * @example ../../docs/ChatDown.md\n * @typedef {import('types').ChatDownProps} Props\n * @type {React.FC<Props>}\n */\nconst ChatDown = ({ image, type = 'Error', text }) => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <div className=\"str-chat__down\">\n      <LoadingChannels />\n      <div className=\"str-chat__down-main\">\n        <img data-testid=\"chatdown-img\" src={image || placeholder} />\n        <h1>{type}</h1>\n        <h3>\n          {text ||\n            t('Error connecting to chat, refresh the page to try again.')}\n        </h3>\n      </div>\n    </div>\n  );\n};\n\nChatDown.propTypes = {\n  /** The image url for this error */\n  image: PropTypes.string,\n  /** The type of error */\n  type: PropTypes.string.isRequired,\n  /** The error message to show */\n  text: PropTypes.string,\n};\n\nexport default React.memo(ChatDown);\n","export default \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","// @ts-check\n\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { ChatDown } from '../ChatDown';\nimport { LoadingChannels } from '../Loading';\nimport { ChatContext } from '../../context';\n\nimport chevrondown from '../../assets/str-chat__icon-chevron-down.svg';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('types').ChannelListUIComponentProps>\n */\nconst ChannelListTeam = ({\n  error = false,\n  loading,\n  sidebarImage,\n  showSidebar,\n  Avatar = DefaultAvatar,\n  LoadingErrorIndicator = ChatDown,\n  LoadingIndicator = LoadingChannels,\n  children,\n}) => {\n  const { client } = useContext(ChatContext);\n  const { id, image, name, status } = client.user || {};\n\n  if (error) {\n    return <LoadingErrorIndicator type=\"Connection Error\" />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className=\"str-chat__channel-list-team\">\n      {showSidebar && (\n        <div className=\"str-chat__channel-list-team__sidebar\">\n          <div className=\"str-chat__channel-list-team__sidebar--top\">\n            <Avatar image={sidebarImage} size={50} />\n          </div>\n        </div>\n      )}\n      <div className=\"str-chat__channel-list-team__main\">\n        <div className=\"str-chat__channel-list-team__header\">\n          <div className=\"str-chat__channel-list-team__header--left\">\n            <Avatar image={image} name={name || id} size={40} />\n          </div>\n          <div className=\"str-chat__channel-list-team__header--middle\">\n            <div className=\"str-chat__channel-list-team__header--title\">\n              {name || id}\n            </div>\n            <div\n              className={`str-chat__channel-list-team__header--status ${status}`}\n            >\n              {status}\n            </div>\n          </div>\n          <div className=\"str-chat__channel-list-team__header--right\">\n            <button className=\"str-chat__channel-list-team__header--button\">\n              <img src={chevrondown} />\n            </button>\n          </div>\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nChannelListTeam.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n  /** When true, sidebar containing logo of the team is visible */\n  showSidebar: PropTypes.bool,\n  /** Url for sidebar logo image. */\n  sidebarImage: PropTypes.string,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelListTeam;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// @ts-expect-error\nimport { LoadingIndicator } from 'react-file-utils';\n\n/**\n * @type {React.FC<import('types').LoadMoreButtonProps>}\n */\nconst LoadMoreButton = ({ onClick, refreshing, children = 'Load more' }) => (\n  <div className=\"str-chat__load-more-button\">\n    <button\n      className=\"str-chat__load-more-button__button\"\n      onClick={onClick}\n      data-testid=\"load-more-button\"\n      disabled={refreshing}\n    >\n      {refreshing ? <LoadingIndicator /> : children}\n    </button>\n  </div>\n);\n\nLoadMoreButton.propTypes = {\n  /** onClick handler load more button. Pagination logic should be executed in this handler. */\n  onClick: PropTypes.func.isRequired,\n  /** If true, LoadingIndicator is displayed instead of button */\n  refreshing: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(LoadMoreButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport DefaultLoadMoreButton from './LoadMoreButton';\nimport { smartRender } from '../../utils';\n\nconst LoadMorePaginator = ({\n  reverse,\n  hasNextPage,\n  refreshing,\n  loadNextPage,\n  LoadMoreButton,\n  children,\n}) => (\n  <>\n    {!reverse && children}\n    {hasNextPage &&\n      smartRender(LoadMoreButton, { refreshing, onClick: loadNextPage })}\n    {reverse && children}\n  </>\n);\n\nLoadMorePaginator.defaultProps = {\n  LoadMoreButton: DefaultLoadMoreButton,\n};\n\nLoadMorePaginator.propTypes = {\n  LoadMoreButton: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.func,\n    PropTypes.object,\n  ]),\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func,\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n  /** display the items in opposite order */\n  reverse: PropTypes.bool,\n};\n\nexport default React.memo(LoadMorePaginator);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * @type {React.FC<import('types').EmptyStateIndicatorProps>} param0\n */\nconst EmptyStateIndicator = ({ listType }) => {\n  const { t } = useContext(TranslationContext);\n  if (listType === 'channel')\n    return <p>{t('You have no channels currently')}</p>;\n\n  if (listType === 'message') return null;\n\n  return <p>No items exist</p>;\n};\n\nEmptyStateIndicator.propTypes = {\n  /** channel | message */\n  listType: PropTypes.string.isRequired,\n};\n\nexport default React.memo(EmptyStateIndicator);\n","// @ts-check\n\n/**\n * @param {string | undefined} cid\n * @param {import('stream-chat').Channel[]} channels\n */\nexport const moveChannelUp = (cid, channels) => {\n  // get channel index\n  const channelIndex = channels.findIndex((channel) => channel.cid === cid);\n\n  if (channelIndex <= 0) return channels;\n\n  // get channel from channels\n  const channel = channels[channelIndex];\n\n  // remove channel from current position\n  channels.splice(channelIndex, 1);\n  // add channel at the start\n  channels.unshift(channel);\n\n  return [...channels];\n};\n\n/**\n * @param {import('types').StreamChatReactClient} client\n * @param {string} type\n * @param {string} id\n */\nexport const getChannel = async (client, type, id) => {\n  const channel = client.channel(type, id);\n  await channel.watch();\n  return channel;\n};\n\nexport const MAX_QUERY_CHANNELS_LIMIT = 30;\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\n\nimport { ChatContext } from '../../../context';\nimport { moveChannelUp } from '../utils';\n\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {boolean} [lockChannelOrder]\n */\nexport const useMessageNewListener = (\n  setChannels,\n  lockChannelOrder = false,\n  allowNewMessagesFromUnfilteredChannels = true,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} event */\n    const handleEvent = (event) => {\n      setChannels((channels) => {\n        const channelInList =\n          channels.filter((channel) => channel.cid === event.cid).length > 0;\n        if (\n          !channelInList &&\n          allowNewMessagesFromUnfilteredChannels &&\n          event.channel_type\n        ) {\n          const channel = client.channel(event.channel_type, event.channel_id);\n          return uniqBy([channel, ...channels], 'cid');\n        }\n        if (!lockChannelOrder) return moveChannelUp(event.cid, channels);\n        return channels;\n      });\n    };\n    client.on('message.new', handleEvent);\n    return () => {\n      client.off('message.new', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lockChannelOrder]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { ChatContext } from '../../../context';\nimport { getChannel } from '../utils';\n\n/**\n * @typedef {import('stream-chat').Event} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationMessageNewListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = async (e) => {\n      // if new message, put move channel up\n      // get channel if not in state currently\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else if (e.channel?.type) {\n        const channel = await getChannel(client, e.channel.type, e.channel.id);\n        // move channel to starting position\n        setChannels((channels) => {\n          return uniqBy([channel, ...channels], 'cid');\n        });\n      }\n    };\n\n    client.on('notification.message_new', handleEvent);\n\n    return () => {\n      client.off('notification.message_new', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { ChatContext } from '../../../context';\nimport { getChannel } from '../utils';\n\n/**\n * @typedef {import('stream-chat').Event} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationAddedToChannelListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = async (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else if (e.channel?.type) {\n        const channel = await getChannel(client, e.channel.type, e.channel.id);\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('notification.added_to_channel', handleEvent);\n\n    return () => {\n      client.off('notification.added_to_channel', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationRemovedFromChannelListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels((channels) =>\n          channels.filter((channel) => channel.cid !== e.channel?.cid),\n        );\n      }\n    };\n\n    client.on('notification.removed_from_channel', handleEvent);\n\n    return () => {\n      client.off('notification.removed_from_channel', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event} ChannelDeletedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelDeletedEvent) => void} [customHandler]\n */\nexport const useChannelDeletedListener = (setChannels, customHandler) => {\n  const { client } = useContext(ChatContext);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels((channels) => {\n          const channelIndex = channels.findIndex(\n            (channel) => channel.cid === e?.cid,\n          );\n\n          if (channelIndex < 0) return [...channels];\n\n          // Remove the deleted channel from the list.s\n          channels.splice(channelIndex, 1);\n\n          // eslint-disable-next-line consistent-return\n          return [...channels];\n        });\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event} ChannelTruncatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelTruncatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\nexport const useChannelTruncatedListener = (\n  setChannels,\n  customHandler,\n  forceUpdate,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => [...channels]);\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('channel.truncated', handleEvent);\n\n    return () => {\n      client.off('channel.truncated', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event} ChannelUpdatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelUpdatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\nexport const useChannelUpdatedListener = (\n  setChannels,\n  customHandler,\n  forceUpdate,\n) => {\n  const { client } = useContext(ChatContext);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => {\n        const channelIndex = channels.findIndex(\n          (channel) => channel.cid === e.channel?.cid,\n        );\n\n        if (channelIndex > -1 && e.channel) {\n          const newChannels = channels;\n          newChannels[channelIndex].data = e.channel;\n          return [...newChannels];\n        }\n\n        return channels;\n      });\n      if (forceUpdate) {\n        forceUpdate();\n      }\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n    };\n\n    client.on('channel.updated', handleEvent);\n\n    return () => {\n      client.off('channel.updated', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event} ChannelHiddenEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelHiddenEvent) => void} [customHandler]\n */\nexport const useChannelHiddenListener = (setChannels, customHandler) => {\n  const { client } = useContext(ChatContext);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels((channels) => {\n          const channelIndex = channels.findIndex(\n            (channel) => channel.cid === e?.cid,\n          );\n          if (channelIndex < 0) return [...channels];\n\n          // Remove the hidden channel from the list.s\n          channels.splice(channelIndex, 1);\n\n          // eslint-disable-next-line consistent-return\n          return [...channels];\n        });\n      }\n    };\n\n    client.on('channel.hidden', handleEvent);\n\n    return () => {\n      client.off('channel.hidden', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { ChatContext } from '../../../context';\nimport { getChannel } from '../utils';\n\n/**\n * @typedef {import('stream-chat').Event} ChannelVisibleEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelVisibleEvent) => void} [customHandler]\n */\nexport const useChannelVisibleListener = (setChannels, customHandler) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = async (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else if (e?.type && e.channel_type && e.channel_id) {\n        const channel = await getChannel(client, e.channel_type, e.channel_id);\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('channel.visible', handleEvent);\n\n    return () => {\n      client.off('channel.visible', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @param {() => void} [forceUpdate]\n */\nexport const useConnectionRecoveredListener = (forceUpdate) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    const handleEvent = () => {\n      if (forceUpdate) {\n        forceUpdate();\n      }\n    };\n\n    client.on('connection.recovered', handleEvent);\n\n    return () => {\n      client.off('connection.recovered', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n */\nexport const useUserPresenceChangedListener = (setChannels) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} event */\n    const handleEvent = (event) => {\n      setChannels((channels) => {\n        const newChannels = channels.map((channel) => {\n          if (!event.user?.id || !channel.state.members[event.user.id])\n            return channel;\n\n          const newChannel = channel; // dumb workaround for linter\n          newChannel.state.members[event.user.id].user = event.user;\n\n          return newChannel;\n        });\n\n        return [...newChannels];\n      });\n    };\n\n    client.on('user.presence.changed', handleEvent);\n\n    return () => {\n      client.off('user.presence.changed', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","// @ts-check\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { MAX_QUERY_CHANNELS_LIMIT } from '../utils';\n/**\n * @typedef {import('stream-chat').Channel} Channel\n * @param {import('types').StreamChatReactClient} client\n * @param {import('stream-chat').ChannelFilters} filters\n * @param {import('stream-chat').ChannelSort} [sort]\n * @param {import('stream-chat').ChannelOptions} [options]\n * @param {(channels: Channel[], setChannels: React.Dispatch<React.SetStateAction<Channel[]>>) => void} [activeChannelHandler]\n */\nexport const usePaginatedChannels = (\n  client,\n  filters,\n  sort,\n  options,\n  activeChannelHandler,\n) => {\n  const [channels, setChannels] = useState(/** @type {Channel[]} */ ([]));\n  const [loadingChannels, setLoadingChannels] = useState(true);\n  const [refreshing, setRefreshing] = useState(true);\n  const [offset, setOffset] = useState(0);\n  const [error, setError] = useState(false);\n  const [hasNextPage, setHasNextPage] = useState(true);\n\n  const filterString = useMemo(() => JSON.stringify(filters), [filters]);\n\n  /**\n   * @param {string} [queryType]\n   */\n  const queryChannels = async (queryType) => {\n    if (queryType === 'reload') {\n      setChannels([]);\n      setLoadingChannels(true);\n    }\n\n    setRefreshing(true);\n\n    const newOptions = {\n      offset: queryType === 'reload' ? 0 : offset,\n      ...options,\n      limit: options?.limit ?? MAX_QUERY_CHANNELS_LIMIT,\n    };\n\n    try {\n      const channelQueryResponse = await client.queryChannels(\n        filters,\n        sort || {},\n        newOptions,\n      );\n\n      let newChannels;\n      if (queryType === 'reload') {\n        newChannels = channelQueryResponse;\n      } else {\n        newChannels = [...channels, ...channelQueryResponse];\n      }\n\n      setChannels(newChannels);\n      setHasNextPage(channelQueryResponse.length >= newOptions.limit);\n      // Set active channel only after first page.\n      if (offset === 0 && activeChannelHandler) {\n        activeChannelHandler(newChannels, setChannels);\n      }\n\n      setOffset(newChannels.length);\n    } catch (e) {\n      console.warn(e);\n      setError(true);\n    }\n    setLoadingChannels(false);\n    setRefreshing(false);\n  };\n\n  const loadNextPage = () => {\n    queryChannels();\n  };\n\n  useEffect(() => {\n    queryChannels('reload');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filterString]);\n\n  return {\n    channels,\n    loadNextPage,\n    hasNextPage,\n    status: {\n      loadingChannels,\n      refreshing,\n      error,\n    },\n    setChannels,\n  };\n};\n","// @ts-check\n\nimport { useEffect } from 'react';\n\n/**\n * @param {React.MutableRefObject<HTMLDivElement | null>} channelListRef\n * @param {boolean} navOpen\n * @param {() => void} [closeMobileNav]\n */\nexport const useMobileNavigation = (\n  channelListRef,\n  navOpen,\n  closeMobileNav,\n) => {\n  useEffect(() => {\n    /** @param {MouseEvent} e */\n    const handleClickOutside = (e) => {\n      if (\n        closeMobileNav &&\n        channelListRef.current &&\n        !channelListRef.current.contains(\n          /** @type {Node | null} */ (e.target),\n        ) &&\n        navOpen\n      ) {\n        closeMobileNav();\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [navOpen, channelListRef, closeMobileNav]);\n};\n","// @ts-check\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatContext } from '../../context';\nimport { smartRender } from '../../utils';\n\nimport ChannelListTeam from './ChannelListTeam';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { LoadMorePaginator } from '../LoadMore';\nimport { LoadingChannels } from '../Loading';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { ChannelPreview, ChannelPreviewLastMessage } from '../ChannelPreview';\nimport { ChatDown } from '../ChatDown';\n\nimport { useMessageNewListener } from './hooks/useMessageNewListener';\nimport { useNotificationMessageNewListener } from './hooks/useNotificationMessageNewListener';\nimport { useNotificationAddedToChannelListener } from './hooks/useNotificationAddedToChannelListener';\nimport { useNotificationRemovedFromChannelListener } from './hooks/useNotificationRemovedFromChannelListener';\nimport { useChannelDeletedListener } from './hooks/useChannelDeletedListener';\nimport { useChannelTruncatedListener } from './hooks/useChannelTruncatedListener';\nimport { useChannelUpdatedListener } from './hooks/useChannelUpdatedListener';\nimport { useChannelHiddenListener } from './hooks/useChannelHiddenListener';\nimport { useChannelVisibleListener } from './hooks/useChannelVisibleListener';\nimport { useConnectionRecoveredListener } from './hooks/useConnectionRecoveredListener';\nimport { useUserPresenceChangedListener } from './hooks/useUserPresenceChangedListener';\nimport { usePaginatedChannels } from './hooks/usePaginatedChannels';\nimport { useMobileNavigation } from './hooks/useMobileNavigation';\n\nimport { MAX_QUERY_CHANNELS_LIMIT, moveChannelUp } from './utils';\n\nconst DEFAULT_FILTERS = {};\nconst DEFAULT_OPTIONS = {};\nconst DEFAULT_SORT = {};\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type {React.FC<import('types').ChannelListProps>}\n */\nconst ChannelList = (props) => {\n  const {\n    client,\n    setActiveChannel,\n    navOpen = false,\n    closeMobileNav,\n    channel,\n    theme,\n  } = useContext(ChatContext);\n  const channelListRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const [channelUpdateCount, setChannelUpdateCount] = useState(0);\n\n  /**\n   * Set a channel with id {customActiveChannel} as active and move it to the top of the list.\n   * If customActiveChannel prop is absent, then set the first channel in list as active channel.\n   * @param {import('stream-chat').Channel[]} channels\n   * @param {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} setChannels\n   */\n  const activeChannelHandler = (channels, setChannels) => {\n    const {\n      setActiveChannelOnMount = true,\n      customActiveChannel,\n      watchers,\n      options = {},\n    } = props;\n\n    if (\n      !channels ||\n      channels.length === 0 ||\n      channels.length > (options.limit || MAX_QUERY_CHANNELS_LIMIT)\n    ) {\n      return;\n    }\n\n    if (customActiveChannel) {\n      const customActiveChannelObject = channels.find(\n        (chan) => chan.id === customActiveChannel,\n      );\n      if (customActiveChannelObject) {\n        if (setActiveChannel) {\n          setActiveChannel(customActiveChannelObject, watchers);\n        }\n        const newChannels = moveChannelUp(\n          customActiveChannelObject.cid,\n          channels,\n        );\n        setChannels(newChannels);\n      }\n\n      return;\n    }\n\n    if (setActiveChannelOnMount && setActiveChannel) {\n      setActiveChannel(channels[0], watchers);\n    }\n  };\n\n  // When channel list (channels array) is updated without any shallow changes (or with only deep changes), then we want\n  // to force the channel preview to re-render.\n  // This happens in case of event channel.updated, channel.truncated etc. Inner properties of channel is updated but\n  // react renderer will only make shallow comparison and choose to not to re-render the UI.\n  // By updating the dummy prop - channelUpdateCount, we can force this re-render.\n  const forceUpdate = () => {\n    setChannelUpdateCount((count) => count + 1);\n  };\n\n  const {\n    channels,\n    loadNextPage,\n    hasNextPage,\n    status,\n    setChannels,\n  } = usePaginatedChannels(\n    client,\n    props.filters || DEFAULT_FILTERS,\n    props.sort || DEFAULT_SORT,\n    props.options || DEFAULT_OPTIONS,\n    activeChannelHandler,\n  );\n\n  const loadedChannels = props.channelRenderFilterFn\n    ? props.channelRenderFilterFn(channels)\n    : channels;\n\n  useMobileNavigation(channelListRef, navOpen, closeMobileNav);\n\n  // All the event listeners\n  useMessageNewListener(\n    setChannels,\n    props.lockChannelOrder,\n    props.allowNewMessagesFromUnfilteredChannels,\n  );\n  useNotificationMessageNewListener(setChannels, props.onMessageNew);\n  useNotificationAddedToChannelListener(setChannels, props.onAddedToChannel);\n  useNotificationRemovedFromChannelListener(\n    setChannels,\n    props.onRemovedFromChannel,\n  );\n  useChannelDeletedListener(setChannels, props.onChannelDeleted);\n  useChannelHiddenListener(setChannels, props.onChannelHidden);\n  useChannelVisibleListener(setChannels, props.onChannelVisible);\n  useChannelTruncatedListener(\n    setChannels,\n    props.onChannelTruncated,\n    forceUpdate,\n  );\n  useChannelUpdatedListener(setChannels, props.onChannelUpdated, forceUpdate);\n  useConnectionRecoveredListener(forceUpdate);\n  useUserPresenceChangedListener(setChannels);\n\n  // If the active channel is deleted, then unset the active channel.\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      if (setActiveChannel && e?.cid === channel?.cid) {\n        setActiveChannel();\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    client.on('channel.hidden', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n      client.off('channel.hidden', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [channel]);\n\n  // renders the channel preview or item\n  /** @param {import('stream-chat').Channel} item */\n  const renderChannel = (item) => {\n    if (!item) return null;\n\n    const {\n      Avatar = DefaultAvatar,\n      Preview = ChannelPreviewLastMessage,\n      watchers = {},\n    } = props;\n\n    const previewProps = {\n      Avatar,\n      channel: item,\n      Preview,\n      activeChannel: channel,\n      setActiveChannel,\n      watchers,\n      key: item.id,\n      // To force the update of preview component upon channel update.\n      channelUpdateCount,\n    };\n\n    return smartRender(ChannelPreview, { ...previewProps });\n  };\n\n  // renders the empty state indicator (when there are no channels)\n  const renderEmptyStateIndicator = () => {\n    const { EmptyStateIndicator = DefaultEmptyStateIndicator } = props;\n\n    return <EmptyStateIndicator listType=\"channel\" />;\n  };\n\n  // renders the list.\n  const renderList = () => {\n    const {\n      Avatar = DefaultAvatar,\n      List = ChannelListTeam,\n      Paginator = LoadMorePaginator,\n      showSidebar,\n      LoadingIndicator = LoadingChannels,\n      LoadingErrorIndicator = ChatDown,\n    } = props;\n\n    return (\n      <List\n        loading={status.loadingChannels}\n        error={status.error}\n        showSidebar={showSidebar}\n        Avatar={Avatar}\n        LoadingIndicator={LoadingIndicator}\n        LoadingErrorIndicator={LoadingErrorIndicator}\n      >\n        {!loadedChannels || loadedChannels.length === 0\n          ? renderEmptyStateIndicator()\n          : smartRender(Paginator, {\n              loadNextPage,\n              hasNextPage,\n              refreshing: status.refreshing,\n              children: loadedChannels.map(renderChannel),\n            })}\n      </List>\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <div\n        className={`str-chat str-chat-channel-list ${theme} ${\n          navOpen ? 'str-chat-channel-list--open' : ''\n        }`}\n        ref={channelListRef}\n      >\n        {renderList()}\n      </div>\n    </React.Fragment>\n  );\n};\n\nChannelList.propTypes = {\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n  /** Indicator for Empty State */\n  EmptyStateIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').EmptyStateIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview: /** @type {PropTypes.Validator<React.ElementType<import('types').ChannelPreviewUIComponentProps>>} */ (PropTypes.elementType),\n\n  /**\n   * Loading indicator UI Component. It will be displayed until the channels are\n   * being queried from API. Once the channels are loaded/queried, loading indicator is removed\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if there is any error if loading the channels.\n   * This error could be related to network or failing API.\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI Component for container of list of channels. Note that, list (UI component) of channels is passed\n   * to this component as children. This component is for the purpose of adding header to channel list or styling container\n   * for list of channels.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListTeam.js) (default)\n   * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListMessenger.js)\n   *\n   * It has access to some additional props:\n   *\n   * - `setActiveChannel` {function} Check [chat context](https://getstream.github.io/stream-chat-react/#chat)\n   * - `activeChannel` Currently active channel object\n   * - `channels` {array} List of channels in channel list\n   */\n  List: /** @type {PropTypes.Validator<React.ElementType<import('types').ChannelListUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Paginator component for channels. It contains all the pagination logic such as\n   * - fetching next page of results when needed e.g., when scroll reaches the end of list\n   * - UI to display loading indicator when next page is being loaded\n   * - call to action button to trigger loading of next page.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMorePaginator.js)\n   * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator.js)\n   */\n  Paginator: /** @type {PropTypes.Validator<React.ElementType<import('types').PaginatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Function that overrides default behaviour when new message is received on channel that is not being watched\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.message_new` event\n   * */\n  onMessageNew: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when users gets added to a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.added_to_channel` event\n   * */\n  onAddedToChannel: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when users gets removed from a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.removed_from_channel` event\n   * */\n  onRemovedFromChannel: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when channel gets updated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.channel_updated` event\n   * */\n  onChannelUpdated: PropTypes.func,\n  /**\n   * Function to customize behaviour when channel gets truncated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.truncated` event\n   * */\n  onChannelTruncated: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when channel gets deleted. In absence of this prop, channel will be removed from the list.\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.deleted` event\n   * */\n  onChannelDeleted: PropTypes.func,\n  /**\n   * Optional function to filter channels prior to loading in the DOM. Do not use any complex or async logic here that would significantly delay the loading of the ChannelList.\n   * We recommend using a pure function with array methods like filter/sort/reduce.\n   * @param {Array} channels\n   * @returns {Array} channels\n   * */\n  channelRenderFilterFn: /** @type {PropTypes.Validator<(channels: import('stream-chat').Channel[]) => import('stream-chat').Channel[]>} */ (PropTypes.func),\n  /**\n   * Object containing query filters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for filter.\n   * */\n  filters: /** @type {PropTypes.Validator<import('stream-chat').ChannelFilters>} */ (PropTypes.object),\n  /**\n   * Object containing query options\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for options.\n   * */\n  options: PropTypes.object,\n  /**\n   * Object containing sort parameters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for sort.\n   * */\n  sort: /** @type {PropTypes.Validator<import('stream-chat').ChannelSort>} */ (PropTypes.object),\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/channel_pagination/?language=js) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n\n  /**\n   * Set a Channel (of this id) to be active and move it to the top of the list of channels by ID.\n   * */\n  customActiveChannel: PropTypes.string,\n  /**\n   * Last channel will be set as active channel if true, defaults to true\n   */\n  setActiveChannelOnMount: PropTypes.bool,\n  /**\n   * If true, channels won't be dynamically sorted by most recent message.\n   */\n  lockChannelOrder: PropTypes.bool,\n  /**\n   * When client receives an event `message.new`, we push that channel to top of the list.\n   *\n   * But If the channel doesn't exist in the list, then we get the channel from client\n   * (client maintains list of watched channels as `client.activeChannels`) and push\n   * that channel to top of the list by default. You can disallow this behavior by setting following\n   * prop to false. This is quite usefull where you have multiple tab structure and you don't want\n   * ChannelList in Tab1 to react to new message on some channel in Tab2.\n   *\n   * Default value is true.\n   */\n  allowNewMessagesFromUnfilteredChannels: PropTypes.bool,\n};\n\nexport default React.memo(ChannelList);\n","// @ts-check\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatDown } from '../ChatDown';\nimport { LoadingChannels } from '../Loading';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('types').ChannelListUIComponentProps>\n */\nexport const ChannelListMessenger = ({\n  error = false,\n  loading,\n  LoadingErrorIndicator = ChatDown,\n  LoadingIndicator = LoadingChannels,\n  children,\n}) => {\n  if (error) {\n    return <LoadingErrorIndicator type=\"Connection Error\" />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className=\"str-chat__channel-list-messenger\">\n      <div className=\"str-chat__channel-list-messenger__main\">{children}</div>\n    </div>\n  );\n};\n\nChannelListMessenger.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelListMessenger;\n","// @ts-check\nimport React from 'react';\n\n/**\n * @type {React.FC}\n */\nconst ChannelSearch = () => (\n  <div className=\"str-chat__channel-search\">\n    <input type=\"text\" placeholder=\"Search\" />\n    <button type=\"submit\">\n      <svg\n        width=\"18\"\n        height=\"17\"\n        viewBox=\"0 0 18 17\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n          fillRule=\"evenodd\"\n        />\n      </svg>\n    </button>\n  </div>\n);\n\nexport default React.memo(ChannelSearch);\n","import { useCallback, useState, useEffect } from 'react';\nimport Dayjs from 'dayjs';\n\nimport { Streami18n } from '../../../i18n';\n\nimport { version } from '../../../../package.json';\n\nexport const useChat = ({ client, initialNavOpen, i18nInstance }) => {\n  const [translators, setTranslators] = useState(\n    /** @type { Required<import('types').TranslationContextValue>} */ ({\n      t: /** @param {string} key */ (key) => key,\n      tDateTimeParser: (input) => Dayjs(input),\n      userLanguage: '',\n    }),\n  );\n  const [mutes, setMutes] = useState(\n    /** @type {import('stream-chat').Mute[]} */ ([]),\n  );\n  const [navOpen, setNavOpen] = useState(initialNavOpen);\n  const [channel, setChannel] = useState(\n    /** @type {ChannelState} */ (undefined),\n  );\n\n  const openMobileNav = () => setTimeout(() => setNavOpen(true), 100);\n  const closeMobileNav = () => setNavOpen(false);\n  const clientMutes = client?.user?.mutes;\n\n  useEffect(() => {\n    if (client) {\n      const userAgent = client.getUserAgent();\n      if (!userAgent.includes('stream-chat-react')) {\n        /**\n         * results in something like: 'stream-chat-react-2.3.2-stream-chat-javascript-client-browser-2.2.2'\n         */\n        client.setUserAgent(`stream-chat-react-${version}-${userAgent}`);\n      }\n    }\n  }, [client]);\n\n  useEffect(() => {\n    setMutes(clientMutes || []);\n\n    /** @param {import('stream-chat').Event} e */\n    const handleEvent = (e) => {\n      if (e.type === 'notification.mutes_updated') setMutes(e.me?.mutes || []);\n    };\n\n    if (client) client.on(handleEvent);\n    return () => client && client.off(handleEvent);\n  }, [client, clientMutes]);\n\n  useEffect(() => {\n    let streami18n;\n\n    if (i18nInstance instanceof Streami18n) {\n      streami18n = i18nInstance;\n    } else {\n      streami18n = new Streami18n({ language: 'en' });\n    }\n\n    streami18n.registerSetLanguageCallback((t) =>\n      setTranslators((prevTranslator) => ({ ...prevTranslator, t })),\n    );\n\n    streami18n.getTranslators().then((translator) => {\n      if (translator) {\n        setTranslators({\n          ...translator,\n          userLanguage: client?.user?.language || '',\n        });\n      }\n    });\n  }, [client, i18nInstance]);\n\n  const setActiveChannel = useCallback(\n    /**\n     * @param {ChannelState} activeChannel\n     * @param {{ limit?: number; offset?: number }} [watchers]\n     * @param {React.BaseSyntheticEvent} [e]\n     */\n    async (activeChannel, watchers = {}, e) => {\n      if (e && e.preventDefault) e.preventDefault();\n\n      if (activeChannel && Object.keys(watchers).length) {\n        await activeChannel.query({ watch: true, watchers });\n      }\n\n      setChannel(activeChannel);\n      closeMobileNav();\n    },\n    [],\n  );\n\n  return {\n    channel,\n    closeMobileNav,\n    mutes,\n    navOpen,\n    openMobileNav,\n    setActiveChannel,\n    translators,\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useChat } from './hooks/useChat';\n\nimport { ChatContext, TranslationContext } from '../../context';\n\n/**\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\n * This Chat component provides the ChatContext to all other components.\n *\n * The ChatContext provides the following props:\n *\n * - client (the client connection)\n * - channels (the list of channels)\n * - setActiveChannel (a function to set the currently active channel)\n * - channel (the currently active channel)\n *\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\n *\n * @example ../../docs/Chat.md\n * @typedef {import('stream-chat').Channel | undefined} ChannelState\n * @type {React.FC<import('types').ChatProps>}\n */\nconst Chat = (props) => {\n  const {\n    children,\n    client,\n    i18nInstance,\n    initialNavOpen = true,\n    theme = 'messaging light',\n  } = props;\n\n  const {\n    channel,\n    closeMobileNav,\n    mutes,\n    navOpen,\n    openMobileNav,\n    setActiveChannel,\n    translators,\n  } = useChat({ client, initialNavOpen, i18nInstance });\n\n  if (!translators.t) return null;\n\n  return (\n    <ChatContext.Provider\n      value={{\n        client,\n        channel,\n        closeMobileNav,\n        mutes,\n        navOpen,\n        openMobileNav,\n        setActiveChannel,\n        theme,\n      }}\n    >\n      <TranslationContext.Provider value={translators}>\n        {children}\n      </TranslationContext.Provider>\n    </ChatContext.Provider>\n  );\n};\n\nChat.propTypes = {\n  /** The StreamChat client object */\n  client: /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */ (PropTypes\n    .object.isRequired),\n  /**\n   *\n   * Theme could be used for custom styling of the components.\n   *\n   * You can override the classes used in our components under parent theme class.\n   *\n   * e.g. If you want to build a theme where background of message is black\n   *\n   * ```\n   *  <Chat client={client} theme={demo}>\n   *    <Channel>\n   *      <MessageList />\n   *    </Channel>\n   *  </Chat>\n   * ```\n   *\n   * ```scss\n   *  .demo.str-chat {\n   *    .str-chat__message-simple {\n   *      &-text-inner {\n   *        background-color: black;\n   *      }\n   *    }\n   *  }\n   * ```\n   *\n   * Built in available themes:\n   *\n   *  - `messaging light`\n   *  - `messaging dark`\n   *  - `team light`\n   *  - `team dark`\n   *  - `commerce light`\n   *  - `commerce dark`\n   *  - `livestream light`\n   *  - `livestream dark`\n   */\n  theme: PropTypes.string,\n  /** navOpen initial status */\n  initialNavOpen: PropTypes.bool,\n};\n\nexport default Chat;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * DateSeparator - A simple date separator\n *\n * @example ../../docs/DateSeparator.md\n * @type {React.FC<import('types').DateSeparatorProps>}\n */\nconst DateSeparator = ({ position = 'right', formatDate, date, unread }) => {\n  const { t, tDateTimeParser } = useContext(TranslationContext);\n  if (typeof date === 'string') return null;\n\n  const formattedDate = formatDate\n    ? formatDate(date)\n    : tDateTimeParser(date.toISOString()).calendar();\n\n  return (\n    <div className=\"str-chat__date-separator\">\n      {(position === 'right' || position === 'center') && (\n        <hr className=\"str-chat__date-separator-line\" />\n      )}\n      <div className=\"str-chat__date-separator-date\">\n        {unread ? t('New') : formattedDate}\n      </div>\n      {(position === 'left' || position === 'center') && (\n        <hr className=\"str-chat__date-separator-line\" />\n      )}\n    </div>\n  );\n};\n\nDateSeparator.propTypes = {\n  /** The date to format */\n  date: PropTypes.instanceOf(Date).isRequired,\n  /** If following messages are not new */\n  unread: PropTypes.bool,\n  /** Set the position of the date in the separator */\n  position: PropTypes.oneOf(['left', 'center', 'right']),\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n};\n\nexport default React.memo(DateSeparator);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { TranslationContext } from '../../context';\n\n/**\n * EventComponent - Custom render component for system and channel event messages\n * @type {React.FC<import('types').EventComponentProps>}\n */\nconst EventComponent = ({ Avatar = DefaultAvatar, message }) => {\n  const { tDateTimeParser } = useContext(TranslationContext);\n  const { type, text, event, created_at = '' } = message;\n\n  if (type === 'system')\n    return (\n      <div className=\"str-chat__message--system\">\n        <div className=\"str-chat__message--system__text\">\n          <div className=\"str-chat__message--system__line\" />\n          <p>{text}</p>\n          <div className=\"str-chat__message--system__line\" />\n        </div>\n        <div className=\"str-chat__message--system__date\">\n          <strong>{tDateTimeParser(created_at).format('dddd')} </strong>\n          at {tDateTimeParser(created_at).format('hh:mm A')}\n        </div>\n      </div>\n    );\n\n  if (\n    type === 'channel.event' &&\n    event &&\n    (event.type === 'member.removed' || event.type === 'member.added')\n  ) {\n    const name = event?.user?.name || event?.user?.id;\n    const sentence = `${name} ${\n      event.type === 'member.added'\n        ? 'has joined the chat'\n        : 'was removed from the chat'\n    }`;\n\n    return (\n      <div className=\"str-chat__event-component__channel-event\">\n        <Avatar image={event?.user?.image} name={name} />\n        <div className=\"str-chat__event-component__channel-event__content\">\n          <em className=\"str-chat__event-component__channel-event__sentence\">\n            {sentence}\n          </em>\n          <div className=\"str-chat__event-component__channel-event__date\">\n            {tDateTimeParser(created_at).format('LT')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nEventComponent.propTypes = {\n  /** Message object */\n  // @ts-expect-error\n  message: PropTypes.object.isRequired,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: /** @type {PropTypes.Validator<React.ElementType<import('types').AvatarProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(EventComponent);\n","// @ts-check\nimport React, { useCallback, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n * @param {Event} e\n */\nconst mousewheelListener = (e) => {\n  if (e instanceof WheelEvent && e.deltaY === 1) {\n    e.preventDefault();\n  }\n};\n\n/**\n * @param {HTMLElement | Element | null} el\n * @returns {number}\n */\nconst calculateTopPosition = (el) => {\n  if (el instanceof HTMLElement) {\n    return el.offsetTop + calculateTopPosition(el.offsetParent);\n  }\n  return 0;\n};\n\n/**\n * Computes by recursively summing offsetTop until an element without offsetParent is reached\n * @param {HTMLElement} el\n * @param {number} scrollTop\n */\nconst calculateOffset = (el, scrollTop) => {\n  if (!el) {\n    return 0;\n  }\n\n  return (\n    calculateTopPosition(el) +\n    (el.offsetHeight - scrollTop - window.innerHeight)\n  );\n};\n\n/** @param {import(\"types\").InfiniteScrollProps} props */\nconst InfiniteScroll = ({\n  children,\n  element = 'div',\n  hasMore = false,\n  initialLoad = true,\n  isReverse = false,\n  loader,\n  loadMore,\n  threshold = 250,\n  useCapture = false,\n  useWindow = true,\n  isLoading = false,\n  listenToScroll,\n  ...elementProps\n}) => {\n  const scrollComponent = useRef(/** @type {HTMLElement | null} */ (null));\n\n  const scrollListener = useCallback(() => {\n    const el = scrollComponent.current;\n    if (!el) return;\n    const { parentElement } = el;\n\n    let offset = 0;\n    let reverseOffset = 0;\n    if (useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        window.pageYOffset !== undefined ? window.pageYOffset : doc.scrollTop;\n      offset = calculateOffset(el, scrollTop);\n      reverseOffset = scrollTop;\n    } else if (parentElement) {\n      offset =\n        el.scrollHeight - parentElement.scrollTop - parentElement.clientHeight;\n      reverseOffset = parentElement.scrollTop;\n    }\n    if (listenToScroll) {\n      listenToScroll(offset, reverseOffset, threshold);\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      (isReverse ? reverseOffset : offset) < Number(threshold) &&\n      el.offsetParent !== null &&\n      typeof loadMore === 'function' &&\n      hasMore\n    ) {\n      loadMore();\n    }\n  }, [hasMore, useWindow, isReverse, threshold, listenToScroll, loadMore]);\n\n  useEffect(() => {\n    const scrollEl = useWindow ? window : scrollComponent.current?.parentNode;\n    if (isLoading || !scrollEl) {\n      return () => {};\n    }\n\n    scrollEl.addEventListener('scroll', scrollListener, useCapture);\n    scrollEl.addEventListener('resize', scrollListener, useCapture);\n\n    if (initialLoad) {\n      scrollListener();\n    }\n\n    return () => {\n      scrollEl.removeEventListener('scroll', scrollListener, useCapture);\n      scrollEl.removeEventListener('resize', scrollListener, useCapture);\n    };\n  }, [initialLoad, isLoading, scrollListener, useCapture, useWindow]);\n\n  useEffect(() => {\n    const scrollEl = useWindow ? window : scrollComponent.current?.parentNode;\n    if (!scrollEl) return () => {};\n    scrollEl.addEventListener('mousewheel', mousewheelListener, useCapture);\n    return () =>\n      scrollEl.removeEventListener(\n        'mousewheel',\n        mousewheelListener,\n        useCapture,\n      );\n  }, [useCapture, useWindow]);\n\n  const attributes = {\n    ...elementProps,\n    /** @param {HTMLElement} e */\n    ref: (e) => {\n      scrollComponent.current = e;\n    },\n  };\n\n  const childrenArray = [children];\n  if (isLoading && loader) {\n    if (isReverse) {\n      childrenArray.unshift(loader);\n    } else {\n      childrenArray.push(loader);\n    }\n  }\n  return React.createElement(element, attributes, childrenArray);\n};\n\nInfiniteScroll.propTypes = {\n  element: PropTypes.elementType,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  pageStart: PropTypes.number,\n  isLoading: PropTypes.bool,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool,\n};\n\nexport default InfiniteScroll;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// @ts-expect-error\nimport { LoadingIndicator as DefaultLoadingIndicator } from 'react-file-utils';\n\nimport InfiniteScroll from './InfiniteScroll';\n\n/**\n * @type { React.FC<import('types').InfiniteScrollPaginatorProps>}\n */\nconst InfiniteScrollPaginator = ({\n  LoadingIndicator = DefaultLoadingIndicator,\n  loadNextPage,\n  hasNextPage,\n  refreshing,\n  reverse,\n  threshold,\n  children,\n}) => (\n  <InfiniteScroll\n    loadMore={loadNextPage}\n    hasMore={hasNextPage}\n    isLoading={refreshing}\n    isReverse={reverse}\n    threshold={threshold}\n    useWindow={false}\n    loader={\n      <div\n        className=\"str-chat__infinite-scroll-paginator\"\n        key=\"loadingindicator\"\n      >\n        <LoadingIndicator />\n      </div>\n    }\n  >\n    {children}\n  </InfiniteScroll>\n);\n\nInfiniteScrollPaginator.propTypes = {\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func.isRequired,\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: PropTypes.bool,\n  /** display the items in opposite order */\n  reverse: PropTypes.bool,\n  /** Offset from when to start the loadNextPage call */\n  threshold: PropTypes.number,\n  /** The loading indicator to use */\n  // @ts-expect-error\n  LoadingIndicator: PropTypes.elementType,\n};\n\nexport default InfiniteScrollPaginator;\n","// @ts-check\nimport React from 'react';\nimport InfiniteScroll from './InfiniteScroll';\n\n/** @type {React.FC<import(\"types\").InfiniteScrollProps>} */\nconst ReverseInfiniteScroll = (props) => (\n  <InfiniteScroll {...props} isReverse />\n);\n\nexport default ReverseInfiniteScroll;\n","import React from 'react';\n\nconst Center = ({ children }) => (\n  <div className=\"str-chat__list__center\">{children}</div>\n);\n\nexport default React.memo(Center);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import('types').MessageNotificationProps>} */\nconst MessageNotification = ({ showNotification, onClick, children }) => {\n  if (!showNotification) return null;\n  return (\n    <button\n      data-testid=\"message-notification\"\n      className=\"str-chat__message-notification\"\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nMessageNotification.defaultProps = {\n  showNotification: true,\n};\n\nMessageNotification.propTypes = {\n  /** If we should show the notification or not */\n  showNotification: PropTypes.bool.isRequired,\n  /** Onclick handler */\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(MessageNotification);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst CustomNotification = ({ children, active, type }) => {\n  if (!active) return null;\n\n  return (\n    <div\n      className={`str-chat__custom-notification notification-${type}`}\n      data-testid=\"custom-notification\"\n    >\n      {children}\n    </div>\n  );\n};\n\nCustomNotification.propTypes = {\n  active: PropTypes.bool,\n  type: PropTypes.string,\n};\n\nexport default React.memo(CustomNotification);\n","// @ts-check\nimport React, { useContext, useState, useEffect } from 'react';\n\nimport { ChatContext, TranslationContext } from '../../context';\nimport CustomNotification from './CustomNotification';\n\n/**\n * ConnectionStatus - Indicator that there is a connection failure\n * @type {React.FC<{}>}\n */\nconst ConnectionStatus = () => {\n  const { client } = useContext(ChatContext);\n  const { t } = useContext(TranslationContext);\n  const [online, setOnline] = useState(true);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event} e */\n    const connectionChanged = (e) => {\n      if (e.online !== online) setOnline(/** @type {boolean} */ (e.online));\n    };\n\n    client.on('connection.changed', connectionChanged);\n    return () => client.off('connection.changed', connectionChanged);\n  }, [client, online]);\n\n  return (\n    <CustomNotification active={!online} type=\"error\">\n      {t('Connection failure, reconnecting now...')}\n    </CustomNotification>\n  );\n};\n\nexport default React.memo(ConnectionStatus);\n","/* eslint-disable no-continue */\nimport React, { useMemo } from 'react';\nimport isEqual from 'lodash.isequal';\n\nimport { Message } from '../Message';\nimport { InfiniteScroll } from '../InfiniteScrollPaginator';\n\n// fast since it usually iterates just the last few messages\nconst getLastReceived = (messages) => {\n  for (let i = messages.length - 1; i > 0; i -= 1) {\n    if (messages[i].status === 'received') return messages[i].id;\n  }\n  return null;\n};\n\nconst getReadStates = (messages, read) => {\n  // create object with empty array for each message id\n  const readData = {};\n\n  Object.values(read).forEach((readState) => {\n    if (!readState.last_read) return;\n\n    let userLastReadMsgId;\n    messages.forEach((msg) => {\n      if (msg.updated_at < readState.last_read) userLastReadMsgId = msg.id;\n    });\n\n    if (userLastReadMsgId) {\n      if (!readData[userLastReadMsgId]) readData[userLastReadMsgId] = [];\n      readData[userLastReadMsgId].push(readState.user);\n    }\n  });\n\n  return readData;\n};\n\nconst insertDates = (messages, lastRead, userID, hideDeletedMessages) => {\n  let unread = false;\n  let lastDateSeparator;\n  const newMessages = [];\n\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n\n    if (hideDeletedMessages && message.type === 'deleted') {\n      continue;\n    }\n\n    if (message.type === 'message.read') {\n      newMessages.push(message);\n      continue;\n    }\n\n    const messageDate = message.created_at.toDateString();\n    let prevMessageDate = messageDate;\n\n    if (i > 0) {\n      prevMessageDate = messages[i - 1].created_at.toDateString();\n    }\n\n    if (!unread) {\n      unread = lastRead && new Date(lastRead) < message.created_at;\n\n      // do not show date separator for current user's messages\n      if (unread && message.user.id !== userID) {\n        newMessages.push({\n          type: 'message.date',\n          date: message.created_at,\n          unread,\n        });\n      }\n    }\n\n    if (\n      (i === 0 ||\n        messageDate !== prevMessageDate ||\n        (hideDeletedMessages &&\n          messages[i - 1]?.type === 'deleted' &&\n          lastDateSeparator !== messageDate)) &&\n      newMessages?.[newMessages.length - 1]?.type !== 'message.date' // do not show two date separators in a row\n    ) {\n      lastDateSeparator = messageDate;\n\n      newMessages.push(\n        { type: 'message.date', date: message.created_at },\n        message,\n      );\n    } else {\n      newMessages.push(message);\n    }\n  }\n\n  return newMessages;\n};\n\nconst insertIntro = (messages, headerPosition) => {\n  const newMessages = messages;\n  // if no headerPosition is set, HeaderComponent will go at the top\n  if (!headerPosition) {\n    newMessages.unshift({ type: 'channel.intro' });\n    return newMessages;\n  }\n\n  // if no messages, intro gets inserted\n  if (!newMessages.length) {\n    newMessages.unshift({ type: 'channel.intro' });\n    return newMessages;\n  }\n\n  // else loop over the messages\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n\n    const messageTime = message.created_at\n      ? message.created_at.getTime()\n      : null;\n    const nextMessageTime =\n      messages[i + 1] && messages[i + 1].created_at\n        ? messages[i + 1].created_at.getTime()\n        : null;\n\n    // header position is smaller than message time so comes after;\n    if (messageTime < headerPosition) {\n      // if header position is also smaller than message time continue;\n      if (nextMessageTime < headerPosition) {\n        if (messages[i + 1] && messages[i + 1].type === 'message.date')\n          continue;\n        if (!nextMessageTime) {\n          newMessages.push({ type: 'channel.intro' });\n          return newMessages;\n        }\n        continue;\n      } else {\n        newMessages.splice(i + 1, 0, { type: 'channel.intro' });\n        return newMessages;\n      }\n    }\n  }\n\n  return newMessages;\n};\n\nconst getGroupStyles = (\n  message,\n  previousMessage,\n  nextMessage,\n  noGroupByUser,\n) => {\n  if (message.type === 'message.date') return '';\n  if (message.type === 'channel.event') return '';\n  if (message.type === 'channel.intro') return '';\n\n  if (noGroupByUser || message.attachments.length !== 0) return 'single';\n\n  const isTopMessage =\n    !previousMessage ||\n    previousMessage.type === 'channel.intro' ||\n    previousMessage.type === 'message.date' ||\n    previousMessage.type === 'system' ||\n    previousMessage.type === 'channel.event' ||\n    previousMessage.attachments.length !== 0 ||\n    message.user.id !== previousMessage.user.id ||\n    previousMessage.type === 'error' ||\n    previousMessage.deleted_at;\n\n  const isBottomMessage =\n    !nextMessage ||\n    nextMessage.type === 'message.date' ||\n    nextMessage.type === 'system' ||\n    nextMessage.type === 'channel.event' ||\n    nextMessage.type === 'channel.intro' ||\n    nextMessage.attachments.length !== 0 ||\n    message.user.id !== nextMessage.user.id ||\n    nextMessage.type === 'error' ||\n    nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error')\n      return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n\n  return '';\n};\n\nconst MessageListInner = (props) => {\n  const {\n    bottomRef,\n    client,\n    channel,\n    DateSeparator,\n    disableDateSeparator = false,\n    EmptyStateIndicator,\n    HeaderComponent,\n    headerPosition,\n    hideDeletedMessages = false,\n    internalInfiniteScrollProps,\n    internalMessageProps,\n    messages,\n    MessageSystem,\n    noGroupByUser,\n    onMessageLoadCaptured,\n    read,\n    threadList,\n    TypingIndicator,\n  } = props;\n\n  const lastRead = useMemo(() => channel.lastRead(), [channel]);\n\n  const enrichMessages = () => {\n    const messageWithDates =\n      disableDateSeparator || threadList\n        ? messages\n        : insertDates(messages, lastRead, client.userID, hideDeletedMessages);\n    if (HeaderComponent) return insertIntro(messageWithDates, headerPosition);\n\n    return messageWithDates;\n  };\n\n  const enrichedMessages = enrichMessages();\n\n  const messageGroupStyles = useMemo(\n    () =>\n      enrichedMessages.reduce((acc, message, i) => {\n        const style = getGroupStyles(\n          message,\n          enrichedMessages[i - 1],\n          enrichedMessages[i + 1],\n          noGroupByUser,\n        );\n        if (style) acc[message.id] = style;\n        return acc;\n      }, {}),\n    [enrichedMessages, noGroupByUser],\n  );\n\n  // get the readData, but only for messages submitted by the user themselves\n  const readData = useMemo(\n    () =>\n      getReadStates(\n        enrichedMessages.filter(({ user }) => user?.id === client.userID),\n        read,\n      ),\n    [client.userID, enrichedMessages, read],\n  );\n\n  const lastReceivedId = useMemo(() => getLastReceived(enrichedMessages), [\n    enrichedMessages,\n  ]);\n\n  const elements = useMemo(() => {\n    return enrichedMessages.map((message) => {\n      if (message.type === 'message.date') {\n        return (\n          <li key={`${message.date.toISOString()}-i`}>\n            <DateSeparator date={message.date} unread={message.unread} />\n          </li>\n        );\n      }\n\n      if (message.type === 'channel.intro') {\n        return (\n          <li key=\"intro\">\n            <HeaderComponent />\n          </li>\n        );\n      }\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        if (!MessageSystem) return null;\n        return (\n          <li key={message.event?.created_at || message.created_at || ''}>\n            <MessageSystem message={message} />\n          </li>\n        );\n      }\n\n      if (message.type !== 'message.read') {\n        const groupStyles = messageGroupStyles[message.id] || '';\n\n        return (\n          <li\n            className={`str-chat__li str-chat__li--${groupStyles}`}\n            key={message.id || message.created_at}\n            onLoadCapture={onMessageLoadCaptured}\n          >\n            <Message\n              client={client}\n              groupStyles={[groupStyles]} /* TODO: convert to simple string */\n              lastReceivedId={lastReceivedId}\n              message={message}\n              readBy={readData[message.id] || []}\n              threadList={threadList}\n              {...internalMessageProps}\n            />\n          </li>\n        );\n      }\n\n      return null;\n    });\n  }, [\n    client,\n    enrichedMessages,\n    internalMessageProps,\n    lastReceivedId,\n    messageGroupStyles,\n    MessageSystem,\n    onMessageLoadCaptured,\n    readData,\n    threadList,\n  ]);\n\n  if (!elements.length) return <EmptyStateIndicator listType=\"message\" />;\n\n  return (\n    <InfiniteScroll\n      className=\"str-chat__reverse-infinite-scroll\"\n      data-testid=\"reverse-infinite-scroll\"\n      isReverse\n      useWindow={false}\n      {...internalInfiniteScrollProps}\n    >\n      <ul className=\"str-chat__ul\">{elements}</ul>\n      <TypingIndicator threadList={threadList} />\n      <div key=\"bottom\" ref={bottomRef} />\n    </InfiniteScroll>\n  );\n};\n\nexport default React.memo(MessageListInner, isEqual);\n","// @ts-check\nimport React, { useContext } from 'react';\n\nimport { ChannelContext } from '../../context';\nimport { Avatar as DefaultAvatar } from '../Avatar';\n\n/**\n * TypingIndicator lists users currently typing, it needs to be a child of Channel component\n * @typedef {import('types').TypingIndicatorProps} Props\n * @type {React.FC<Props>}\n */\nconst TypingIndicator = ({\n  Avatar = DefaultAvatar,\n  avatarSize = 32,\n  threadList,\n}) => {\n  const { channel, client, thread, typing } = useContext(ChannelContext);\n\n  if (!typing || !client || channel?.getConfig()?.typing_events === false) {\n    return null;\n  }\n\n  const typingInChannel = Object.values(typing).filter(\n    ({ user, parent_id }) => user?.id !== client.user?.id && parent_id == null,\n  );\n\n  const typingInThread = Object.values(typing).some(\n    (event) => event?.parent_id === thread?.id,\n  );\n\n  return (\n    <div\n      className={`str-chat__typing-indicator ${\n        (threadList && typingInThread) ||\n        (!threadList && typingInChannel.length)\n          ? 'str-chat__typing-indicator--typing'\n          : ''\n      }`}\n    >\n      <div className=\"str-chat__typing-indicator__avatars\">\n        {typingInChannel.map(({ user }, i) => (\n          <Avatar\n            image={user?.image}\n            size={avatarSize}\n            name={user?.name || user?.id}\n            key={`${user?.id}-${i}`}\n          />\n        ))}\n      </div>\n      <div className=\"str-chat__typing-indicator__dots\">\n        <span className=\"str-chat__typing-indicator__dot\" />\n        <span className=\"str-chat__typing-indicator__dot\" />\n        <span className=\"str-chat__typing-indicator__dot\" />\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(TypingIndicator);\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport Center from './Center';\nimport MessageNotification from './MessageNotification';\nimport CustomNotification from './CustomNotification';\nimport ConnectionStatus from './ConnectionStatus';\nimport MessageListInner from './MessageListInner';\nimport { defaultPinPermissions, MESSAGE_ACTIONS } from '../Message/utils';\nimport { checkChannelPropType, smartRender } from '../../utils';\n\nimport { ChannelContext, withTranslationContext } from '../../context';\nimport { Attachment } from '../Attachment';\nimport { Avatar } from '../Avatar';\nimport { MessageSimple } from '../Message';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { LoadingIndicator as DefaultLoadingIndicator } from '../Loading';\nimport { EventComponent } from '../EventComponent';\nimport { DateSeparator as DefaultDateSeparator } from '../DateSeparator';\nimport { TypingIndicator as DefaultTypingIndicator } from '../TypingIndicator';\n\n/**\n * MessageList - The message list components renders a list of messages. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\n *\n * @example ../../docs/MessageList.md\n * @extends PureComponent\n */\nclass MessageList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newMessagesNotification: false,\n      notifications: [],\n    };\n\n    this.bottomRef = React.createRef();\n    this.messageList = React.createRef();\n    this.notificationTimeouts = [];\n  }\n\n  componentDidMount() {\n    // start at the bottom\n    this.scrollToBottom();\n    const messageListRect = this.messageList.current.getBoundingClientRect();\n\n    this.setState({\n      messageListRect,\n    });\n  }\n\n  componentWillUnmount() {\n    this.notificationTimeouts.forEach(clearTimeout);\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.threadList) {\n      return null;\n    }\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n    if (prevProps.messages.length < this.props.messages.length) {\n      const list = this.messageList.current;\n      return {\n        offsetTop: list.scrollTop,\n        offsetBottom: list.scrollHeight - list.scrollTop,\n      };\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    const userScrolledUp = this.userScrolledUp();\n    const currentLastMessage = this.props.messages[\n      this.props.messages.length - 1\n    ];\n    const previousLastMessage =\n      prevProps.messages[prevProps.messages.length - 1];\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    const isOwner = currentLastMessage.user.id === this.props.client.userID;\n\n    const list = this.messageList.current;\n\n    // always scroll down when it's your own message that you added...\n    const scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n    if (scrollToBottom) {\n      this.scrollToBottom();\n\n      // remove the scroll notification if we already scrolled down...\n      if (this.state.newMessagesNotification)\n        this.setState({ newMessagesNotification: false });\n\n      return;\n    }\n\n    if (snapshot !== null) {\n      // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n      // This is for the case where user has scroll up significantly and a new message arrives from someone.\n      if (hasNewMessage) {\n        this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n      } else {\n        // Maintain the bottomOffset of scroll.\n        // This is for the case of pagination, when more messages get loaded.\n        this.scrollToTarget(\n          list.scrollHeight - snapshot.offsetBottom,\n          this.messageList.current,\n        );\n      }\n    }\n\n    // Check the scroll position... if you're scrolled up show a little notification\n    if (hasNewMessage && !this.state.newMessagesNotification) {\n      this.setState({ newMessagesNotification: true });\n    }\n  }\n\n  scrollToBottom = () => {\n    this._scrollToRef(this.bottomRef, this.messageList);\n  };\n\n  _scrollToRef = (el, parent) => {\n    const scrollDown = () => {\n      if (el && el.current && parent && parent.current) {\n        this.scrollToTarget(el.current, parent.current);\n      }\n    };\n\n    scrollDown();\n    // scroll down after images load again\n    setTimeout(scrollDown, 200);\n  };\n\n  /**\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n   * containerEl - DOM element for the container with scrollbars\n   * source: https://stackoverflow.com/a/48429314\n   */\n  scrollToTarget = (target, containerEl) => {\n    // Moved up here for readability:\n    const isElement = target && target.nodeType === 1;\n    const isNumber =\n      Object.prototype.toString.call(target) === '[object Number]';\n\n    let scrollTop;\n    if (isElement) scrollTop = target.offsetTop;\n    else if (isNumber) scrollTop = target;\n    else if (target === 'top') scrollTop = 0;\n    else if (target === 'bottom')\n      scrollTop = containerEl.scrollHeight - containerEl.offsetHeight;\n\n    if (scrollTop !== undefined) containerEl.scrollTop = scrollTop; // eslint-disable-line no-param-reassign\n  };\n\n  goToNewMessages = () => {\n    this.scrollToBottom();\n    this.setState({ newMessagesNotification: false });\n  };\n\n  userScrolledUp = () => this.scrollOffset > this.props.scrolledUpThreshold;\n\n  listenToScroll = (offset, reverseOffset, threshold) => {\n    this.scrollOffset = offset;\n    this.closeToTop = reverseOffset < threshold;\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\n      this.setState({ newMessagesNotification: false });\n    }\n  };\n\n  /**\n   * Adds a temporary notification to message list.\n   * Notification will be removed after 5 seconds.\n   *\n   * @param notificationText  Text of notification to be added\n   * @param type              Type of notification. success | error\n   */\n  addNotification = (notificationText, type) => {\n    if (typeof notificationText !== 'string') return;\n    if (type !== 'success' && type !== 'error') return;\n\n    const id = uuidv4();\n\n    this.setState(({ notifications }) => ({\n      notifications: [...notifications, { id, text: notificationText, type }],\n    }));\n\n    // remove the notification after 5000 ms\n    const ct = setTimeout(\n      () =>\n        this.setState(({ notifications }) => ({\n          notifications: notifications.filter((n) => n.id !== id),\n        })),\n      5000,\n    );\n\n    this.notificationTimeouts.push(ct);\n  };\n\n  onMessageLoadCaptured = () => {\n    // A load event (emitted by e.g. an <img>) was captured on a message.\n    // In some cases, the loaded asset is larger than the placeholder, which means we have to scroll down.\n    if (!this.userScrolledUp() && !this.closeToTop) {\n      this.scrollToBottom();\n    }\n  };\n\n  loadMore = () =>\n    this.props.messageLimit\n      ? this.props.loadMore(this.props.messageLimit)\n      : this.props.loadMore();\n\n  render() {\n    const { t } = this.props;\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__list ${\n            this.props.threadList ? 'str-chat__list--thread' : ''\n          }`}\n          ref={this.messageList}\n        >\n          <MessageListInner\n            bottomRef={this.bottomRef}\n            channel={this.props.channel}\n            client={this.props.client}\n            DateSeparator={this.props.DateSeparator || this.props.dateSeparator}\n            disableDateSeparator={this.props.disableDateSeparator}\n            EmptyStateIndicator={this.props.EmptyStateIndicator}\n            HeaderComponent={this.props.HeaderComponent}\n            headerPosition={this.props.headerPosition}\n            hideDeletedMessages={this.props.hideDeletedMessages}\n            messages={this.props.messages}\n            MessageSystem={this.props.MessageSystem}\n            noGroupByUser={this.props.noGroupByUser}\n            onMessageLoadCaptured={this.onMessageLoadCaptured}\n            read={this.props.read}\n            threadList={this.props.threadList}\n            TypingIndicator={this.props.TypingIndicator}\n            internalInfiniteScrollProps={{\n              hasMore: this.props.hasMore,\n              isLoading: this.props.loadingMore,\n              listenToScroll: this.listenToScroll,\n              loadMore: this.loadMore,\n              loader: (\n                <Center key=\"loadingindicator\">\n                  {smartRender(this.props.LoadingIndicator, { size: 20 }, null)}\n                </Center>\n              ),\n            }}\n            internalMessageProps={{\n              additionalMessageInputProps: this.props\n                .additionalMessageInputProps,\n              addNotification: this.addNotification,\n              Attachment: this.props.Attachment,\n              Avatar: this.props.Avatar,\n              channel: this.props.channel,\n              getFlagMessageSuccessNotification: this.props\n                .getFlagMessageSuccessNotification,\n              getFlagMessageErrorNotification: this.props\n                .getFlagMessageErrorNotification,\n              getMuteUserSuccessNotification: this.props\n                .getMuteUserSuccessNotification,\n              getMuteUserErrorNotification: this.props\n                .getMuteUserErrorNotification,\n              getPinMessageErrorNotification: this.props\n                .getPinMessageErrorNotification,\n              members: this.props.members,\n              Message: this.props.Message,\n              messageActions: this.props.messageActions,\n              messageListRect: this.state.messageListRect,\n              mutes: this.props.mutes,\n              onMentionsClick: this.props.onMentionsClick,\n              onUserClick: this.props.onUserClick,\n              onUserHover: this.props.onUserHover,\n              onMentionsHover: this.props.onMentionsHover,\n              openThread: this.props.openThread,\n              removeMessage: this.props.removeMessage,\n              retrySendMessage: this.props.retrySendMessage,\n              unsafeHTML: this.props.unsafeHTML,\n              updateMessage: this.props.updateMessage,\n              watchers: this.props.watchers,\n              pinPermissions: this.props.pinPermissions,\n            }}\n          />\n        </div>\n        <div className=\"str-chat__list-notifications\">\n          {this.state.notifications.map((notification) => (\n            <CustomNotification\n              active={true}\n              key={notification.id}\n              type={notification.type}\n            >\n              {notification.text}\n            </CustomNotification>\n          ))}\n          <ConnectionStatus />\n          <MessageNotification\n            onClick={this.goToNewMessages}\n            showNotification={this.state.newMessagesNotification}\n          >\n            {t('New Messages!')}\n          </MessageNotification>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageList.propTypes = {\n  /**\n   * Date separator UI component to render\n   *\n   * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.js)\n   * */\n  dateSeparator: PropTypes.elementType,\n  /** Disables the injection of date separator components, defaults to false */\n  disableDateSeparator: PropTypes.bool,\n  /** Hides the MessageDeleted components from the list, defaults to false */\n  hideDeletedMessages: PropTypes.bool,\n  /** Turn off grouping of messages by user */\n  noGroupByUser: PropTypes.bool,\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Set the limit to use when paginating messages */\n  messageLimit: PropTypes.number,\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'flag', 'mute', 'react', 'reply']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n  /**\n   * Boolean weather current message list is a thread.\n   */\n  threadList: PropTypes.bool,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for pinning a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format)\n   *\n   * */\n  getPinMessageErrorNotification: PropTypes.func,\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  client: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Attachment: PropTypes.elementType,\n  /**\n   * Custom UI component to display user avatar\n   *\n   * Defaults to and accepts same props as: [Avatar](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Avatar/Avatar.js)\n   * */\n  Avatar: PropTypes.elementType,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Message: PropTypes.elementType,\n  /**\n   * Custom UI component to display system messages.\n   *\n   * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.js)\n   */\n  MessageSystem: PropTypes.elementType,\n  /**\n   * Typing indicator UI component to render\n   *\n   * Defaults to and accepts same props as: [TypingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/TypingIndicator/TypingIndicator.js)\n   * */\n  TypingIndicator: PropTypes.elementType,\n  /**\n   * The UI Indicator to use when MessageList or ChannelList is empty\n   * */\n  EmptyStateIndicator: PropTypes.elementType,\n  /**\n   * Component to render at the top of the MessageList\n   * */\n  HeaderComponent: PropTypes.elementType,\n  /**\n   * Component to render at the top of the MessageList while loading new messages\n   * */\n  LoadingIndicator: PropTypes.elementType,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  messages: PropTypes.array.isRequired,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  channel: /** @type {PropTypes.Validator<ReturnType<import('types').StreamChatReactClient['channel']>>} */ (PropTypes.objectOf(\n    checkChannelPropType,\n  ).isRequired),\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  updateMessage: PropTypes.func.isRequired,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  retrySendMessage: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  removeMessage: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsClick: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsHover: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onUserClick: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onUserHover: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  openThread: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  members: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  watchers: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  read: PropTypes.object,\n  /**\n   * Additional props for underlying MessageInput component. We have instance of MessageInput\n   * component in MessageSimple component, for handling edit state.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n  /**\n   * The user roles allowed to pin messages in various channel types\n   */\n  pinPermissions: /** @type {PropTypes.Validator<import('types').PinPermissions>>} */ (PropTypes.object),\n  /** The pixel threshold to determine whether or not the user is scrolled up in the list */\n  scrolledUpThreshold: PropTypes.number,\n};\n\nMessageList.defaultProps = {\n  Attachment,\n  Avatar,\n  Message: MessageSimple,\n  MessageSystem: EventComponent,\n  threadList: false,\n  DateSeparator: DefaultDateSeparator,\n  LoadingIndicator: DefaultLoadingIndicator,\n  TypingIndicator: DefaultTypingIndicator,\n  EmptyStateIndicator: DefaultEmptyStateIndicator,\n  unsafeHTML: false,\n  noGroupByUser: false,\n  messageActions: Object.keys(MESSAGE_ACTIONS),\n  pinPermissions: defaultPinPermissions,\n  scrolledUpThreshold: 200,\n};\n\nexport default withTranslationContext((props) => (\n  <ChannelContext.Consumer>\n    {/* TODO: only used props needs to be passed in */}\n    {({ typing, ...channelContext }) => (\n      <MessageList {...channelContext} {...props} />\n    )}\n  </ChannelContext.Consumer>\n));\n","import { useEffect, useState, useRef } from 'react';\n\n/**\n * @param {import('types').VirtualizedMessageListInternalProps['messages']} messages\n * @param {string | undefined} currentUserId\n */\nexport function useNewMessageNotification(messages, currentUserId) {\n  const [newMessagesNotification, setNewMessagesNotification] = useState(false);\n\n  const lastMessageId = useRef('');\n  const atBottom = useRef(false);\n\n  useEffect(() => {\n    /* handle scrolling behavior for new messages */\n    if (!messages?.length) return;\n\n    const lastMessage = messages[messages.length - 1];\n    const prevMessageId = lastMessageId.current;\n    lastMessageId.current = lastMessage.id || ''; // update last message id\n\n    /* do nothing if new messages are loaded from top(loadMore)  */\n    if (lastMessage.id === prevMessageId) return;\n\n    /* if list is already at the bottom return, followOutput will do the job */\n    if (atBottom.current) return;\n\n    /* if the new message belongs to current user scroll to bottom */\n    if (lastMessage.user?.id !== currentUserId) {\n      /* otherwise just show newMessage notification  */\n      setNewMessagesNotification(true);\n    }\n  }, [currentUserId, messages]);\n\n  return { atBottom, setNewMessagesNotification, newMessagesNotification };\n}\n","// @ts-check\nimport { useRef, useMemo } from 'react';\n\n/**\n * @param {Array<{ id: string }> | undefined} messages,\n */\nexport const usePrependedMessagesCount = (messages) => {\n  const currentFirstMessageId = messages?.[0]?.id;\n  const firstMessageId = useRef(currentFirstMessageId);\n  const earliestMessageId = useRef(currentFirstMessageId);\n  const previousNumItemsPrepended = useRef(0);\n\n  const numItemsPrepended = useMemo(() => {\n    if (!messages || !messages.length) {\n      return 0;\n    }\n    // if no new messages were prepended, return early (same amount as before)\n    if (currentFirstMessageId === earliestMessageId.current) {\n      return previousNumItemsPrepended.current;\n    }\n\n    if (!firstMessageId.current) {\n      firstMessageId.current = currentFirstMessageId;\n    }\n    earliestMessageId.current = currentFirstMessageId;\n    // if new messages were prepended, find out how many\n    // start with this number because there cannot be fewer prepended items than before\n    for (\n      let i = previousNumItemsPrepended.current;\n      i < messages.length;\n      i += 1\n    ) {\n      if (messages[i].id === firstMessageId.current) {\n        previousNumItemsPrepended.current = i;\n        return i;\n      }\n    }\n    return 0;\n    // TODO: there's a bug here, the messages prop is the same array instance (something mutates it)\n    // that's why the second dependency is necessary\n  }, [messages, messages?.length]);\n\n  return numItemsPrepended;\n};\n","import { useEffect, useRef } from 'react';\n/**\n * @param {import('types').VirtualizedMessageListInternalProps['messages']} messages\n * @param {string | undefined} currentUserId\n */\nexport function useShouldForceScrollToBottom(messages, currentUserId) {\n  const lastFocusedOwnMessage = useRef('');\n  const initialFocusRegistered = useRef(false);\n\n  function recheckForNewOwnMessage() {\n    if (messages && messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n\n      if (\n        lastMessage.user?.id === currentUserId &&\n        lastFocusedOwnMessage.current !== lastMessage.id\n      ) {\n        lastFocusedOwnMessage.current = lastMessage.id;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  useEffect(() => {\n    if (messages && messages.length && !initialFocusRegistered.current) {\n      initialFocusRegistered.current = true;\n      recheckForNewOwnMessage();\n    }\n  }, [messages, messages?.length]);\n\n  return recheckForNewOwnMessage;\n}\n","// @ts-check\nimport React, { useCallback, useContext, useMemo, useRef } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\nimport { ChannelContext, TranslationContext } from '../../context';\nimport { smartRender } from '../../utils';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { EventComponent } from '../EventComponent';\nimport { LoadingIndicator as DefaultLoadingIndicator } from '../Loading';\nimport {\n  FixedHeightMessage as DefaultMessage,\n  MessageDeleted as DefaultMessageDeleted,\n} from '../Message';\nimport { useNewMessageNotification } from './hooks/useNewMessageNotification';\nimport { usePrependedMessagesCount } from './hooks/usePrependMessagesCount';\nimport { useShouldForceScrollToBottom } from './hooks/useShouldForceScrollToBottom';\nimport MessageNotification from './MessageNotification';\n\nconst PREPEND_OFFSET = 10 ** 7;\n\n/**\n * VirtualizedMessageList - This component renders a list of messages in a virtual list. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\n * @example ../../docs/VirtualizedMessageList.md\n * @type {React.FC<import('types').VirtualizedMessageListInternalProps>}\n */\nconst VirtualizedMessageList = ({\n  client,\n  messages,\n  loadMore,\n  hasMore,\n  loadingMore,\n  messageLimit = 100,\n  overscan = 0,\n  shouldGroupByUser = false,\n  customMessageRenderer,\n  // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n  scrollSeekPlaceHolder,\n  Message = DefaultMessage,\n  MessageSystem = EventComponent,\n  MessageDeleted = DefaultMessageDeleted,\n  TypingIndicator = null,\n  LoadingIndicator = DefaultLoadingIndicator,\n  EmptyStateIndicator = DefaultEmptyStateIndicator,\n  stickToBottomScrollBehavior = 'smooth',\n}) => {\n  const { t } = useContext(TranslationContext);\n\n  const virtuoso = useRef(\n    /** @type {import('react-virtuoso').VirtuosoHandle | undefined} */ (undefined),\n  );\n\n  const {\n    atBottom,\n    setNewMessagesNotification,\n    newMessagesNotification,\n  } = useNewMessageNotification(messages, client.userID);\n\n  const numItemsPrepended = usePrependedMessagesCount(messages);\n\n  const shouldForceScrollToBottom = useShouldForceScrollToBottom(\n    messages,\n    client.userID,\n  );\n\n  const messageRenderer = useCallback(\n    (messageList, virtuosoIndex) => {\n      const streamMessageIndex =\n        virtuosoIndex + numItemsPrepended - PREPEND_OFFSET;\n      // use custom renderer supplied by client if present and skip the rest\n      if (customMessageRenderer) {\n        return customMessageRenderer(messageList, streamMessageIndex);\n      }\n\n      const message = messageList[streamMessageIndex];\n\n      if (!message) return <div style={{ height: '1px' }}></div>; // returning null or zero height breaks the virtuoso\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        return <MessageSystem message={message} />;\n      }\n\n      if (message.deleted_at) {\n        return smartRender(MessageDeleted, { message }, null);\n      }\n\n      return (\n        <Message\n          message={message}\n          groupedByUser={\n            shouldGroupByUser &&\n            streamMessageIndex > 0 &&\n            message.user.id === messageList[streamMessageIndex - 1].user.id\n          }\n        />\n      );\n    },\n    [\n      MessageDeleted,\n      customMessageRenderer,\n      shouldGroupByUser,\n      numItemsPrepended,\n    ],\n  );\n\n  const virtuosoComponents = useMemo(() => {\n    const EmptyPlaceholder = () => <EmptyStateIndicator listType=\"message\" />;\n    const Header = () =>\n      loadingMore ? (\n        <div className=\"str-chat__virtual-list__loading\">\n          <LoadingIndicator size={20} />\n        </div>\n      ) : (\n        <></>\n      );\n\n    /**\n     * using 'display: inline-block' traps CSS margins of the item elements, preventing incorrect item measurements.\n     * @type {import('react-virtuoso').Components['Item']}\n     */\n    const Item = (props) => {\n      return (\n        <div {...props} className=\"str-chat__virtual-list-message-wrapper\" />\n      );\n    };\n\n    const Footer = () => {\n      return TypingIndicator ? <TypingIndicator avatarSize={24} /> : <></>;\n    };\n\n    return {\n      EmptyPlaceholder,\n      Header,\n      Footer,\n      Item,\n    };\n  }, [EmptyStateIndicator, loadingMore, TypingIndicator]);\n\n  if (!messages) {\n    return null;\n  }\n\n  return (\n    <div className=\"str-chat__virtual-list\">\n      <Virtuoso\n        // @ts-expect-error\n        ref={virtuoso}\n        totalCount={messages.length}\n        overscan={overscan}\n        style={{ overflowX: 'hidden' }}\n        followOutput={(isAtBottom) => {\n          if (shouldForceScrollToBottom()) {\n            return isAtBottom ? stickToBottomScrollBehavior : 'auto';\n          }\n          // a message from another user has been received - don't scroll to bottom unless already there\n          return isAtBottom ? stickToBottomScrollBehavior : false;\n        }}\n        itemContent={(i) => {\n          return messageRenderer(messages, i);\n        }}\n        components={virtuosoComponents}\n        firstItemIndex={PREPEND_OFFSET - numItemsPrepended}\n        startReached={() => {\n          if (hasMore) {\n            loadMore(messageLimit);\n          }\n        }}\n        initialTopMostItemIndex={\n          messages && messages.length > 0 ? messages.length - 1 : 0\n        }\n        atBottomStateChange={(isAtBottom) => {\n          atBottom.current = isAtBottom;\n          if (isAtBottom && newMessagesNotification) {\n            setNewMessagesNotification(false);\n          }\n        }}\n        {...(scrollSeekPlaceHolder\n          ? { scrollSeek: scrollSeekPlaceHolder }\n          : {})}\n      />\n\n      <div className=\"str-chat__list-notifications\">\n        <MessageNotification\n          showNotification={newMessagesNotification}\n          onClick={() => {\n            if (virtuoso.current) {\n              virtuoso.current.scrollToIndex(messages.length - 1);\n            }\n            setNewMessagesNotification(false);\n          }}\n        >\n          {t('New Messages!')}\n        </MessageNotification>\n      </div>\n    </div>\n  );\n};\n\n// TODO: fix the types here when everything converted to proper TS\n/**\n * @param {import(\"types\").VirtualizedMessageListProps} props\n * @returns {React.ElementType<import(\"types\").VirtualizedMessageListInternalProps>}\n */\nexport default function VirtualizedMessageListWithContext(props) {\n  // @ts-expect-error\n  return (\n    <ChannelContext.Consumer>\n      {(\n        /* {Required<Pick<import('types').ChannelContextValue, 'client' | 'messages' | 'loadMore' | 'hasMore'>>} */ context,\n      ) => (\n        <VirtualizedMessageList\n          client={context.client}\n          messages={context.messages}\n          // @ts-expect-error\n          loadMore={context.loadMore}\n          // @ts-expect-error\n          hasMore={context.hasMore}\n          // @ts-expect-error\n          loadingMore={context.loadingMore}\n          {...props}\n        />\n      )}\n    </ChannelContext.Consumer>\n  );\n}\n","// @ts-check\nimport React, { useContext, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Message } from '../Message';\nimport { MessageInput, MessageInputSmall } from '../MessageInput';\nimport { MessageList } from '../MessageList';\n\nimport { ChannelContext, ChatContext, TranslationContext } from '../../context';\nimport { smartRender } from '../../utils';\n\n/**\n * Thread - The Thread renders a parent message with a list of replies. Use the standard message list of the main channel's messages.\n * The thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n *\n * @example ../../docs/Thread.md\n * @typedef {import('types').ThreadProps} ThreadProps\n * @type { React.FC<ThreadProps>}\n */\nconst Thread = (props) => {\n  const { channel, thread } = useContext(ChannelContext);\n\n  if (!thread || channel?.getConfig?.()?.replies === false) return null;\n\n  // The wrapper ensures a key variable is set and the component recreates on thread switch\n  return <ThreadInner {...props} key={`thread-${thread.id}-${channel?.cid}`} />;\n};\n\nThread.propTypes = {\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n  /**\n   * Additional props for underlying MessageList component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messagelist\n   * */\n  additionalMessageListProps: PropTypes.object,\n  /**\n   * Additional props for underlying Message component of parent message at the top.\n   * Available props - https://getstream.github.io/stream-chat-react/#message\n   * */\n  additionalParentMessageProps: PropTypes.object,\n  /** Make input focus on mounting thread */\n  autoFocus: PropTypes.bool,\n  /** Display the thread on 100% width of it's container. Useful for mobile style view */\n  fullWidth: PropTypes.bool,\n  /** UI component to override the default Message stored in channel context */\n  Message: /** @type {PropTypes.Validator<React.ComponentType<import('types').MessageUIComponentProps>>} */ (PropTypes.elementType),\n  /** Customized MessageInput component to used within Thread instead of default MessageInput\n      Useable as follows:\n      ```\n      <Thread MessageInput={(props) => <MessageInput parent={props.parent} Input={MessageInputSmall} /> }/>\n      ```\n  */\n  MessageInput: /** @type {PropTypes.Validator<React.ComponentType<import('types').MessageInputProps>>} */ (PropTypes.elementType),\n  /** UI component used to override the default header of the thread */\n  ThreadHeader: /** @type {PropTypes.Validator<React.ComponentType<import('types').ThreadHeaderProps>>} */ (PropTypes.elementType),\n};\n\nThread.defaultProps = {\n  fullWidth: false,\n  autoFocus: true,\n  MessageInput,\n};\n\n/**\n * @type { React.FC<import('types').ThreadHeaderProps> }\n */\nconst DefaultThreadHeader = ({ closeThread, t, thread }) => {\n  const getReplyCount = () => {\n    if (!thread?.reply_count || !t) return '';\n    if (thread.reply_count === 1) return t('1 reply');\n    return t('{{ replyCount }} replies', {\n      replyCount: thread.reply_count,\n    });\n  };\n\n  return (\n    <div className=\"str-chat__thread-header\">\n      <div className=\"str-chat__thread-header-details\">\n        <strong>{t && t('Thread')}</strong>\n        <small>{getReplyCount()}</small>\n      </div>\n      <button\n        onClick={(e) => closeThread && closeThread(e)}\n        className=\"str-chat__square-button\"\n        data-testid=\"close-button\"\n      >\n        <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\n/**\n * @typedef {import('types').ThreadProps & {key: string}} ThreadInnerProps\n * @type { React.FC<ThreadInnerProps>}\n */\nconst ThreadInner = (props) => {\n  const {\n    additionalMessageInputProps,\n    additionalMessageListProps,\n    additionalParentMessageProps,\n    autoFocus,\n    fullWidth,\n    Message: PropMessage,\n    MessageInput: ThreadMessageInput,\n    ThreadHeader = DefaultThreadHeader,\n  } = props;\n\n  const {\n    channel,\n    closeThread,\n    loadMoreThread,\n    Message: ContextMessage,\n    thread,\n    threadHasMore,\n    threadLoadingMore,\n    threadMessages,\n  } = useContext(ChannelContext);\n  const { client } = useContext(ChatContext);\n  const { t } = useContext(TranslationContext);\n\n  const messageList = useRef(/** @type {HTMLDivElement | null} */ (null));\n\n  const parentID = thread?.id;\n  const ThreadMessage = PropMessage || ContextMessage;\n\n  useEffect(() => {\n    if (parentID && thread?.reply_count && loadMoreThread) {\n      loadMoreThread();\n    }\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if (messageList.current && threadMessages?.length) {\n      const { clientHeight, scrollTop, scrollHeight } = messageList.current;\n      const scrollDown = clientHeight + scrollTop !== scrollHeight;\n\n      if (scrollDown) {\n        messageList.current.scrollTop = scrollHeight - clientHeight;\n      }\n    }\n  }, [threadMessages?.length]);\n\n  if (!thread) return null;\n\n  const read = {};\n\n  return (\n    <div\n      className={`str-chat__thread ${\n        fullWidth ? 'str-chat__thread--full' : ''\n      }`}\n    >\n      <ThreadHeader closeThread={closeThread} t={t} thread={thread} />\n      <div className=\"str-chat__thread-list\" ref={messageList}>\n        <Message\n          channel={channel}\n          client={client}\n          initialMessage\n          message={thread}\n          Message={ThreadMessage}\n          threadList\n          {...additionalParentMessageProps}\n        />\n        <div className=\"str-chat__thread-start\">\n          {t && t('Start of a new thread')}\n        </div>\n        <MessageList\n          hasMore={threadHasMore}\n          loadMore={loadMoreThread}\n          loadingMore={threadLoadingMore}\n          messages={threadMessages}\n          Message={ThreadMessage}\n          read={read}\n          threadList\n          {...additionalMessageListProps}\n        />\n      </div>\n      {smartRender(ThreadMessageInput, {\n        Input: MessageInputSmall,\n        parent: thread,\n        focus: autoFocus,\n        publishTypingEvent: false,\n        ...additionalMessageInputProps,\n      })}\n    </div>\n  );\n};\n\nexport default Thread;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChannelContext } from '../../context';\n\n/**\n * Window - A UI component for conditionally displaying thread or channel.\n *\n * @example ../../docs/Window.md\n * @type { React.FC<import('types').WindowProps>}\n */\nconst Window = ({ children, hideOnThread = false }) => {\n  const { thread } = useContext(ChannelContext);\n  // If thread is active and window should hide on thread. Return null\n  if (thread && hideOnThread) return null;\n\n  return <div className={`str-chat__main-panel`}>{children}</div>;\n};\n\nWindow.propTypes = {\n  /** show or hide the window when a thread is active */\n  hideOnThread: PropTypes.bool,\n};\n\nexport default React.memo(Window);\n"],"names":["ChatContext","React","createContext","client","StreamChat","setActiveChannel","withChatContext","OriginalComponent","ContextAwareComponent","ContextComponent","props","context","displayName","name","replace","ChannelContext","withChannelContext","Dayjs","extend","LocalizedFormat","TranslationContext","t","key","tDateTimeParser","input","withTranslationContext","isOnlyEmojis","text","noEmojis","emojiRegex","noSpace","isPromise","thing","then","byDate","a","b","created_at","allowedMarkups","matchMarkdownLinks","message","regexMdLinks","matches","match","singleMatch","links","map","i","exec","messageCodeBlocks","codeRegex","truncate","length","end","substring","markDownRenderers","link","href","startsWith","children","renderText","mentioned_users","newText","markdownLinks","codeBlocks","detectHttp","linkify","forEach","type","value","linkIsInBlock","some","block","includes","noParsingNeeded","filter","strippedHref","strippedText","displayLink","encodeURI","username","id","escapeRegExp","mkdown","re","RegExp","ReactMarkdown","uri","RootReactMarkdown","uriTransformer","generateRandomId","S4","Math","random","toString","smartRender","ElementOrComponentOrLiteral","fallback","undefined","isValidElement","element","ComponentOrLiteral","checkChannelPropType","propValue","_","componentName","constructor","Channel","Error","checkClientPropType","defaultNS","defaultLng","updateLocale","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","meridiemParse","meridiemHour","hour","meridiem","en_locale","weekdays","split","months","defaultStreami18nOptions","language","disableDateTimeTranslations","debug","logger","msg","console","warn","dayjsLocaleConfigForLanguage","DateTimeParser","Streami18n","options","i18n","createInstance","en","enTranslations","nl","nlTranslations","ru","ruTranslations","tr","trTranslations","fr","frTranslations","hi","hiTranslations","it","itTranslations","isCustomDateTimeParser","Object","keys","Ls","indexOf","availableLanguages","translations","currentLanguage","getAvailableLanguages","i18nInstance","finalOptions","localeData","relativeTime","error","translationsForLanguage","i18nextConfig","nsSeparator","keySeparator","fallbackLng","lng","interpolation","escapeValue","parseMissingKeyHandler","validateCurrentLanguage","addOrUpdateLocale","localeExists","timestamp","locale","init","resources","initialized","dayjsLocales","translation","customDayjsLocale","addResources","config","changeLanguage","setLanguageCallback","callback","AttachmentActions","actions","actionHandler","action","style","e","propTypes","PropTypes","string","isRequired","array","func","memo","progressUpdateInterval","Audio","og","audioRef","useRef","useState","isPlaying","setIsPlaying","progress","setProgress","updateProgress","useCallback","current","position","currentTime","duration","currentProgress","useEffect","play","interval","setInterval","clearInterval","pause","asset_url","image_url","title","description","width","SafeAnchor","target","className","sanitized","sanitizeUrl","Card","title_link","og_scrape_url","thumb_url","useContext","image","trimUrl","url","trimmedUrl","giphyLogo","FileAttachment","attachment","FileIcon","mime_type","file_size","Number","isFinite","prettybytes","ModalImage","data","src","shape","ModalComponent","images","toggleModal","index","modalIsOpen","ModalGateway","Modal","Carousel","View","number","bool","Gallery","setIndex","modalOpen","setModalOpen","selectedIndex","formattedArray","useMemo","source","renderImages","slice","backgroundImage","imageCount","ModalWrapper","arrayOf","object","ImageComponent","currentIndex","setState","state","imageSrc","PureComponent","SUPPORTED_VIDEO_FORMATS","isGalleryAttachment","isImageAttachment","isMediaAttachment","isAudioAttachment","isFileAttachment","renderAttachmentWithinContainer","componentType","extra","renderAttachmentActions","renderGallery","renderImage","Image","renderCard","renderFile","File","renderAudio","renderMedia","Media","Attachment","attachments","DefaultCard","DefaultImage","DefaultGallery","DefaultAudio","DefaultFile","DefaultMedia","DefaultAttachmentActions","rest","gallery","newAttachments","propsWithDefault","elementType","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","refCount","document","addEventListener","f","removeEventListener","keyCodes","fn","keyCode","listeners","code","which","values","Item","forwardRef","innerRef","Component","component","item","onClickHandler","onSelectHandler","selected","selectItem","List","dropdownScroll","getSelectedItem","getTextToReplace","itemClassName","itemStyle","onSelect","selectedItem","setSelectedItem","itemsRef","isSelected","getId","textToReplace","modifyText","handleClick","preventDefault","keyboard","handleKeyDown","event","prevSelected","renderHeader","html","__html","ref","DEFAULT_CARET_POSITION","defaultScrollToItem","container","itemHeight","parseInt","getComputedStyle","getPropertyValue","containerHight","actualScrollTop","scrollTop","itemOffsetTop","offsetTop","errorMessage","triggerPropsCheck","trigger","triggers","entries","triggerChar","settings","triggerSetting","dataProvider","output","isValidElementType","ReactTextareaAutocomplete","textareaRef","selectionStart","selectionEnd","substr","focus","setSelectionRange","currentTrigger","hasFocus","shiftKey","_replaceWord","handleSubmit","replaceWord","lastWordRegex","getCaretPosition","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","CustomEvent","bubbles","dispatchEvent","onChange","newToken","textareaValue","computeCaretPosition","token","startToken","isInteger","textToModify","startOfTokenPosition","search","newTokenString","caretPosition","newCaretPosition","modifiedText","dataLoading","setCaretPosition","_closeAutocomplete","triggerSettings","_getCurrentTriggerSettings","actualToken","String","Array","isArray","tokenRegExp","join","left","top","notSafe","prop","tokens","minChar","movePopupAsYouType","onCaretPositionChange","textarea","persist","lastToken","_isCommand","tokenMatch","trim","find","getCaretCoordinates","newTop","newLeft","_getValuesFromProvider","err","closeOnClickOutside","onBlur","el","relatedTarget","dropdownRef","Node","contains","scrollToItem","loadingComponent","_createRegExp","listenerIndex","Listeners","add","_onSpace","_onEnter","startListen","nextProps","_update","stopListen","remove","oldValue","oldTrigger","containerClassName","containerStyle","disableMentions","dropdownClassName","dropdownStyle","listClassName","SuggestionList","DefaultSuggestionList","maxRows","_getItemOnSelect","suggestionData","_getSuggestions","_getTextToReplace","SuggestionListContainer","_dropdownScroll","_onSelect","grow","Textarea","_cleanUpProps","_onClickAndBlurHandler","_changeHandler","onFocus","_onScrollHandler","_selectHandler","additionalTextareaProps","listStyle","loaderClassName","loaderStyle","Avatar","size","onClick","onMouseOver","loaded","setLoaded","setError","initials","charAt","clickableClass","height","flexBasis","lineHeight","fontSize","objectFit","oneOf","ChannelPreviewCountOnly","channel","watchers","unread","displayTitle","getLatestMessagePreview","latestMessage","messages","deleted_at","command","getDisplayTitle","currentUser","members","otherMember","m","user","getDisplayImage","ChannelPreview","Preview","activeChannel","lastMessage","setLastMessage","setUnread","isActive","cid","muteStatus","muted","countUnread","handleEvent","on","off","ChannelPreviewCompact","DefaultAvatar","channelPreviewButton","unreadClass","unread_count","activeClass","active","onSelectChannel","blur","displayImage","instanceOf","ChannelPreviewLastMessage","latestMessageLength","defaultProps","ChannelPreviewMessenger","emojiSetDef","spriteUrl","sheetColumns","sheetRows","sheetSize","commonEmoji","emoticons","short_names","custom","defaultMinimalEmojis","colons","sheet_x","sheet_y","getStrippedEmojiData","emojis","ReplyIcon","DeliveredCheckIcon","ReactionIcon","ThreadIcon","ErrorIcon","PinIcon","PinIndicator","display","alignItems","marginBottom","marginTop","marginLeft","pinned_by","MessageRepliesCountButton","reply_count","labelSingle","labelPlural","singleReplyText","pluralReplyText","replyCount","MML","align","theme","MMLReact","onClose","open","handleEscKey","KeyboardEvent","openClasses","CommandItem","entity","args","EmoticonItem","native","LoadingItems","LoadingChannels","LoadingErrorIndicator","LoadingIndicator","color","stopColor","UserItem","ChatAutoComplete","commands","onSelectItem","emojiConfig","emojiData","EmojiIndex","emojiIndex","emojiReplace","word","found","emoji","getMembersAndWatchers","memberUsers","watcherUsers","users","uniqueUsers","queryMembersDebounced","debounce","query","onReady","queryMembers","$autocomplete","response","getTriggers","q","result","matchingUsers","toLowerCase","selectedCommands","c","sort","nameA","nameB","updateInnerRef","AutoCompleteTextarea","rows","placeholder","onPaste","disabled","Tooltip","getAttachmentTypeFromMime","mime","emptyFileUploads","emptyImageUploads","apiMaxNumberOfFiles","initState","imageOrder","imageUploads","fileOrder","fileUploads","numberOfUploads","emojiPickerIsOpen","reduce","acc","file","messageInputReducer","getNewText","imageAlreadyExists","concat","newUploadFields","fileAlreadyExists","newImageUploads","_id","newFileUploads","useMessageInput","clearEditingState","doImageUploadRequest","doFileUploadRequest","errorHandler","noFiles","overrideSubmitHandler","parent","publishTypingEvent","editMessage","maxNumberOfFiles","multipleUploads","sendMessage","useReducer","dispatch","emojiPickerRef","newCursorPosition","insertText","textToInsert","maxLength","updatedText","prevText","textareaElement","handleChange","logChatPromiseExecution","keystroke","closeEmojiPicker","openEmojiPicker","stopPropagation","handleEmojiKeyDown","handleEmojiEscape","onSelectEmoji","getCommands","getConfig","getUsers","_user","self","findIndex","getAttachmentsFromUploads","imageAttachments","upload","every","fileAttachments","trimmedMessage","isEmptyMessage","someAttachmentsUploading","actualMentionedUsers","from","Set","updatedMessage","updateMessagePromise","sendMessagePromise","stopTyping","uploadFile","removeFile","fileUpload","sendFile","alreadyRemoved","removeImage","uploadImage","img","sendImage","FileReader","imageUpload","previewUri","reader","onload","readAsDataURL","maxFilesAllowed","maxFilesLeft","uploadNewFiles","files","endsWith","items","clipboardData","dataTransferItemsHaveFiles","plainTextItem","_toConsumableArray","kind","plainTextPromise","Promise","resolve","getAsString","dataTransferItemsToFiles","fileLikes","pastedText","isUploadEnabled","uploads","filterEmoji","EmojiPicker","small","Picker","UploadsPreview","channelContext","ImagePreviewer","FilePreviewer","EmojiIconLarge","EmojiIconSmall","FileUploadIcon","FileUploadIconFlat","SendButton","MessageInputLarge","EmojiIcon","DefaultEmojiIcon","DefaultFileUploadIcon","DefaultSendButton","messageInput","constructTypingString","typingUsers","otherTypingUsers","firstUser","secondUser","commaSeparatedUsers","lastUser","ImageDropzone","acceptedFiles","autocompleteTriggers","FileUploadButton","watcher_count","watcherCount","typing","Input","MessageInput","MessageInputFlat","MessageInputSmall","MessageInputSimple","EditMessageForm","onKeyDown","ReactionSelectorWithRef","latest_reactions","reaction_counts","reactionOptionsProp","reactionOptions","reverse","handleReaction","detailedView","Emoji","fullEmojiData","tooltipReactionType","setTooltipReactionType","tooltipPositions","setTooltipPositions","containerRef","tooltipRef","targetRef","useImperativeHandle","showTooltip","reactionType","hideTooltip","tooltip","getBoundingClientRect","tooltipPosition","x","arrowPosition","arrow","getUsersPerReactionType","reaction","Boolean","getLatestUserForReactionType","visibility","reactionOption","latestUser","count","ReactionSelector","objectOf","ReactionsList","reactions","getTotalReactionCount","total","getOptionForType","option","getReactionTypes","allTypes","emojiDefinition","SimpleReactionsList","defaultEmojiData","handleActionWarning","useActionHandler","updateMessage","removeMessage","dataOrName","messageID","formData","sendAction","getDeviceWidth","device","useBreakpoint","window","innerWidth","breakpoint","setBreakpoint","getInnerWidth","throttle","useDeleteHandler","deleteMessage","useEditHandler","customInitialState","customSetEditing","customClearEditingHandler","editing","setEditing","setEdit","clearEdit","validateAndGetMessage","returnValue","isUserMuted","mutes","userMuted","MESSAGE_ACTIONS","edit","delete","flag","mute","pin","react","reply","defaultPinPermissions","commerce","admin","anonymous","channel_member","channel_moderator","guest","member","moderator","owner","gaming","livestream","messaging","team","getMessageActions","canDelete","canFlag","canEdit","canMute","canPin","canReact","canReply","messageActionsAfterPermission","messageActions","push","areMessagePropsEqual","deepequal","readBy","groupStyles","lastReceivedId","messageListRect","shouldMessageComponentUpdate","messageHasReactions","messageHasAttachments","getImages","getNonImageAttachments","getReadByTooltipText","outStr","otherUsers","slicedArr","restLength","splice","moreCount","MessagePropTypes","Date","updated_at","missingUseFlagHandlerParameterWarning","useFlagHandler","notifications","notify","getSuccessNotification","getErrorNotification","flagMessage","successMessage","createEventHandler","useMentionsHandler","customMentionHandler","channelOnMentionsClick","onMentionsClick","channelOnMentionsHover","onMentionsHover","useMentionsUIHandler","eventHandlers","useMobilePress","targetMessage","setTargetMessage","handleMobilePress","HTMLElement","closestMessage","closest","classList","isClickInside","missingUseMuteHandlerParamsWarning","useMuteHandler","muteUser","unmuteUser","fallbackMessage","useOpenThreadHandler","customOpenThread","channelOpenThread","openThread","usePinHandler","permissions","currentChannelPermissions","currentChannelMember","userID","currentChannelWatcher","role","handlePin","pinned","pinMessage","unpinMessage","reactionHandlerWarning","useReactionHandler","userExistingReaction","own_reactions","originalMessage","reactionChangePromise","deleteReaction","sendReaction","useReactionClick","reactionSelectorRef","messageWrapperRef","showDetailedReactions","setShowDetailedReactions","isReactionEnabled","messageDeleted","hasListener","closeDetailedReactions","messageWrapper","onReactionListClick","useRetryHandler","customRetrySendMessage","contextRetrySendMessage","retrySendMessage","useUserHandler","onUserClick","onUserClickHandler","onUserHover","onUserHoverHandler","useUserRole","isMyMessage","isAdmin","membership","isOwner","isModerator","canEditMessage","canDeleteMessage","MessageActionsBox","handleDelete","handleEdit","handleFlag","handleMute","mine","setReverse","checkIfReverse","containerElement","containerRect","right","parent_id","MessageActions","addNotification","customWrapperClass","getFlagMessageErrorNotification","getFlagMessageSuccessNotification","getMuteUserErrorNotification","getMuteUserSuccessNotification","getPinMessageErrorNotification","propHandleDelete","propHandleFlag","propHandleMute","propHandlePin","inline","pinPermissions","setEditingState","actionsBoxOpen","setActionsBoxOpen","isMuted","hideOptions","messageDeletedAt","MessageActionsWrapper","defaultWrapperClass","wrapperClass","onClickOptionsAction","wrapperProps","MessageOptionsComponent","displayActions","displayLeft","displayReplies","propHandleOpenThread","handleOpenThread","initialMessage","threadList","channelConfig","shouldShowReactions","shouldShowReplies","replies","status","MessageTextComponent","DefaultReactionList","DefaultReactionSelector","propOnMentionsClick","onMentionsClickMessage","propOnMentionsHover","onMentionsHoverMessage","customInnerClass","unsafeHTML","customOptionProps","userLanguage","hasReactions","hasAttachment","messageTextToRender","messageMentionedUsersItem","messageText","innerClass","MessageDeleted","messageClasses","defaultTimestampFormat","notValidDateWarning","noParsingFunctionWarning","getDateString","messageCreatedAt","formatDate","format","parse","parsedTime","MessageTimestamp","propTDatetimeParser","customClass","contextTDateTimeParser","createdAt","when","MessageSimple","EditMessageInput","DefaultEditMessageForm","propUpdateMessage","propHandleAction","handleAction","propHandleReaction","propHandleRetry","handleRetry","onUserClickCustomHandler","onUserHoverCustomHandler","propTDateTimeParser","channelUpdateMessage","createRef","DefaultAttachment","DefaultMessageDeleted","additionalMessageInputProps","retryHandler","mml","MessageSimpleStatus","justReadByMe","lastReadUser","Message","oneOfType","node","actionsEnabled","y","bottom","toJSON","propChannel","MessageUIComponent","propOnUserClick","propOnUserHover","propOpenThread","propRetrySendMessage","contextChannel","messageActionsHandler","reaction_scores","MessageCommerce","DefaultReactionsList","firstGroupStyle","MessageLivestreamComponent","propEditing","propSetEdit","propClearEdit","propChannelConfig","propT","DefaultPinIndicator","contextT","ownEditing","ownSetEditing","ownClearEditing","MessageLivestreamActions","MessageTeam","retry","marginRight","MessageTeamStatus","MessageTeamAttachments","selectColor","dark","hue","hashUserId","userId","hash","charCodeAt","abs","ceil","log10","getUserColor","FixedHeightMessage","groupedByUser","renderedText","userColor","channelReducer","pinnedMessages","read","loading","thread","hasMore","loadingMore","parentId","threadMessages","_objectSpread","threads","formatMessage","threadLoadingMore","threadHasMore","initialState","useMentionsHandlers","tagName","textContent","innerHTML","userName","useEditMessageHandler","doUpdateMessageRequest","isMounted","EmptyPlaceholder","ChannelInner","doMarkReadRequest","DefaultEmoji","DefaultEmojiIndex","DefaultEmojiPicker","DefaultLoadingErrorIndicator","DefaultLoadingIndicator","useIsMounted","originalTitle","lastRead","online","throttledCopyStateFromChannel","leading","trailing","markRead","disconnected","read_events","markReadThrottled","mainChannelUpdated","show_in_channel","hidden","useLayoutEffect","errored","done","onVisibilityChange","watch","loadMoreFinished","loadMore","limit","navigator","onLine","oldestMessage","oldestID","perPage","id_lt","queryResponse","hasMoreMessages","addMessageSorted","doSendMessageRequest","doSendMessage","messageData","messageResponse","createMessagePreview","clientSideID","uuidv4","filterErrorMessages","messagePreview","loadMoreThreadFinished","loadMoreThread","parentID","oldMessages","oldestMessageID","getReplies","threadHasMoreMessages","newThreadMessages","closeThread","onMentionsHoverOrClick","channelContextValue","core","StreamChannel","ChannelHeader","propImage","live","openMobileNav","channelImage","member_count","subtitle","memberCount","ChatDown","ChannelListTeam","sidebarImage","showSidebar","chevrondown","LoadMoreButton","refreshing","LoadMorePaginator","hasNextPage","loadNextPage","DefaultLoadMoreButton","EmptyStateIndicator","listType","moveChannelUp","channels","channelIndex","unshift","getChannel","MAX_QUERY_CHANNELS_LIMIT","useMessageNewListener","setChannels","lockChannelOrder","allowNewMessagesFromUnfilteredChannels","channelInList","channel_type","channel_id","uniqBy","useNotificationMessageNewListener","customHandler","useNotificationAddedToChannelListener","useNotificationRemovedFromChannelListener","useChannelDeletedListener","useChannelTruncatedListener","forceUpdate","useChannelUpdatedListener","newChannels","useChannelHiddenListener","useChannelVisibleListener","useConnectionRecoveredListener","useUserPresenceChangedListener","newChannel","usePaginatedChannels","filters","activeChannelHandler","loadingChannels","setLoadingChannels","setRefreshing","offset","setOffset","setHasNextPage","filterString","JSON","stringify","queryChannels","queryType","newOptions","channelQueryResponse","useMobileNavigation","channelListRef","navOpen","closeMobileNav","handleClickOutside","DEFAULT_FILTERS","DEFAULT_OPTIONS","DEFAULT_SORT","ChannelList","channelUpdateCount","setChannelUpdateCount","setActiveChannelOnMount","customActiveChannel","customActiveChannelObject","chan","loadedChannels","channelRenderFilterFn","onMessageNew","onAddedToChannel","onRemovedFromChannel","onChannelDeleted","onChannelHidden","onChannelVisible","onChannelTruncated","onChannelUpdated","renderChannel","previewProps","renderEmptyStateIndicator","DefaultEmptyStateIndicator","renderList","Paginator","ChannelListMessenger","ChannelSearch","useChat","initialNavOpen","translators","setTranslators","setMutes","setNavOpen","setChannel","setTimeout","clientMutes","userAgent","getUserAgent","setUserAgent","version","me","streami18n","registerSetLanguageCallback","prevTranslator","getTranslators","translator","Chat","DateSeparator","date","formattedDate","toISOString","EventComponent","sentence","mousewheelListener","WheelEvent","deltaY","calculateTopPosition","offsetParent","calculateOffset","offsetHeight","innerHeight","InfiniteScroll","initialLoad","isReverse","loader","threshold","useCapture","useWindow","isLoading","listenToScroll","elementProps","scrollComponent","scrollListener","parentElement","reverseOffset","doc","documentElement","body","parentNode","pageYOffset","scrollHeight","clientHeight","scrollEl","attributes","childrenArray","createElement","pageStart","InfiniteScrollPaginator","ReverseInfiniteScroll","Center","MessageNotification","showNotification","CustomNotification","ConnectionStatus","setOnline","connectionChanged","getLastReceived","getReadStates","readData","readState","last_read","userLastReadMsgId","insertDates","hideDeletedMessages","lastDateSeparator","newMessages","l","messageDate","toDateString","prevMessageDate","insertIntro","headerPosition","messageTime","getTime","nextMessageTime","getGroupStyles","previousMessage","nextMessage","noGroupByUser","isTopMessage","isBottomMessage","MessageListInner","bottomRef","disableDateSeparator","HeaderComponent","internalInfiniteScrollProps","internalMessageProps","MessageSystem","onMessageLoadCaptured","TypingIndicator","enrichMessages","messageWithDates","enrichedMessages","messageGroupStyles","elements","isEqual","avatarSize","typing_events","typingInChannel","typingInThread","MessageList","_scrollToRef","messageList","scrollDown","scrollToTarget","containerEl","isElement","nodeType","isNumber","prototype","call","scrollToBottom","newMessagesNotification","scrollOffset","scrolledUpThreshold","closeToTop","userScrolledUp","notificationText","ct","n","notificationTimeouts","messageLimit","clearTimeout","prevProps","list","offsetBottom","prevState","snapshot","currentLastMessage","previousLastMessage","hasNewMessage","dateSeparator","notification","goToNewMessages","DefaultDateSeparator","DefaultTypingIndicator","useNewMessageNotification","currentUserId","setNewMessagesNotification","lastMessageId","atBottom","prevMessageId","usePrependedMessagesCount","currentFirstMessageId","firstMessageId","earliestMessageId","previousNumItemsPrepended","numItemsPrepended","useShouldForceScrollToBottom","lastFocusedOwnMessage","initialFocusRegistered","recheckForNewOwnMessage","PREPEND_OFFSET","VirtualizedMessageList","overscan","shouldGroupByUser","customMessageRenderer","scrollSeekPlaceHolder","DefaultMessage","stickToBottomScrollBehavior","virtuoso","shouldForceScrollToBottom","messageRenderer","virtuosoIndex","streamMessageIndex","virtuosoComponents","Header","Footer","Virtuoso","overflowX","isAtBottom","scrollSeek","scrollToIndex","VirtualizedMessageListWithContext","Thread","additionalMessageListProps","additionalParentMessageProps","autoFocus","fullWidth","ThreadHeader","DefaultThreadHeader","getReplyCount","ThreadInner","PropMessage","ThreadMessageInput","ContextMessage","ThreadMessage","Window","hideOnThread"],"mappings":"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,IAAAA,QAAQ,EAAE,0BAHF;AAIRC,IAAAA,OAAO,EAAE,UAJD;AAKRC,IAAAA,QAAQ,EAAE,wBALF;AAMRC,IAAAA,QAAQ,EAAE;AANF;AADa,CAAzB;AAUAtG,yBAAK,CAAC+F,YAAN,CAAmB,IAAnB,EAAyB;AACvBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,OAAO,EAAE,iBADD;AAERC,IAAAA,OAAO,EAAE,gBAFD;AAGRE,IAAAA,OAAO,EAAE;AAHD;AADa,CAAzB;AAQA,IAAMO,SAAS,GAAG;AAChBC,EAAAA,QAAQ,EAAE,2DAA2DC,KAA3D,CACR,GADQ,CADM;AAIhBC,EAAAA,MAAM,EAAE,wFAAwFD,KAAxF,CACN,GADM;AAJQ,CAAlB;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAME,wBAAwB,GAAG;AAC/BC,EAAAA,QAAQ,EAAE,IADqB;AAE/B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"}